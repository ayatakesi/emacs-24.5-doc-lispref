<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Appendix A. Emacs 23 Antinews</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="Antinews"/>Appendix A. Emacs 23 Antinews</h1></div></div></div><p>時代に逆らって生きるユーザーのために、以下はEmacsバージョン23.4へのダウングレードに関する情報です。Emacs
24.5機能の不在による結果としての偉大なる単純さを、ぜひ堪能してください。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="idm84977872"/>Old Lisp Features in Emacs 23</h1></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>レキシカルスコープのサポートは削除されました。すべての変数はダイナミックなスコープをもちます。<code class="literal">lexical-binding</code>変数と、<code class="literal">eval</code>の<em class="replaceable"><code>lexical</code></em>引数は削除されました。フォーム<code class="literal">defvar</code>と<code class="literal">defconst</code>は、すべての変数がダイナミックになったので、もはや変数をダイナミックとマークすることはありません。
</p><p>ダイナミックバインディングだけをもつことが、Emacs拡張の精神に適合しています。任意のEmacsコードによる定義済み変数へのアクセスを許容する方が、混乱を最小にするのです。とはいえ、あなたのプログラムが理解しにくくなるのを避けるためのヒントは、<a class="link" href="ch12s09.html#Dynamic-Binding-Tips" title="Proper Use of Dynamic Binding">Dynamic
Binding Tips</a>を参照してください。
</p></li><li class="listitem"><p>Lispから引数を<code class="literal">nil</code>省略してマイナーモード関数を呼び出しても、マイナーモードは無条件でに有効になりません。かわりにマイナーモードのオンとオフが切り替わります。これはインタラクティブな呼び出し時の挙動なので、行うのは簡単です。これの1つの欠点は、フックからマイナーモードを有効にするのが、より面倒になることです。これを行うためには、以下のようなことをする必要があります
</p><pre class="screen">(add-hook 'foo-hook (lambda () (bar-mode 1)))
</pre><p>または、<code class="literal">turn-on-bar-mode</code>を定義して、それをフックから呼び出してください。
</p></li><li class="listitem"><p>ダミーのメジャーモード<code class="literal">prog-mode</code>は、削除されました。プログラミング関連のモードの慣習に適合させるためにこれを使うかわりに、あなたのモードがこれらの慣習にしたがうよう、明示的に保証するべきです。<a class="link" href="ch23s02.html#Major-Mode-Conventions" title="Major Mode Conventions">Major
Mode Conventions</a>を参照してください。
</p></li><li class="listitem"><p>Emacsの双方向表示と、編集にたいするサポートはなくなります。R2Lテキスト挿入により、行やパラグラフの表示方法が混乱することを心配する必要がなくなるので、関数<code class="literal">bidi-string-mark-left-to-right</code>は削除されました。さらに、双方向表示に関連する、他の多くの関数と変数が削除されました。<code class="literal">U+200E</code>("left-to-right
mark")のような、Unicodeの方向文字は表示で特別な効果をもたなくなります。
</p></li><li class="listitem"><p>Emacsのウィンドウは、ほとんどがLispから隠蔽された内部状態をもつようになりました。内部的なウィンドウは、もはやLispから見えなくなります。<code class="literal">window-parent</code>のような関数、windowの配置に関連するwindowパラメーター、およびwindowローカルなバッファーリストはすべて削除されました。ウィンドウのリサイズに関する関数は、それらがあまりに小さければ、ウィンドウを削除できます。
</p><p>バッファー表示を制御する、“アクション関数”の機能は、<code class="literal">display-buffer-overriding-action</code>と関連する変数、<code class="literal">display-buffer</code>の<em class="replaceable"><code>action</code></em>引数、および他の関数が削除されました。Emacsがバッファーを表示するウィンドウを選択する方法をプログラム的に制御するためには、<code class="literal">pop-up-frames</code>と他の変数を正しく組み合わせてバインドする方法です。
</p></li><li class="listitem"><p>標準的な補完インターフェースは、変数<code class="literal">completion-extra-properties</code>、補完関数にたいする<code class="literal">metadata</code>アクションフラグ、“補完カテゴリー(completion
categories)”の排除により簡略化されました。Lispプログラマーは、補完のチューニング手法の選択肢を見つけるために途方に暮れるようなことは少なくなりましたが、あるパッケージが自身のニーズをこの合理的なインターフェースが満たさないことを見い出したときには、特別な補完機能を自身で実装しなければなりません。
</p></li><li class="listitem"><p><code class="literal">copy-directory</code>は、目標ディレクトリーが既存であろうとなかろうと、同じように振る舞います。目標ディレクトリーが存在すれば、1つ目のディレクトリーをサブディレクトリーとしてコピーするのではなく、1つ目のディレクトリーの<span class="emphasis"><em>内容</em></span>を、目標ディレクトリーにコピーします(サブディレクトリーは再帰的に処理される)
</p></li><li class="listitem"><p><code class="literal">delete-file</code>と<code class="literal">delete-directory</code>にたいする<em class="replaceable"><code>trash</code></em>引数は削除されました。変数<code class="literal">delete-by-moving-to-trash</code>は、注意して使用しなければならなくなりました。これが非<code class="literal">nil</code>のときは常に、<code class="literal">delete-file</code>と<code class="literal">delete-directory</code>にたいするすべての呼び出しで、trashが使用されます。
</p></li><li class="listitem"><p>EmacsはSELinuxファイルコンテキストをサポートしなくなったので、<code class="literal">copy-file</code>の<em class="replaceable"><code>preserve-selinux-context</code></em>引数は削除されました。<code class="literal">backup-buffer</code>のリターン値は、もはやSELinuxファイルコンテキストにたいするエントリーをもちません。
</p></li><li class="listitem"><p>テキストエリア内でのマウスクリック入力イベントでの、<em class="replaceable"><code>position</code></em>リスト(<a class="link" href="ch21s07.html#Click-Events" title="Click Events">Click
Events</a>を参照)のY座標は、テキストエリア上端ではなく、(もしあれば)ヘッダー行上端から数えるようになりました。
</p></li><li class="listitem"><p>メニューkeymap内のバインディング(<a class="link" href="ch22s03.html" title="Format of Keymaps">Format of
Keymaps</a>を参照)は、以下のように定義内に追加の<em class="replaceable"><code>cache</code></em>エントリーを必要とするかもしれなくなります:
</p><pre class="screen">(<em class="replaceable"><code>type</code></em> <em class="replaceable"><code>item-name</code></em> <em class="replaceable"><code>cache</code></em> . <em class="replaceable"><code>binding</code></em>)
</pre><p>
<em class="replaceable"><code>cache</code></em>エントリーは、同じコマンドを呼び出すキーボードキーシーケンスを記録するために、Emacsにより内部的に使用されます。Lispプログラマーは決してこれを使用するべきではありません。
</p></li><li class="listitem"><p><code class="literal">gnutls</code>ライブラリーは削除され、それに併なって関数<code class="literal">open-network-stream</code>が簡略化されました。暗号化されたネットワークを望むLispプログラムは、<span class="command"><strong>starttls</strong></span>や<span class="command"><strong>gnutls-cli</strong></span>のような、外部プログラムを呼び出さなければならなくなります。
</p></li><li class="listitem"><p>ツールバーはセパレーターを表示できなくなり、これによりグラフィカルなフレームすべてで、数ピクセルのスペースが開放されました。
</p></li><li class="listitem"><p>簡略化にたいする継続要求の一環として、他の多くの関数と変数が排除されました。
</p></li></ul></div></div></div></body></html>