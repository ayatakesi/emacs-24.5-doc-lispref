<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tips for Documentation Strings</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Documentation-Tips"/>Tips for Documentation Strings</h1></div></div></div><a id="idm84554320" class="indexterm"/><a id="idm84553552" class="indexterm"/><p>以下は、ドキュメント文字列記述に関するいくつかのヒントと慣習です。コマンド<strong class="userinput"><code>M-x
checkdoc-minor-mode</code></strong>を実行すれば、これらの慣習の多くをチェックできます。
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>ユーザーが理解することを意図したすべての関数、コマン、変数はドキュント文字列をもつこと。
</p></li><li class="listitem"><p>Lispプログラムの内部的な変数とサブルーチンは、同様にドキュメント文字列をもつことができる。ドキュメント文字列は、実行中のEmacs内で非常に僅かなスペースしか占めない。
</p></li><li class="listitem"><p>80列スクリーンのEmacsウィンドウに適合するように、ドキュメント文字列をフォーマットすること。ほとんどの行を60文字以下に短くするのは、良いアイデアである。最初の行は67文字以下にすること。さもないと<code class="literal">apropos</code>の出力で見栄えが悪くなる。
</p><a id="idm84549712" class="indexterm"/><p>見栄えがよくなるなら、そのテキストをフィルできる。Emacs
Lispモードは、<code class="literal">emacs-lisp-docstring-fill-column</code>で指定された幅に、ドキュメント文字列をフィルする。しかし、ドキュメント文字列の行ブレークを注意深く調整すれば、ドキュメント文字列の可読性をより向上できることがある。ドキュメント文字列が長い場合には、セクション間に空行を使用すること。
</p></li><li class="listitem"><p>ドキュンメント文字列の最初の行は、それ自身が要約となるような、1つか2つの完全なセンテンスから成り立つこと。<strong class="userinput"><code>M-x
apropos</code></strong>は最初の行だけを表示するので、その行のコンテンツが自身で完結していなければ、結果の見栄えは悪くなる。特に、最初の行は大文字で始めて、ピリオで終わること。
</p><p>関数では最初の行は“その関数は何を行うのか?”、変数にたいしては最初の行は“その値は何を意味するのか?”という問いに簡略に答えること。
</p><p>ドキュメント文字列を1行に制限しないこと。その関数や変数の使用法の詳細を説明する必要に応じて、その分の行数を使用すること。テキストの残りの部分にたいしても、完全なセンテンスを使用してほしい。
</p></li><li class="listitem"><p>ユーザーが無効化されたコマンドの使用を試みる際、Emacsはそれのドキュメント文字列の最初のパラグラフ(最初の空行までのすべて)だけを表示する。もし望むならえ、その表示をより有用になるよう、最初の空行の前に何の情報を含めるか選択できる。
</p></li><li class="listitem"><p>最初の行では、その関数のすべての重要な引数と、関数呼び出しで記述される順に、それらに言及すること。その関数が多くの引数をもつなら、最初の行でそれらすべてに言及するのは不可能である。この場合、もっとも重要な引数を含む、最初の引数数個について最初の行で言及すること。
</p></li><li class="listitem"><p>ある関数のドキュメント文字列がその関数の引数の値に言及する際には、引数を大文字にした名前が引数の値であるかのように使用すること。つまり関数<code class="literal">eval</code>のドキュメント文字列では、最初の引数の名前が<code class="literal">form</code>なので、‘<code class="literal">FORM</code>’で参照する:
</p><pre class="screen">Evaluate FORM and return its value.
</pre><p>同様に、リストやベクターをサブユニットへの分解で、それらのいくつかを異なるように示すような際には、メタ構文変数(metasyntactic
variables)を大文字で記述すること。以下の例の‘<code class="literal">KEY</code>’と‘<code class="literal">VALUE</code>’は、これの実践例である:
</p><pre class="screen">The argument TABLE should be an alist whose elements
have the form (KEY . VALUE).  Here, KEY is ...
</pre></li><li class="listitem"><p>ドキュメント文字列内でLispシンボルに言及する際は、大文字小文字を絶対に変更しないこと。そのシンボルの名前が<code class="literal">foo</code>なら、“Foo”ではなく“foo”である(“Foo”は違うシンボルだ)。
</p><p>これは、関数の引数の値の記述ポリシーと反するように見えるかもしれないが、矛盾は実際には存在しない。引数の<span class="emphasis"><em>value</em></span>は、その関数が値の保持に使用する<span class="emphasis"><em>symbol</em></span>と同じではない。
</p><p>これによりセンテンス先頭に小文字を置くことになり、それが煩しいなら、センテンス開始がシンボルにならないようそのセンテンスを書き換えること。
</p></li><li class="listitem"><p>ドキュメント文字列の開始と終了は空白文字を使用しないこと。
</p></li><li class="listitem"><p>ソースコード内の後続行のテキストが、最初の行と揃うとうに、ドキュメント文字列の後続行を<span class="bold"><strong>インデントしてはならない</strong></span>。これはソースコードでは見栄えがよいが、ユーザーがドキュメトを閲覧する際は奇妙な見栄えになる。開始のダブルクォーテーションの前のインデントは、その文字列の一部には含まれないことを忘れないこと!
</p><a id="Docstring-hyperlinks"/></li><li class="listitem"><p>ドキュメント文字列がLispシンボルを参照する際には、たとえば‘<code class="literal">lambda</code>’のように、それがプリントされるとき(通常は小文字を意味する)のように、前後をシングルクォーテーションで括るとともに、記述すること。2つ例外はある。<code class="literal">t</code>と<code class="literal">nil</code>はシングルクォーテーションを記述しない(このマニュアルでは、すべてのシンボルをシングルクォーテーションで括り、異なる慣習を使用している)。
</p><a id="idm84534352" class="indexterm"/><p>Helpモードは、シングルクォーテーションの内部のシンボル名がドキュメント文字列で使用されている際、それが関数と変数のいずれかの定義をもつ婆には、自動的にハイパーリンクを作成する。これらの機能を使用するのに、何か特別なことを行う必要はない。しかしあるシンボルが関数と変数の両方の定義をもち、れらの一方だけを参照したい場合にには、そのシンボル名の直前に‘<code class="literal">variable</code>’、‘<code class="literal">option</code>’、‘<code class="literal">function</code>’、‘<code class="literal">command</code>’の単語のいずれかを記述して、それを指定できる(これらの指示語の識別では大文字小文字に差はない)。たとえば以下を記述すると
</p><pre class="screen">This function sets the variable `buffer-file-name'.
</pre><p>これのハイパーリンクは<code class="literal">buffer-file-name</code>の変数のドキュメントだけを参照し、関数のドキュメントは参照しない。
</p><p>あるシンボルが関数、および/または変数の定義をもつが、ドキュメントしているシンボルの使用とそれらが無関係なら、すべてのハイパーリンク作成を防ぐために、そのシンボル名の前に単語‘<code class="literal">symbol</code>’か‘<code class="literal">program</code>’を記述できる。たとえば、
</p><pre class="screen">If the argument KIND-OF-RESULT is the symbol `list',
this function returns a list of all the objects
that satisfy the criterion.
</pre><p>これは、ここでは無関係な関数<code class="literal">list</code>のドキュメントに、ハイパーリンクを作成しない。
</p><p>通常、変数ドキュメントがない変数には、ハイパーリンクは作成されない。そのような変数の前に単語‘<code class="literal">variable</code>’と‘<code class="literal">option</code>’のいずれかを記述すれば、ハイパーリンクの作成を強制できる。
</p><p>フェイスにたいするハイパーリンクは、そのフェイスの前か後に単語‘<code class="literal">face</code>’があれば作成される。この場合には、たとえそのシンボルが変数や関数として定義されていても、フェイスのドキュメントだけが表示される。
</p><p>Infoドキュメントにハイパーリンクを作成するには、‘<code class="literal">info node</code>’、‘<code class="literal">Info node</code>’、‘<code class="literal">info
anchor</code>’、‘<code class="literal">Info
anchor</code>’のいずれかの後に、シングルクォーテーション内にInfoのノード(かアンカー)を記述する。このInfoファイル名のデフォルトは‘<code class="literal">emacs</code>’である。たとえば、
</p><pre class="screen">See Info node `Font Lock' and Info node `(elisp)Font Lock Basics'.
</pre><p>最後にURLのハイパーリンクを作成するには、‘<code class="literal">URL</code>’の後にシングルクォーテーションで括ったURLを記述する。たとえば、
</p><pre class="screen">The home page for the GNU project has more information (see URL
`http://www.gnu.org/').
</pre></li><li class="listitem"><p>ドキュメント文字列内に直接キーシーケンスを記述しないこと。かわりに、それらを表すために‘<code class="literal">\\[…]</code>’構造を使用すること。たとえば‘<code class="literal">C-f</code>’と記述するかわりに、‘<code class="literal">\\[forward-char]</code>’と記述する。Emacsがドキュメント文字列を表示する際には、何であれカレントで<code class="literal">forward-char</code>にバインドされたキーに置き換える(これは通常は‘<code class="literal">C-f</code>’だが、そのユーザーがキーバインディングを移動していれば、何か他の文字かもしれない)。<a class="link" href="ch24s03.html" title="Substituting Key Bindings in Documentation">Keys
in Documentation</a>を参照のこと。
</p></li><li class="listitem"><p>メジャーモードのドキュメント文字列では、グローバルマップではなく、そのモードのローカルマップを参照したいだろう。したがって、どのキーマップを使用するか指定するために、ドキュメント文字列内で一度‘<code class="literal">\\&lt;…&gt;</code>’構造を使用する。最初に‘<code class="literal">\\[…]</code>’を使用する前にこれを行うこと。‘<code class="literal">\\&lt;…&gt;</code>’の内部のテキストは、そのメジャーモードにたいするローカルキーマップを含む変数名であること。
</p><p>ドキュメント文字列の表示が低速になるので、非常に多数回の‘<code class="literal">\\[…]</code>’の使用は実用的ではない。メジャーモードのもっとも重要なコマンドの記述にこれを使用し、そのモードの残りのキーマップの表示には‘<code class="literal">\\{…}</code>’を使用する。
</p></li><li class="listitem"><p>一貫性を保つために,関数のドキュメント文字列の最初のセンテンス内の動詞は、命令形で表すこと。たとえば“Return the cons of A and
B.”か、好みによっては“Returns the cons of A and
B.”を使用する。通常は、最初のパラグラフの残りの部分にたいして、同様に行っても見栄えがよい。各センテンスが叙実的で適切な主題をもつなら、後続のパラグラフの見栄えはよくなる。
</p></li><li class="listitem"><p>yes-or-no述語であるような関数のドキュメント文字列は、何が“真”を構成するか明示的に示すために、“Return t
if”のような単語で始まるべきである。単語“return”は、小文字の“t”で開始される、幾分紛らわしい可能性のあるセンテンスを避ける。
</p></li><li class="listitem"><p>ドキュメント文字列内の開カッコで始まる行は、以下のように開カッコの前にバックスラッシュを記述する:
</p><pre class="screen">The argument FOO can be either a number
\(a buffer position) or a string (a file name).
</pre><p>これはその開カッコがdefunの開始として扱われることを防ぐ(section “Defuns” in <em class="citetitle">The GNU Emacs
Manual</em>を参照)。
</p></li><li class="listitem"><p>ドキュメント文字列は受動態ではなく能動態、未来形ではなく現在形で記述すること。たとえば、“A list containing A and B will
be returned.”ではなく、“Return a list containing A and B.”と記述すること。
</p></li><li class="listitem"><p>不必要な“cause”(および同等の単語)の使用を避けること。“Cause Emacs to display text in
boldface”ではなく、単に“Display text in boldface”と記述すること。
</p></li><li class="listitem"><p>多くの人にとってなじみがなく、それをtypoと間違えるであろうから、“iff”(“if and only
if”を意味する数学用語)の使用を避けること。ほとんどの場合、その意味は単なる“if”で明快である。それ以外では、その意味を伝える代替えフレーズを探すよう試みること。
</p></li><li class="listitem"><p>特定のモードや状況でのみコマンドに意味がある際には、ドキュメント文字列内でそれに言及すること。たとえば<code class="literal">dired-find-file</code>のドキュメントは:
</p><pre class="screen">In Dired, visit the file or directory named on this line.
</pre></li><li class="listitem"><p>ユーザーがセットしたいと望むかもしれないオプションを表す変数を定義する際には、<code class="literal">defcustom</code>を使用すること。<a class="link" href="ch12s05.html" title="Defining Global Variables">Defining
Variables</a>を参照されたい。
</p></li><li class="listitem"><p>yes-or-noフレアグであるような変数のドキュメント文字列は、すべての非<code class="literal">nil</code>値が等価であることを明確にし、<code class="literal">nil</code>と非<code class="literal">nil</code>が何を意味するかを明示的に示すために、“Non-nil
means”のような単語で始めること。
</p></li></ul></div></div></body></html>