<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 3. Numbers</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Numbers"/>Chapter 3. Numbers</h1></div></div></div><a id="idm40595792" class="indexterm"/><a id="idm40595024" class="indexterm"/><p>GNU Emacsは2つの数値データ型 — <em class="firstterm">整数(integers)</em>と<em class="firstterm">浮動小数点数(floating-point
numbers)</em>をサポートします。整数は−3、0、7、13、511などの整数です。浮動小数点数は−4.5、0.0、2.71828などの小数部をもちます・これらは指数記数法でも表現できます
—
‘<code class="literal">1.5e2</code>’は‘<code class="literal">150.0</code>’と同じです。ここで‘<code class="literal">e2</code>’は10の2乗をあらわし、それに1.5を乗じるという意味です。整数計算は正確であり、オーバーフローするときもあります。浮動小数点数の計算においては、数値は固定された精度をもつため、、しばしば丸め誤差(rounding
errors)を引き起こします。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Integer-Basics"/>Integer Basics</h1></div></div></div><p>整数の値の範囲はマシンに依存します。最小の範囲は−536,870,912から536,870,911(30ビット長の
−2**29
から
2**29 − 1)
ですが、多くのマシンはこれより広い範囲を提供します。このチャプターの例の多くは、最小の整数は30ビット長であると仮定します。
<a id="idm40590416" class="indexterm"/>
</p><p>Lispリーダーは、(オプションで最初の符号記号と、最後のピリオドをともなう)数字のシーケンスとして整数を読み取ります。Emacsの範囲を超える整数は、浮動小数点数として扱われます。
</p><pre class="screen"> 1               ; 整数1。
 1.              ; 整数1。
+1               ; これも整数1。
-1               ; 整数−1。
 9000000000000000000
                 ; 浮動小数点数9e18.
 0               ; 整数0
-0               ; 整数0
</pre><a id="idm40588624" class="indexterm"/><a id="idm40583760" class="indexterm"/><a id="idm40582992" class="indexterm"/><a id="idm40582224" class="indexterm"/><a id="idm40581456" class="indexterm"/><a id="idm40580688" class="indexterm"/><p>基数が10以外の整数の構文は、‘<code class="literal">#</code>’の後に基数を指定する文字 —
2進は‘<code class="literal">b</code>’、8進は‘<code class="literal">o</code>’、16進は‘<code class="literal">x</code>’、‘<code class="literal"><em class="replaceable"><code>radix</code></em>r</code>’は基数<em class="replaceable"><code>radix</code></em> —
を記述します。基数を指定する文字の大文字小文字は区別されません。したがって‘<code class="literal">#b<em class="replaceable"><code>integer</code></em></code>’は<em class="replaceable"><code>integer</code></em>を2進として読み取り、‘<code class="literal">#<em class="replaceable"><code>radix</code></em>r<em class="replaceable"><code>integer</code></em></code>’は<em class="replaceable"><code>integer</code></em>を基数<em class="replaceable"><code>radix</code></em>として読み取ります。<em class="replaceable"><code>radix</code></em>に指定できる値は2から36です。たとえば:
</p><pre class="screen">#b101100 ⇒ 44
#o54 ⇒ 44
#x2c ⇒ 44
#24r1k ⇒ 44
</pre><p>整数にたいして処理を行なうさまざまな関数、特にビット演算(<a class="link" href="ch04s08.html" title="Bitwise Operations on Integers">Bitwise
Operations</a>を参照してください)を理解するためには、数を2進形式で見ることが助けになることがしばしばあります。
</p><p>30ビットの2進では、10進数の整数5は以下のようになります:
</p><pre class="screen">0000...000101 (全部で30ビット)
</pre><p>(‘<code class="literal">...</code>’は30ビットのワードを満たすのに充分なビットを意味し、この場合の‘<code class="literal">...</code>’は12個の0ビットを意味します。以下の例でも、2進の整数を読みやすくするために、‘<code class="literal">...</code>’の表記を使用します)
</p><p>整数の−1は、以下のようになります:
</p><pre class="screen">1111...111111 (全部で30ビット)
</pre><p><a id="idm46703312" class="indexterm"/>
−1は30個の1で表現されます(これは<em class="firstterm">2の補数</em>表記と呼ばれます)。
</p><p>−1から4を減じることにより、負の整数−5が得られます。10進の整数4は、2進では100です。したがって、−5は以下のようになります:
</p><pre class="screen">1111...111011 (全部で30ビット)
</pre><p>この実装では、0ビットの2進の最大は、10進の536,870,911です。これは2進では以下のようになります:
</p><pre class="screen">0111...111111 (全部で30ビット)
</pre><p>算術関数は整数が範囲の外かをチェックしないので、536,870,911に1を加えると、その値は負の整数−536,870,912になります:
</p><pre class="screen">(+ 1 536870911)
     ⇒ -536870912
     ⇒ 1000...000000 (全部で30ビット)
</pre><p>このチャプターで説明する多くの関数は、数字の位置として引数にマーカー(<a class="link" href="ch31.html" title="Chapter 30. Markers">Markers</a>を参照してください)を受け取ります。そのような関数にたいする実際の引数は数字かマーカーなので、わたしたちはこれらの引数に<em class="replaceable"><code>number-or-marker</code></em>という名前を与えることがあります。引数の値がマーカーの場合、マーカーの位置が使用され、マーカーのバッファーは無視されます。
</p><a id="idm46698064" class="indexterm"/><a id="idm46697296" class="indexterm"/><pre class="synopsis"><a id="idm46696272" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">most-positive-fixnum</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、Emacs Lispが扱える整数の最大値です。典型的な値は32ビットでは
2**29 − 1
、64ビットでは
2**61 − 1
です。
</p></blockquote></div><a id="idm46681552" class="indexterm"/><a id="idm46680784" class="indexterm"/><pre class="synopsis"><a id="idm46679760" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">most-negative-fixnum</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、Emacs Lispが扱える最小の整数です。これは負の整数です。典型的な値は32ビットでは
−2**29
、64ビットでは
−2**61、
です。
</p></blockquote></div><p>Emacs
Lispでは、テキスト文字は整数により表現されます。0から<code class="literal">(max-char)</code>までの整数は、有効な文字として判断されます。<a class="link" href="ch33s05.html" title="Character Codes">Character
Codes</a>を参照してください。
</p></div></div></body></html>