<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Floating-Point Basics</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Float-Basics"/>Floating-Point Basics</h1></div></div></div><a id="idm46670800" class="indexterm"/><p>浮動小数点数は整数ではない数を表現するのに便利です。浮動小数点数の範囲は、使用しているマシンでのCデータ型の<code class="literal">double</code>と同じ範囲です。現在Emacsでサポートされているすべてのコンピューターでは、これは倍精度の<acronym class="acronym">IEEE</acronym>浮動小数点数です。
</p><p>浮動小数点数にたいする入力構文は、小数点と指数のどちらか1つ、または両方が必要とします。オプションの符号(‘<code class="literal">+</code>’か‘<code class="literal">-</code>’)は、その数字と指数の前に記述します。たとえば、‘<code class="literal">1500.0</code>’、‘<code class="literal">+15e2</code>’、‘<code class="literal">15.0e+2</code>’、‘<code class="literal">+1500000e-3</code>’、‘<code class="literal">.15e4</code>’は、値が1500の浮動小数点数を記述する5つの方法です。これらはすべて等価です。Common
Lispと同様、Emacs
Lispは、浮動小数点数の小数点の後に、少なくとも1つの数字を必要とします。‘<code class="literal">1500.</code>’は整数であり、浮動小数点数ではありません。
</p><p>Emacs
Lispは<code class="literal">-0.0</code>を、<code class="literal">equal</code>と<code class="literal">=</code>に関して、通常の0と数学的に同じものとして扱います。これは、(他の処理がこれらを区別するとしても、<code class="literal">-0.0</code>と<code class="literal">0.0</code>は数学的に等しいとする)<acronym class="acronym">IEEE</acronym>浮動小数点数規格にしたがっています。
</p><a id="idm46660688" class="indexterm"/><a id="idm46659920" class="indexterm"/><a id="idm46659152" class="indexterm"/><a id="idm46654288" class="indexterm"/><p><acronym class="acronym">IEEE</acronym>浮動小数点数規格は、浮動小数点数として、正の無限大と、負の無限大をサポートします。この規格はNaNまたは“not-a-number(数字ではない)”と呼ばれる値クラスも提供します。数学関数は、正しい答えが存在しないような場合に、このような値をreturnします。たとえば<code class="literal">(/
0.0 0.0)</code>はNaNをreturnします。NaN値に符号がついていたとしても、実用的な目的にたいして、Emacs
Lispにおける異なるNaN値に、意味のある違いはありません。
</p><p>以下は、これらの特別な浮動小数点数にたいする入力構文です:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">infinity
</span></dt><dd><p>‘<code class="literal">1.0e+INF</code>’と‘<code class="literal">-1.0e+INF</code>’
</p></dd><dt><span class="term">not-a-number
</span></dt><dd><p>‘<code class="literal">0.0e+NaN</code>’と‘<code class="literal">-0.0e+NaN</code>’
</p></dd></dl></div><p>以下の関数は浮動小数点数を扱うために特化したものです:
</p><pre class="synopsis"><a id="idm46639312" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">isnan</code> <em class="replaceable"><code>x</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この述語は浮動小数引数がNaNのときは<code class="literal">t</code>、それ以外は<code class="literal">nil</code>をreturnします。
</p></blockquote></div><pre class="synopsis"><a id="idm46622800" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">frexp</code> <em class="replaceable"><code>x</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数はコンスセル<code class="literal">(<em class="replaceable"><code>s</code></em>
.
<em class="replaceable"><code>e</code></em>)</code>をreturnします。ここで<em class="replaceable"><code>s</code></em>と<em class="replaceable"><code>e</code></em>は、浮動小数点数のsignificand(浮動小数点数を2の指数表現したときの仮引数)と指数です。
</p><p><em class="replaceable"><code>x</code></em>が有限の場合、<em class="replaceable"><code>s</code></em>は0.5以上1.0未満の浮動小数点数で、<em class="replaceable"><code>e</code></em>は整数で、
<em class="replaceable"><code>x</code></em> = <em class="replaceable"><code>s</code></em> * 2**<em class="replaceable"><code>e</code></em>です。
<em class="replaceable"><code>x</code></em>が0または無限の場合、<em class="replaceable"><code>s</code></em>は<em class="replaceable"><code>x</code></em>と等しくなります。<em class="replaceable"><code>x</code></em>がNaNの場合は、<em class="replaceable"><code>s</code></em>もNaNです。<em class="replaceable"><code>x</code></em>が0の場合、<em class="replaceable"><code>e</code></em>は0です。
</p></blockquote></div><pre class="synopsis"><a id="idm46612176" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">ldexp</code> <em class="replaceable"><code>sig</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>exp</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、significandが<em class="replaceable"><code>sig</code></em>、指数が<em class="replaceable"><code>exp</code></em>の浮動小数点数をreturnします。
</p></blockquote></div><pre class="synopsis"><a id="idm46607440" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">copysign</code> <em class="replaceable"><code>x1</code></em> <em class="replaceable"><code>x2</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>koの関数は<em class="replaceable"><code>x2</code></em>の、<em class="replaceable"><code>x1</code></em>の値にコピーして、その結果をreturnします。<em class="replaceable"><code>x1</code></em>と<em class="replaceable"><code>x2</code></em>は浮動小数でなければなりません。
</p></blockquote></div><pre class="synopsis"><a id="idm46602320" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">logb</code> <em class="replaceable"><code>x</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>x</code></em>の2進指数をreturnします。より正確にいうと、この値は<span class="mathphrase">|x|</span>の2を底とする対数を、整数に切り下げたものです。
</p><pre class="screen">(logb 10)
     ⇒ 3
(logb 10.0e20)
     ⇒ 69
</pre></blockquote></div></div></body></html>