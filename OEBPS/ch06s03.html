<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Accessing Elements of Lists</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="List-Elements"/>Accessing Elements of Lists</h1></div></div></div><a id="idm49816272" class="indexterm"/><pre class="synopsis"><a id="idm49815248" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">car</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、コンスセル<em class="replaceable"><code>cons-cell</code></em>の1番目のスロットにより参照される値をreturnします。他の言い方をすると、この関数は<em class="replaceable"><code>cons-cell</code></em>のCARをreturnします。
</p><p>特別なケースとして、<em class="replaceable"><code>cons-cell</code></em>が<code class="literal">nil</code>の場合、この関数は<code class="literal">nil</code>をreturnします。したがって、リストはすべて引数として有効です。引数がコンスセルでも<code class="literal">nil</code>でもない場合、エラーがシグナルされます。
</p><pre class="screen">(car '(a b c))
     ⇒ a
</pre><pre class="screen">(car '())
     ⇒ nil
</pre></blockquote></div><pre class="synopsis"><a id="idm49807824" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">cdr</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、コンスセル<em class="replaceable"><code>cons-cell</code></em>の2番目のスロットにより参照される値をreturnします。他の言い方をすると、この関数は<em class="replaceable"><code>cons-cell</code></em>のCDRをreturnします。
</p><p>特別なケースとして、<em class="replaceable"><code>cons-cell</code></em>が<code class="literal">nil</code>の場合、この関数は<code class="literal">nil</code>をreturnします。したがって、リストはすべて引数として有効です。引数がコンスセルでも<code class="literal">nil</code>でもない場合、エラーがシグナルされます。
</p><pre class="screen">(cdr '(a b c))
     ⇒ (b c)
</pre><pre class="screen">(cdr '())
     ⇒ nil
</pre></blockquote></div><pre class="synopsis"><a id="idm49800400" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">car-safe</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数により、他のデータ型によるエラーを起こさずに、コンスセルのCARを取得できます。この関数は、<em class="replaceable"><code>object</code></em>がコンスセルの場合は<em class="replaceable"><code>object</code></em>のCAR、それ以外は<code class="literal">nil</code>をreturnします。この関数は、<em class="replaceable"><code>object</code></em>がリスとでないときはエラーをシグナルする<code class="literal">car</code>とは対象的です。
</p><pre class="screen">(car-safe <em class="replaceable"><code>object</code></em>)
≡
(let ((x <em class="replaceable"><code>object</code></em>))
  (if (consp x)
      (car x)
    nil))
</pre></blockquote></div><pre class="synopsis"><a id="idm49781456" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">cdr-safe</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数により、他のデータ型によるエラーを起こさずに、コンスセルのCDRを取得できます。この関数は、<em class="replaceable"><code>object</code></em>がコンスセルの場合は<em class="replaceable"><code>object</code></em>のCDR、それ以外は<code class="literal">nil</code>をreturnします。この関数は、<em class="replaceable"><code>object</code></em>がリスとでないときはエラーをシグナルする<code class="literal">cdr</code>とは対象的です。
</p><pre class="screen">(cdr-safe <em class="replaceable"><code>object</code></em>)
≡
(let ((x <em class="replaceable"><code>object</code></em>))
  (if (consp x)
      (cdr x)
    nil))
</pre></blockquote></div><pre class="synopsis"><a id="idm49754320" class="indexterm"/><span class="category"><span class="bold"><strong>Macro</strong></span>:</span> <code class="function">pop</code> <em class="replaceable"><code>listname</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このマクロはリストのCARを調べて、それをリストから取り去るのを1度に行なう便利な方法を提供します。この関数は<em class="replaceable"><code>listname</code></em>に格納されたリストにたいして処理を行ないます。この関数はリストから1番目の要素を削除して、CDRを<em class="replaceable"><code>listname</code></em>に保存し、その後で削除した要素をreturnします。
</p><p>1番単純なケースは、リストに名前をつけるためのクォートされていないシンボルの場合です。この場合、このマクロは<code class="literal">(prog1 (car
listname) (setq listname (cdr listname)))</code>と等価です。
</p><pre class="screen">x
     ⇒ (a b c)
(pop x)
     ⇒ a
x
     ⇒ (b c)
</pre><p>より一般的なのは、<em class="replaceable"><code>listname</code></em>が汎変数(generalized
variable)の場合です。この場合、このマクロは<code class="literal">setf</code>を使用して<em class="replaceable"><code>listname</code></em>に保存します。<a class="link" href="ch12s15.html" title="Generalized Variables">Generalized
Variables</a>を参照してください。
</p><p>リストに要素を追加する<code class="literal">push</code>マクロについては、<a class="link" href="ch06s05.html" title="Modifying List Variables">List Variables</a>を参照してください。
</p></blockquote></div><pre class="synopsis"><a id="idm49745232" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">nth</code> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>list</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="Definition-of-nth"/><p>この関数は、<em class="replaceable"><code>list</code></em>の<em class="replaceable"><code>n</code></em>番目の要素をreturnします。要素は0から数えられるので、<em class="replaceable"><code>list</code></em>のCARは要素0になります。<em class="replaceable"><code>list</code></em>の長さが<em class="replaceable"><code>n</code></em>以下の場合、値は<code class="literal">nil</code>です。
</p><pre class="screen">(nth 2 '(1 2 3 4))
     ⇒ 3
</pre><pre class="screen">(nth 10 '(1 2 3 4))
     ⇒ nil

(nth n x) ≡ (car (nthcdr n x))
</pre><p>関数<code class="literal">elt</code>は似ていますが、これは任意の種類のシーケンスに適用されます。歴史的な理由により、この関数は逆の順序で引数を受け取ります。<a class="link" href="ch07.html#Sequence-Functions" title="Sequences">Sequence
Functions</a>を参照してください。
</p></blockquote></div><pre class="synopsis"><a id="idm49736400" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">nthcdr</code> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>list</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>list</code></em>の<em class="replaceable"><code>n</code></em>番目のCDRをreturnします。他の言い方をすると、この関数は<em class="replaceable"><code>list</code></em>の最初の<em class="replaceable"><code>n</code></em>個のリンクをスキップしてから、それ以降をreturnします。
</p><p><em class="replaceable"><code>n</code></em>が0の場合、<code class="literal">nthcdr</code>は<em class="replaceable"><code>list</code></em>全体をreturnします。<em class="replaceable"><code>list</code></em>の長さが<em class="replaceable"><code>n</code></em>以下の場合、<code class="literal">nthcdr</code>は<code class="literal">nil</code>をreturnします。
</p><pre class="screen">(nthcdr 1 '(1 2 3 4))
     ⇒ (2 3 4)
</pre><pre class="screen">(nthcdr 10 '(1 2 3 4))
     ⇒ nil
</pre><pre class="screen">(nthcdr 0 '(1 2 3 4))
     ⇒ (1 2 3 4)
</pre></blockquote></div><pre class="synopsis"><a id="idm49726416" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">last</code> <em class="replaceable"><code>list</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>n</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>list</code></em>の最後のリンクをreturnします。このリンクの<code class="literal">car</code>は、このリストの最後の要素です。<em class="replaceable"><code>list</code></em>がnullの場合、<code class="literal">nil</code>がreturnされます。<em class="replaceable"><code>n</code></em>が非<code class="literal">nil</code>の場合、<em class="replaceable"><code>n</code></em>番目から最後までのリンクがreturnされます。<em class="replaceable"><code>n</code></em>が<em class="replaceable"><code>list</code></em>の長さより大きい場合は、<em class="replaceable"><code>list</code></em>全体がreturnされます。
</p></blockquote></div><pre class="synopsis"><a id="idm49718224" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">safe-length</code> <em class="replaceable"><code>list</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="Definition-of-safe_002dlength"/><p>この関数は、エラーや無限ループの危険なしで、<em class="replaceable"><code>list</code></em>の長さをreturnします。この関数は一般的に、リスト内のコンスセルの個数をreturnします。しかし循環リストでは、単に上限値が値となるため、非常に大きくなる場合があります。
</p><p><em class="replaceable"><code>list</code></em>が<code class="literal">nil</code>でもコンスセルでもない場合、<code class="literal">safe-length</code>は0をreturnします。
</p></blockquote></div><p>循環リストを考慮しなくてもよい場合に、リストの長さを計算するもっとも一般的な方法は、<code class="literal">length</code>を使うことです。<a class="link" href="ch07.html#Sequence-Functions" title="Sequences">Sequence
Functions</a>を参照してください。
</p><pre class="synopsis"><a id="idm49707088" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">caar</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、<code class="literal">(car (car <em class="replaceable"><code>cons-cell</code></em>))</code>と同じです。
</p></blockquote></div><pre class="synopsis"><a id="idm49698896" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">cadr</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、<code class="literal">(car (cdr <em class="replaceable"><code>cons-cell</code></em>))</code>または<code class="literal">(nth 1
<em class="replaceable"><code>cons-cell</code></em>)</code>と同じです。
</p></blockquote></div><pre class="synopsis"><a id="idm49693904" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">cdar</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、<code class="literal">(cdr (car <em class="replaceable"><code>cons-cell</code></em>))</code>と同じです。
</p></blockquote></div><pre class="synopsis"><a id="idm49685712" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">cddr</code> <em class="replaceable"><code>cons-cell</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、<code class="literal">(cdr (cdr <em class="replaceable"><code>cons-cell</code></em>))</code>または<code class="literal">(nthcdr 2
<em class="replaceable"><code>cons-cell</code></em>)</code>と同じです。
</p></blockquote></div><pre class="synopsis"><a id="idm49680720" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">butlast</code> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>n</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、リスト<em class="replaceable"><code>x</code></em>から、最後の要素、または最後の<em class="replaceable"><code>n</code></em>個の要素を削除してreturnします。<em class="replaceable"><code>n</code></em>が0より大きい場合、この関数はリストのコピーを作成するので、元のリストに影響はありません。一般的に、<code class="literal">(append
(butlast <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>n</code></em>)  (last <em class="replaceable"><code>x</code></em>
<em class="replaceable"><code>n</code></em>))</code>は、<em class="replaceable"><code>x</code></em>と等しいリストをreturnします。
</p></blockquote></div><pre class="synopsis"><a id="idm49673168" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">nbutlast</code> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>n</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、リストのコピーを作成するのではなく、<code class="literal">cdr</code>を適切な要素に変更することにより破壊的に機能するバージョンの<code class="literal">butlast</code>です。
</p></blockquote></div></div></body></html>