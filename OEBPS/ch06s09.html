<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Property Lists</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Property-Lists"/>Property Lists</h1></div></div></div><a id="idm49033168" class="indexterm"/><a id="idm49032400" class="indexterm"/><p><em class="firstterm">プロパティーリスト(property
list。短くはplist)</em>は、ペアになった要素のリストです。各ペアはプロパティー名(通常はシンボル)とプロパティー値を対応づけます。以下はプロパティーリストの例です:
</p><pre class="screen">(pine cones numbers (1 2 3) color "blue")
</pre><p>このプロパティーリストは、<code class="literal">pine</code>を<code class="literal">cones</code>、<code class="literal">numbers</code>を<code class="literal">(1 2
3)</code>、<code class="literal">color</code>を<code class="literal">"blue"</code>に関連づけます。プロパティー名とプロパティー値には任意のLispオブジェクトを指定できますが、通常プロパティー名は(この例のように)シンボルです。
</p><p>いくつかのコンテキストでプロパティーリストが使用されます。たとえば、関数<code class="literal">put-text-property</code>はプロパティーリストを引数にとり、文字列またはバッファー内のテキストにたいして、テキストプロパティーと、テキストに適用するプロパティー値を指定します。<a class="link" href="ch32s19.html" title="Text Properties">Text
Properties</a>を参照してください。
</p><p>プロパティーリストが頻繁に使用される他の例は、シンボルプロパティーの保管です。すべてのシンボルは、シンボルに関する様々な情報を記録するために、プロパティーのリストを処理します。これらのプロパティーはプロパティーリストの形式で保管されます。<a class="link" href="ch09s04.html" title="Symbol Properties">Symbol
Properties</a>を参照してください。
</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Plists-and-Alists"/>Property Lists and Association Lists</h2></div></div></div><a id="idm49023824" class="indexterm"/><a id="idm49023056" class="indexterm"/><a id="idm49022288" class="indexterm"/><p>連想リスト(<a class="link" href="ch06s08.html" title="Association Lists">Association
Lists</a>を参照してください)は、プロパティーリストとよく似ています。連想リストとは対照的に、プロパティー名は一意でなければならないので、プロパティーリスト内でペアの順序に意味はありません。
</p><p>様々なLisp関数や変数に情報を付加するためには、連想リストよりプロパティーリストの方が適しています。プログラムでこのような情報すべてを1つの連想リストに保持する場合、特定のLisp関数や変数にたいする連想をチェックする度に、リスト全体を検索する必要が生じ、それにより遅くなる可能性があります。対照的に、関数名や変数自体のプロパティーリストに同じ情報を保持すれば、検索ごとにそのプロパティーリストの長さだけを検索するようになり、通常はこちらの方が短い時間で済みます。変数のドキュメントが<code class="literal">variable-documentation</code>という名前のプロパティーに記録されているのは、これが理由です。同様にバイトコンパイラーも、特別に扱う必要がある関数を記録するためにプロパティーを使用します。
</p><p>連想リストにも独自の利点があります。アプリケーションに依存しますが、プロパティーを更新するより、連想リストの先頭に連想を追加する方が速いでしょう。シンボルにたいするすべてのプロパティーは同じプロパティーリストに保管されるので、プロパティー名を異なる用途のために使用すると衝突の可能性があります(この理由により、そのプログラムで通常の変数や関数の名前につけるプレフィクスをプロパティー名の先頭につけることにより、一意と思われるプロパティー名を選ぶのはよいアイデアです)。連想リストは、連想をリストの先頭にpushし、後にある連想は無視されるので、スタックと同様に使用できます。これはプロパティーリストでは不可能です。
</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Plist-Access"/>Property Lists Outside Symbols</h2></div></div></div><a id="idm49018320" class="indexterm"/><a id="idm49017552" class="indexterm"/><p>以下の関数はプロパティーリストを操作するために使用されます。これらの関数はすべて、プロパティー名の比較に<code class="literal">eq</code>を使用します。
</p><pre class="synopsis"><a id="idm49015632" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">plist-get</code> <em class="replaceable"><code>plist</code></em> <em class="replaceable"><code>property</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、プロパティーリスト<em class="replaceable"><code>plist</code></em>に保管された、プロパティー<em class="replaceable"><code>property</code></em>の値をreturnします。この関数には、変形された(malformed)<em class="replaceable"><code>plist</code></em>引数を指定できます。<em class="replaceable"><code>plist</code></em>で<em class="replaceable"><code>property</code></em>が見つからなかった場合、この関数は<code class="literal">nil</code>をreturnします。たとえば、
</p><pre class="screen">(plist-get '(foo 4) 'foo)
     ⇒ 4
(plist-get '(foo 4 bad) 'foo)
     ⇒ 4
(plist-get '(foo 4 bad) 'bad)
     ⇒ nil
(plist-get '(foo 4 bad) 'bar)
     ⇒ nil
</pre></blockquote></div><pre class="synopsis"><a id="idm49009104" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">plist-put</code> <em class="replaceable"><code>plist</code></em> <em class="replaceable"><code>property</code></em> <em class="replaceable"><code>value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、プロパティーリスト<em class="replaceable"><code>plist</code></em>に、プロパティー<em class="replaceable"><code>property</code></em>の値として、<em class="replaceable"><code>value</code></em>を保管します。この関数は<em class="replaceable"><code>plist</code></em>を破壊的に変更するかもしれず、元のリスト構造を変更せずに新しいリストを構築することもあります。この関数は変更されたプロパティーリストをreturnするので、<em class="replaceable"><code>plist</code></em>を取得した場所に書き戻すことができます。たとえば、
</p><pre class="screen">(setq my-plist '(bar t foo 4))
     ⇒ (bar t foo 4)
(setq my-plist (plist-put my-plist 'foo 69))
     ⇒ (bar t foo 69)
(setq my-plist (plist-put my-plist 'quux '(a)))
     ⇒ (bar t foo 69 quux (a))
</pre></blockquote></div><pre class="synopsis"><a id="idm49002704" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">lax-plist-get</code> <em class="replaceable"><code>plist</code></em> <em class="replaceable"><code>property</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><code class="literal">plist-get</code>と同様ですが、プロパティーの比較に<code class="literal">eq</code>ではなく<code class="literal">equal</code>を使用します。
</p></blockquote></div><pre class="synopsis"><a id="idm48997712" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">lax-plist-put</code> <em class="replaceable"><code>plist</code></em> <em class="replaceable"><code>property</code></em> <em class="replaceable"><code>value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><code class="literal">plist-put</code>と同様ですが、プロパティーの比較に<code class="literal">eq</code>ではなく<code class="literal">equal</code>を使用します。
</p></blockquote></div><pre class="synopsis"><a id="idm48992336" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">plist-member</code> <em class="replaceable"><code>plist</code></em> <em class="replaceable"><code>property</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は与えられた<em class="replaceable"><code>property</code></em>が<em class="replaceable"><code>plist</code></em>に含まれる場合は、非<code class="literal">nil</code>をreturnします。<code class="literal">plist-get</code>とは異なり、この関数は存在しないプロパティーと、値が<code class="literal">nil</code>のプロパティーを区別できます。実際にreturnされる値は、<code class="literal">car</code>が<em class="replaceable"><code>property</code></em>で始まる、<em class="replaceable"><code>plist</code></em>の後尾部分です。
</p></blockquote></div></div></div></body></html>