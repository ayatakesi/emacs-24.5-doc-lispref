<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. Evaluation</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Evaluation"/>Chapter 9. Evaluation</h1></div></div></div><a id="idm52105552" class="indexterm"/><a id="idm52104784" class="indexterm"/><a id="idm52104016" class="indexterm"/><a id="idm52103248" class="indexterm"/><p>Emacs Lispでの式の<em class="firstterm">評価(evaluation)</em>は、<em class="firstterm">Lispインタープリター</em> —
入力としてLispオブジェクトを受け取り、それの<em class="firstterm">式としての値(value as an expression)</em>を計算します —
により処理されます。評価を行なう方法は、そのオブジェクトのデータ型に依存し、それはこのチャプターで説明するルールにより行なわれます。インタープリターは、プログラムの一部を評価するために自動的に実行されますが、Lisp基本関数の<code class="literal">eval</code>を通じて、明示的に呼び出すこともできます。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Intro-Eval"/>Introduction to Evaluation</h1></div></div></div><p>Lispインタープリター(またはLispエバリュエーター)は、Emacsの一部で、与えられた式の値を計算します。Lispで記述された関数が呼び出されるとき、エバリュエーターはその関数のbody(本文)の中の式を評価することにより、その関数の値を計算します。したがって、Lispプログラムを実行するとは、実際にはLispインタープリターを実行することを意味します。
</p><a id="idm52099152" class="indexterm"/><a id="idm52098384" class="indexterm"/><a id="idm52097616" class="indexterm"/><a id="idm52096848" class="indexterm"/><p>評価されることを意図したLispオブジェクトは、<em class="firstterm">フォーム(form)</em>、または<em class="firstterm">式(expression)</em>と呼ばれます<a href="#ftn.idm52095056" class="footnote" id="idm52095056"><sup class="footnote">[4]</sup></a>。フォームはデータオブジェクトであり、単なるテキストではないというのは、Lisp風の言語と、通常のプログラミング言語との間にある、基本的な相違の1つです。任意のオブジェクトを評価できますが、実際に評価される事が非常に多いのは数字、シンボル、リスト、文字列です。
</p><p>以降のセクションでは、各種フォームにたいして、それを評価することが何を意味するかの詳細を説明します。
</p><p>Lispフォームを読み取り、それからそのフォームを評価するのは、非常に一般的なアクティビティーですが、読み取りと評価は別のアクティビティーであり、どちらか一方を単独で処理することができます。読み取りだけでは、何も評価されません。読み取りはLispオブジェクトのプリント表現を、そのオブジェクト自体に変換します。このオブジェクトは評価されるべきフォームなのか、そのれともまったく違う目的をもつかを指定するのは、<code class="literal">read</code>の呼び出し元の役目です<a class="link" href="ch19s03.html" title="Input Functions">Input
Functions</a>を参照してください。
</p><a id="idm52091984" class="indexterm"/><p>評価とは再帰的な処理であり、あるフォームを評価することにより、そのフォームの一部が評価されるといったことがよくあります。たとえば、<code class="literal">(car
x)</code>のような<em class="firstterm">関数呼び出し(function
call)</em>のフォームを評価する場合、Emacsは最初にその引数(サブフォーム<code class="literal">x</code>)を評価します。引数を評価した後、Emacsはその関数(<code class="literal">car</code>)を<em class="firstterm">実行(executes)</em>します。その関数がLispで記述されている場合は、関数の<em class="firstterm">body(本文)</em>を評価することにより、実行が行なわれます(しかし、この例で使用している<code class="literal">car</code>はLisp関数ではなく、Cで実装された基本関数です)。関数と関数呼び出しについての情報は、<a class="link" href="ch13.html" title="Chapter 12. Functions">Functions</a>を参照してください。
</p><a id="idm52086992" class="indexterm"/><p>評価は、<em class="firstterm">環境(environment)</em>と呼ばれるコンテキストの内部で行なわれます。環境は、すべてのLisp変数(<a class="link" href="ch12.html" title="Chapter 11. Variables">Variables</a>を参照してください)のカレント値とバインディングにより構成されます。<a href="#ftn.idm52085072" class="footnote" id="idm52085072"><sup class="footnote">[5]</sup></a>フォームが新たなバインディングを作成することなく、変数を参照するとき、その変数はカレントの環境により与えられる値に評価されます。フォームの評価は、変数のバインディングにより、一時的にその環境を変更することもあります(<a class="link" href="ch12s03.html" title="Local Variables">Local
Variables</a>を参照してください)。
</p><a id="idm52083920" class="indexterm"/><p>フォームの評価が、永続する変更を行なうこともあります。これらの変更は、<em class="firstterm">副作用(side
effects)</em>と呼ばれます。副作用を生成するフォームの例は、<code class="literal">(setq foo 1)</code>です。
</p><p>コマンドキー解釈にたいする評価と混同しないでください。エディターのコマンドループは、アクティブなキーマップを使用して、キーボード入力をコマンド(インタラクティブに呼び出すことができる関数)に変換してから、そのコマンドを実行するために<code class="literal">call-interactively</code>を使用します。そのコマンドはLispで記述されている場合、コマンドの実行は通常、評価を伴います。しかし、このステップはコマンドキー解釈の一部とは考えません。<a class="link" href="ch21.html" title="Chapter 20. Command Loop">Command
Loop</a>を参照してください。
</p></div><div class="footnotes"><br/><hr/><div id="ftn.idm52095056" class="footnote"><p><a href="#idm52095056" class="para"><sup class="para">[4] </sup></a><em class="firstterm">S式(S-expression)</em>、短くは<em class="firstterm">sexp</em>という言葉でも呼ばれることがありますが、わたしたちは通常、このマニュアル内ではこの用語は使用しません。</p></div><div id="ftn.idm52085072" class="footnote"><p><a href="#idm52085072" class="para"><sup class="para">[5] </sup></a>“環境”にたいするこの定義は、プログラムの結果に影響し得るすべてのデータを特に意図するものではありません。</p></div></div></div></body></html>