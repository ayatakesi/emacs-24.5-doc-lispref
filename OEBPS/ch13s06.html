<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mapping Functions</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Mapping-Functions"/>Mapping Functions</h1></div></div></div><a id="idm53865424" class="indexterm"/><p><em class="firstterm">マップ関数(mapping
function)</em>は与えられた関数(スペシャルフォームやマクロでは<span class="emphasis"><em>ない</em></span>)を、リストや他のコレクションの各要素に適用します。Emacs
Lispにはそのような関数がいくつかあります。このセクションでは、リストにたいしてマッピングを行う<code class="literal">mapcar</code>、<code class="literal">mapc</code>、<code class="literal">mapconcat</code>を説明します。obarray内のシンボルにたいしてマッピングを行う関数<code class="literal">mapatoms</code>は、<a class="link" href="ch09s03.html#Definition-of-mapatoms">Definition
of
mapatoms</a>を参照してください。ハッシュテーブル内のkey/value関係にたいしてマッピングを行う関数<code class="literal">maphash</code>は、<a class="link" href="ch08s02.html#Definition-of-maphash">Definition
of maphash</a>を参照してください。
</p><p>これらのマップ関数は、文字テーブル(char-table)には適用されません。なぜなら文字テーブルは非常に広い範囲の疎な配列だからです。疎な配列であるという性質に適う方法で文字いテーブルにマッピングするには、関数<code class="literal">map-char-table</code>を使用します(<a class="link" href="ch07s06.html" title="Char-Tables">Char-Tables</a>を参照してください)。
</p><pre class="synopsis"><a id="idm53858256" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">mapcar</code> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>sequence</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="Definition-of-mapcar"/><p><code class="literal">mapcar</code>は、関数<em class="replaceable"><code>function</code></em>を<em class="replaceable"><code>sequence</code></em>の各要素にたいして順番に適用し、その結果をリストでreturnします。
</p><p>引数<em class="replaceable"><code>sequence</code></em>には、文字テーブルを除く任意の種類のシーケンス —
つまりリスト、ベクター、ブールベクター、文字列を指定できます。結果は常にリストになります。結果の長さは、<em class="replaceable"><code>sequence</code></em>の長さと同じです。たとえば:
</p><pre class="screen">(mapcar 'car '((a b) (c d) (e f)))
     ⇒ (a c e)
(mapcar '1+ [1 2 3])
     ⇒ (2 3 4)
(mapcar 'string "abc")
     ⇒ ("a" "b" "c")
</pre><pre class="screen">
</pre><pre class="screen">;; <code class="literal">my-hooks</code>内の各関数を呼び出す。
(mapcar 'funcall my-hooks)
</pre><pre class="screen">
</pre><pre class="screen">(defun mapcar* (function &amp;rest args)
  "Apply FUNCTION to successive cars of all ARGS.
Return the list of results."
  ;; リストが消費されていなければ、
  (if (not (memq nil args))
      ;; CARに関数を適用する。
      (cons (apply function (mapcar 'car args))
            (apply 'mapcar* function
                   ;; 残りの要素のための再帰。
                   (mapcar 'cdr args)))))
</pre><pre class="screen">
</pre><pre class="screen">(mapcar* 'cons '(a b c) '(1 2 3 4))
     ⇒ ((a . 1) (b . 2) (c . 3))
</pre></blockquote></div><pre class="synopsis"><a id="idm53848784" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">mapc</code> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>sequence</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><code class="literal">mapc</code>は<code class="literal">mapcar</code>と似ていますが、<em class="replaceable"><code>function</code></em>は副作用のためだけに使用されます —
つまり<em class="replaceable"><code>function</code></em>がreturnする値は無視され、リストに収集されません。<code class="literal">mapc</code>は常に<em class="replaceable"><code>sequence</code></em>をreturnします。
</p></blockquote></div><pre class="synopsis"><a id="idm53842640" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">mapconcat</code> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>separator</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><code class="literal">mapconcat</code>は関数<em class="replaceable"><code>function</code></em>を<em class="replaceable"><code>sequence</code></em>の各要素に適用します。結果は結合された文字列になります。結果文字列の間に、<code class="literal">mapconcat</code>は文字列<em class="replaceable"><code>separator</code></em>を挿入します。<em class="replaceable"><code>separator</code></em>には通常、スペースやカンマ、あるいはその他の適切な区切り文字が含まれます。
</p><p>引数<em class="replaceable"><code>function</code></em>はははは、1つの引数を取り文字列をreturnする関数でなければなりません。引数<em class="replaceable"><code>sequence</code></em>には、文字テーブルを除く、任意の種類のシーケンス
— つまりリスト、ベクター、ブールベクター、文字列を指定できます。
</p><pre class="screen">(mapconcat 'symbol-name
           '(The cat in the hat)
           " ")
     ⇒ "The cat in the hat"
</pre><pre class="screen">
</pre><pre class="screen">(mapconcat (function (lambda (x) (format "%c" (1+ x))))
           "HAL-8000"
           "")
     ⇒ "IBM.9111"
</pre></blockquote></div></div></body></html>