<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Accessing Function Cell Contents</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Function-Cells"/>Accessing Function Cell Contents</h1></div></div></div><p>あるシンボルの<em class="firstterm">関数定義(function
definition)</em>とは、そのシンボルの関数セルに格納されたオブジェクトのことです。ここでは、シンボルの関数セルにアクセス、テスト、セットする関数を説明します。
</p><p><a class="link" href="ch10s02.html#Definition-of-indirect_002dfunction">Definition of indirect-function</a>の、関数<code class="literal">indirect-function</code>も参照してください。
</p><pre class="synopsis"><a id="idm53784144" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">symbol-function</code> <em class="replaceable"><code>symbol</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm53781584" class="indexterm"/><p>これは<em class="replaceable"><code>symbol</code></em>の関数セル内のオブジェクトをreturnします。これは、returnされたオブジェクトが本物のの関数であるかチェックしません。
</p><p>関数セルがvoidの場合、return値は<code class="literal">nil</code>です。関数セルがvoidのときと、<code class="literal">nil</code>がセットされているときを区別するには、<code class="literal">fboundp</code>(以下参照)を使用します。
</p><pre class="screen">(defun bar (n) (+ n 2))
(symbol-function 'bar)
     ⇒ (lambda (n) (+ n 2))
</pre><pre class="screen">(fset 'baz 'bar)
     ⇒ bar
</pre><pre class="screen">(symbol-function 'baz)
     ⇒ bar
</pre></blockquote></div><a id="idm53776848" class="indexterm"/><p>シンボルに何の関数定義も与えていない場合、そのシンボルの関数セルは<em class="firstterm">void</em>だと言います。別の言い方をすると、その関数セルは、どんなLispオブジェクトも保持しません。そのシンボルを関数として呼びだそうとすると、Emacsは<code class="literal">void-function</code>エラーをシグナルします。
</p><p>voidは、<code class="literal">nil</code>やシンボル<code class="literal">void</code>とは異なることに注意してください。シンボル<code class="literal">nil</code>および<code class="literal">void</code>はLispオブジェクトであり、他のオブジェクトと同様、関数セルに格納することができます(これらのシンボルは<code class="literal">defun</code>を使用して有効な関数に成ることができます)。voidである関数セルは、どのようなオブジェクトも含みません。
</p><p><code class="literal">fboundp</code>を使用して、任意のシンボルの関数定義がvoidかどうかテストすることができます。シンボルに関数定義を与えた後は、<code class="literal">fmakunbound</code>をつかえば、再びvoidにすることができます。
</p><pre class="synopsis"><a id="idm53770320" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">fboundp</code> <em class="replaceable"><code>symbol</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、そのシンボルが関数セルにオブジェクトをもっていれば<code class="literal">t</code>、それ以外は<code class="literal">nil</code>をreturnします。これは、そのオブジェクトが本物の関数であるかチェックしません。
</p></blockquote></div><pre class="synopsis"><a id="idm53765968" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">fmakunbound</code> <em class="replaceable"><code>symbol</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>symbol</code></em>の関数セルをvoidにします。そのため、これ以降に関数セルにアクセスしようと試みると、<code class="literal">void-function</code>エラーが発生します。これは<em class="replaceable"><code>symbol</code></em>をreturnします(<a class="link" href="ch12s04.html" title="When a Variable is “Void”">Void
Variables</a>の<code class="literal">makunbound</code>も参照してください)。
</p><pre class="screen">(defun foo (x) x)
(foo 1)
     ⇒1
</pre><pre class="screen">(fmakunbound 'foo)
     ⇒ foo
</pre><pre class="screen">(foo 1)
error→ Symbol's function definition is void: foo
</pre></blockquote></div><pre class="synopsis"><a id="idm53759056" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">fset</code> <em class="replaceable"><code>symbol</code></em> <em class="replaceable"><code>definition</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>symbol</code></em>の関数セルに、<em class="replaceable"><code>definition</code></em>を格納します。結果は<em class="replaceable"><code>definition</code></em>です。<em class="replaceable"><code>definition</code></em>は通常、関数または関数の名前であるべきですが、これはチェックされません。引数<em class="replaceable"><code>symbol</code></em>は、通常のどおり評価される引数です。
</p><p>この関数は主に、関数を定義したり変更して構成を行う、<code class="literal">defun</code>や<code class="literal">advice-add</code>のようなものからサブルーチンとして使用されます。シンボルにたいして、たとえばキーボードマクロ(<a class="link" href="ch21s16.html" title="Keyboard Macros">Keyboard
Macros</a>を参照してください)のような、関数ではない関数定義与えるためにも使用することができます:
</p><pre class="screen">;; 名前つきのキーボードマクロを定義する。
(fset 'kill-two-lines "\^u2\^k")
     ⇒ "\^u2\^k"
</pre><p>関数にたいして別の名前を作成するために<code class="literal">fset</code>を使いたい場合は、かわりに<code class="literal">defalias</code>の使用を考慮してください。<a class="link" href="ch13s04.html#Definition-of-defalias">Definition
of defalias</a>を参照してください。
</p></blockquote></div></div></body></html>