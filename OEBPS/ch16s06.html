<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Repeated Loading</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Repeated-Loading"/>Repeated Loading</h1></div></div></div><a id="idm56060240" class="indexterm"/><p>1つのEmacsセッション内で、ファイルを複数回ロードできます。たとえば、バッファーで関数定義を編集して再インストールした後に、元のバージョンに戻したいときがあるかもしれません。これは、元のファイルをリロードすることにより行なうことができます。
</p><p>ファイルをロードまたはリロードするとき、<code class="literal">load</code>および<code class="literal">load-library</code>関数は未コンパイルのファイルではなく、バイトコンパイルされた同名のファイルを自動的にロードすることに留意してください。ファイルを再記述して保存後に再インストールする場合には、新しいバージョンをバイトコンパイルする必要があります。さもないと、Emacsは新しいソースではなく、古いバイトコンパイルされたファイルをロードしてしまうでしょう!
その場合には、ファイルロード時に表示されるメッセージに、そのファイルのリコンパイルを促す‘<code class="literal">(compiled; note, source is
newer)</code>’というメッセージが含まれます。
</p><p>Lispライブラリーファイル内にフォームを記述するときは、そのファイルが複数回ロードされるかもしれないことに留意してください。たとえば、そのライブラリーをリロードするときには、各変数が最初期化されるべきかどうか考慮してください。。変数がすでに初期化されている場合、<code class="literal">defvar</code>はその変数の値を変更しません(<a class="link" href="ch12s05.html" title="Defining Global Variables">Defining
Variables</a>を参照)。
</p><p>alistに要素を追加するもっともシンプルな方法は、以下のようなものでしょう:
</p><pre class="screen">(push '(leif-mode " Leif") minor-mode-alist)
</pre><p>しかし、これはそのライブラリーがリロードされた場合は、複数の要素を追加してしまうでしょう。この問題を避けるには、<code class="literal">add-to-list</code>(<a class="link" href="ch06s05.html" title="Modifying List Variables">List
Variables</a>を参照)を使用します:
</p><pre class="screen">(add-to-list 'minor-mode-alist '(leif-mode " Leif"))
</pre><p>時には、ライブラリーが既にロード済みか、明示的にテストしたいときがあるでしょう。そのライブラリーが<code class="literal">provide</code>を使用して名前付きフィーチャ(named
feature)を提供する場合は、<code class="literal">featurep</code>を使用して前に<code class="literal">provide</code>が実行されているかテストすることができます。かわりに、以下のようにすることもできます:
</p><pre class="screen">(defvar foo-was-loaded nil)

(unless foo-was-loaded
  <em class="replaceable"><code>execute-first-time-only</code></em>
  (setq foo-was-loaded t))
</pre><p/></div></body></html>