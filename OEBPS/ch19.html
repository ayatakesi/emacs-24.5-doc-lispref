<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 18. Reading and Printing Lisp Objects</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Read-and-Print"/>Chapter 18. Reading and Printing Lisp Objects</h1></div></div></div><p><em class="firstterm">プリント(print)</em>および<em class="firstterm">読み取り(read)</em>は、Lispオブジェクトからテキスト形式への変換、またはその逆の変換を行なう操作です。これらは<a class="link" href="ch03.html" title="Chapter 2. Lisp Data Types">Lisp
Data Types</a>で説明したプリント表現(printed representation)と入力構文(read syntax)を使用します。
</p><p>このチャプターでは、読み取りおよびプリントのためのLisp関数について説明します。このチャプターではさらに<em class="firstterm">ストリーム(stream)</em>についても説明します。ストリームとは、(読み取りにおいては)テキストがどこから取得されるか、(プリントにおいては)テキストをどこに出力するかを指定します。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Streams-Intro"/>Introduction to Reading and Printing</h1></div></div></div><a id="idm58608336" class="indexterm"/><a id="idm58607568" class="indexterm"/><a id="idm58606800" class="indexterm"/><p>Lispオブジェクトの<em class="firstterm">読み取り</em>とは、テキスト形式のLisp式をパース(parse:
構文解析)して、対応するLispオブジェクトを生成することを意味します。これは、LLispプログラムがLispコードファイルからLispに取得される方法でもあります。わたしたちは、そのテキストをそのオブジェクトの<em class="firstterm">入力構文(read
syntax)</em>と呼んでいます。たとえばテキスト‘<code class="literal">(a .
5)</code>’は、CARが<code class="literal">a</code>でCDRが数字の5であるようなコンスセルにたいする入力構文です。
</p><p>Lispオブジェクトの<em class="firstterm">プリント</em>とは、あるオブジェクトをそのオブジェクトの<em class="firstterm">プリント表現(printed
representation)</em> (<a class="link" href="ch03.html#Printed-Representation" title="Printed Representation and Read Syntax">Printed
Representation</a>を参照)に変換することにより、そのオブジェクトを表すテキストを生成することを意味します。上述のコンスセルをプリントすると、テキスト‘<code class="literal">(a
. 5)</code>’が生成されます。
</p><p>読み取りとプリントは、概ね逆の処理といえます。あるテキスト断片を読み取った結果生成されたオブジェクトをプリントすると、多くの場合は同じテキストが生成され、あるオブジェクトをプリントした結果のテキストを読み取ると、通常は同じようなオブジェクトが生成されます。たとえばシンボル<code class="literal">foo</code>をプリントするとテキスト‘<code class="literal">foo</code>’が生成され、そのテキストを読み取るとシンボル<code class="literal">foo</code>がリターンされます。要素が<code class="literal">a</code>と<code class="literal">b</code>のリストをプリントするとテキスト‘<code class="literal">(a
b)</code>’が生成され、そのテキストを読み取ると、(同じリストではないが)要素が<code class="literal">a</code>と<code class="literal">b</code>のリストが生成されます。
</p><p>しかし、これら2つの処理は互いにまったく逆の処理というわけではありません。３つの例外があります:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>プリントは読み取ることが不可能なテキストを生成できる。たとえば、バッファー、フレーム、サブプロセス、マーカーは‘<code class="literal">#</code>’で始まるテキストとしてプリントされる。このテキストの読み取りを試行すると、エラーとなる。これらのデータ型を読み取る方法は存在しない。
</p></li><li class="listitem"><p>1つのオブジェクトが、複数のテキスト的な表現をもつことができる。たとえば‘<code class="literal">1</code>’と‘<code class="literal">01</code>’は同じ整数を表し、‘<code class="literal">(a
b)</code>’と‘<code class="literal">(a .
(b))</code>’は同じリストを表す。読み取りは複数の候補を受容するかもしれないが、プリントはそのうちのただ1つを選択しなければならない。
</p></li><li class="listitem"><p>あるオブジェクトの読み取りシーケンスの中間の特定ポイントに、読み取り結果に影響を与えないコメントを置くことができる。
</p></li></ul></div></div></div></body></html>