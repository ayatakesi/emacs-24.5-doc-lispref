<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 19. Minibuffers</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Minibuffers"/>Chapter 19. Minibuffers</h1></div></div></div><a id="idm58268240" class="indexterm"/><a id="idm58267472" class="indexterm"/><a id="idm58266704" class="indexterm"/><p><em class="firstterm">ミニバッファー(minibuffer)</em>とは、単一の数プレフィックス引数より複雑な引数を読み取るためにEmacsコマンドが使用する、特別なバッファーのことです。これらの引数にはファイル名、バッファー名、(<strong class="userinput"><code>M-x</code></strong>での)コマンド名が含まれます。ミニバッファーはフレームの最下行、エコーエリア(<a class="link" href="ch38s04.html" title="The Echo Area">The
Echo Area</a>を参照)と同じ場所に表示されますが、引数を読み取るときだけ使用されます。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Intro-to-Minibuffers"/>Introduction to Minibuffers</h1></div></div></div><p>ほとんどの点において、ミニバッファーは普通のEmacsバッファーです。編集コマンドのようなバッファーにたいするほとんどの操作は、ミニバッファーでも機能します。しかし、バッファーを管理する操作の多くは、ミニバッファーに適用できません。ミニバッファーは常に‘<code class="literal">
*Minibuf-<em class="replaceable"><code>number</code></em>*</code>’という形式の名前をもち、変更することはできません。ミニバッファーはミニバッファー用の特殊なウィンドウだけに表示されます。これらのウィンドウは常にフレーム最下に表示されます。(フレームにミニバッファーウィンドウがないときや、ミニバッファーウィンドウだけをもつ特殊なフレームもあります。)<a class="link" href="ch29s08.html" title="Minibuffers and Frames">Minibuffers
and Frames</a>を参照してください。
</p><p>ミニバッファー内のテキストは常に<em class="firstterm">プロンプト文字列(prompt
string)</em>で始まります。これはミニバッファーを使用しているプログラムが、ユーザーにたいしてどのような種類の入力が求められているか告げるために指定するテキストです。このテキストは意図せずに変更してしまわないように、読み取り専用としてマークされます。このテキストは<code class="literal">beginning-of-line</code>、<code class="literal">forward-word</code>、<code class="literal">forward-sentence</code>、<code class="literal">forward-paragraph</code>を含む特定の移動用関数が、プロンプトと実際のテキストの境界でストップするように、フィールド(<a class="link" href="ch32s19.html#Fields" title="Defining and Using Fields">Fields</a>を参照)としてもマークされています。
</p><p>ミニバッファーのウィンドウは、通常は1行です。ミニバッファーのコンテンツがより多くのスペースを要求する場合は、自動的に拡張されます。ミニバッファーのウィンドウがアクティブな間は、ウィンドウのサイズ変更コマンドで一時的にウィンドウのサイズを変更できます。サイズの変更は、ミニバッファーをexitしたとき、通常のサイズにリバートされます。ミニバッファーがアクティブでないときはフレーム内の他のウィンドウでウィンドウのサイズ変更コマンドを使用するか、マウスでモードラインをドラッグして、ミニバッファーのサイズを永続的に変更できます。(現実装では、これが機能するには<code class="literal">resize-mini-windows</code>が<code class="literal">nil</code>でなければなりません。)
フレームがミニバッファーだけを含む場合は、そのフレームのサイズを変更してミニバッファーのサイズを変更できます。
</p><p>ミニバッファーの使用により入力イベントが読み取られ、<code class="literal">this-command</code>や<code class="literal">last-command</code>のような変数の値が変更されます(<a class="link" href="ch21s05.html" title="Information from the Command Loop">Command
Loop Info</a>を参照)。プログラムにそれらを変更させたくない場合は、ミニバッファーを使用するコードの前後でそれらをバインドするべきです。
</p><p>ある状況下では、アクティブなミニバッファーが存在するときでもコマンドがミニバッファーを使用できます。そのようなミニバッファーは<em class="firstterm">再帰ミニバッファー(recursive
minibuffer)</em>と呼ばれます。この場合、最初のミニバッファーは‘<code class="literal">
*Minibuf-1*</code>’という名前になります。再帰ミニバッファーはミニバッファー名の最後の数字を増加させて命名されます。(名前はスペースで始まるので、通常のバッファーリストには表示されません。)
再帰ミニバッファーが複数ある場合は、最内の(もっとも最近にエンターされた)ミニバッファーがアクティブなミニバッファーになります。このバッファーが、通常ではミニバッファーと呼ばれるバッファーです。変数<code class="literal">enable-recursive-minibuffers</code>、またはコマンドシンボルのその名前のプロパティをセットすることにより再帰ミニバッファーを許可、または禁止できます(<a class="link" href="ch20s13.html" title="Recursive Minibuffers">Recursive
Mini</a>を参照)。
</p><p>他のバッファーと同様、ミニバッファーは特別なキーバインドを指定するためにローカルキーマップ(<a class="link" href="ch22.html" title="Chapter 21. Keymaps">Keymaps</a>を参照)を使用します。ミニバッファーを呼び出す関数も、処理を行うためにローカルマップをセットアップします。補完なしのミニバッファーローカルマップについては、<a class="link" href="ch20s02.html" title="Reading Text Strings with the Minibuffer">Text
from Minibuffer</a>を参照してください。補完つきのミニバッファーローカルマップについては、<a class="link" href="ch20s06.html#Completion-Commands" title="Minibuffer Commands that Do Completion">Completion
Commands</a>を参照してください。
</p><a id="idm58237520" class="indexterm"/><p>ミニバッファーが非アクティブのときのメジャーモードは<code class="literal">minibuffer-inactive-mode</code>で、キーマップは<code class="literal">minibuffer-inactive-mode-map</code>です。これらは、実際にはミニバッファーが別フレームにある場合だけ、便利です。<a class="link" href="ch29s08.html" title="Minibuffers and Frames">Minibuffers
and Frames</a>を参照してください。
</p><p>Emacsがバッチモードで実行されている場合、ミニバッファーからの読み取りリクエストは、実装にはEmacs開始時に提供された標準入力記述子から行を読み取ります。これは基本的な入力だけをサポートします。特別なミニバッファーの機能(ヒストリー、補完、パスワードのマスクなど)は、バッチモードでは利用できません。
</p></div></div></body></html>