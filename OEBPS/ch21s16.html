<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Keyboard Macros</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Keyboard-Macros"/>Keyboard Macros</h1></div></div></div><a id="idm59321680" class="indexterm"/><p><em class="firstterm">キーボードマクロ(keyboard
macro)</em>は、コマンドとして考えることが可能な、入力イベントの記録されたシーケンスであり、キー定義により作成されます。キーボードマクロのLisp表現は、イベントを含む文字列またはベクターです。キーボードマクロとLispマクロ(<a class="link" href="ch14.html" title="Chapter 13. Macros">Macros</a>を参照)を混同しないでください。
</p><pre class="synopsis"><a id="idm59319504" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">execute-kbd-macro</code> <em class="replaceable"><code>kbdmacro</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em> <em class="replaceable"><code>loopfunc</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、イベントシーケンスとして<em class="replaceable"><code>kbdmacro</code></em>を実行する。<em class="replaceable"><code>kbdmacro</code></em>が文字列かベクターの場合、たとえそれがユーザーによる入力であっても、その中のイベントは忠実に実行される。シーケンスは、単一のキーシーケンスであることを<span class="emphasis"><em>要求されない</em></span>。キーボードマクロ定義は、通常は複数のキーシーケンスを結合して構成される。
</p><p><em class="replaceable"><code>kbdmacro</code></em>がシンボルの場合、そのシンボルの関数定義は<em class="replaceable"><code>kbdmacro</code></em>の箇所に使用される。それが別のシンボルの場合は、このプロセスを繰り返す。最終的に結果は文字列かベクターになる。結果がシンボル、文字列、ベクターでない場合は、エラーがシグナルされる。
</p><p>引数<em class="replaceable"><code>count</code></em>は繰り返すカウントであり、<em class="replaceable"><code>kbdmacro</code></em>がその回数実行される。<em class="replaceable"><code>count</code></em>が省略、または<code class="literal">nil</code>の場合は1回実行される。0の場合、<em class="replaceable"><code>kbdmacro</code></em>はエラーに出会うか検索が失敗するまで、何度も実行される。
</p><p><em class="replaceable"><code>loopfunc</code></em>が非<code class="literal">nil</code>の場合、それはマクロの繰り返しごとに呼び出される、引数なしの関数である。<em class="replaceable"><code>loopfunc</code></em>が<code class="literal">nil</code>をリターンすると、マクロの実行が停止する。
</p><p><code class="literal">execute-kbd-macro</code>の使用例は、<a class="link" href="ch21s08.html#Reading-One-Event" title="Reading One Event">Reading One Event</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm59307088" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">executing-kbd-macro</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、カレントで実行中のキーボードマクロを定義する文字列かベクターである。<code class="literal">nil</code>の場合、カレントで実行中のマクロは存在しない。マクロの実行により実行されたときに異なる振る舞いをするように、コマンドはこの変数をテストできる。この変数を自分でセットしてはならない。
</p></blockquote></div><pre class="synopsis"><a id="idm59303760" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">defining-kbd-macro</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、キーボードマクロの定義中のときだけ非<code class="literal">nil</code>である。マクロ定義中の間は異なる振る舞いをするように、コマンドはこの変数をテストできる。既存のマクロ定義に追加する間、値は<code class="literal">append</code>になる。コマンド<code class="literal">start-kbd-macro</code>、<code class="literal">kmacro-start-macro</code>、<code class="literal">end-kbd-macro</code>は、この変数をセットする。この変数を自分でセットしてはならない。
</p><p>この変数は常にカレント端末にたいしてローカルであり、バッファーローカルにできない。<a class="link" href="ch29s02.html" title="Multiple Terminals">Multiple Terminals</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm59297488" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">last-kbd-macro</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、もっとも最近定義されたキーボードマクロの定義である。値は文字列、ベクター、または<code class="literal">nil</code>である。
</p><p>この変数は常にカレント端末にたいしてローカルであり、バッファーローカルにできない。<a class="link" href="ch29s02.html" title="Multiple Terminals">Multiple Terminals</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm59293264" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">kbd-macro-termination-hook</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これはキーボードマクロが終了したときに実行されるノーマルフックであり、何がキーボードマクロを終了させたか(マクロの最後に達したのか、あるいはエラーにより最後に達する前に終了したのか)は問わない。
</p></blockquote></div></div></body></html>