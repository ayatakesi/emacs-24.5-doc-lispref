<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 21. Keymaps</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Keymaps"/>Chapter 21. Keymaps</h1></div></div></div><a id="idm59275088" class="indexterm"/><p>入力イベントのコマンドバインディングは、<em class="firstterm">キーマップ(keymap)</em>と呼ばれるデータ構造に記録されます。キーマップ内の各エントリーは個別のイベント型(他のキーマップ、またはコマンド)に関連づけ(または<em class="firstterm">バインド</em>)されます。イベント型がキーマップにバインドされる場合、そのキーマップは次の入力イベントを調べるために使用されます。これはコマンドが見つかるまで継続されます。このプロセス全体を<em class="firstterm">キールックアップ(key
lookup: キー照合)</em>と呼びます。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Key-Sequences"/>Key Sequences</h1></div></div></div><a id="idm59271888" class="indexterm"/><a id="idm59271120" class="indexterm"/><a id="idm59270352" class="indexterm"/><p><em class="firstterm">キーシーケンス(key
sequence)</em>、短くは<em class="firstterm">キー(key)</em>とは、1つの単位を形成する1つ以上の入力イベントのシーケンスです。入力イベントには文字、ファンクションキー、マウスアクション、または<code class="literal">iconify-frame</code>のようなEmacs外部のシステムイベントが含まれます(<a class="link" href="ch21s07.html" title="Input Events">Input
Events</a>を参照)。キーシーケンスにたいするEmacs
Lispの表現は文字列かベクターです。特に明記しない限り、引数としてキーシーケンスを受け取るEmacs
Lisp関数は両方の表現を処理することができます。
</p><p>文字列表現では、たとえば、<code class="literal">"a"</code>は<strong class="userinput"><code>a</code></strong>、<code class="literal">"2"</code>は<strong class="userinput"><code>2</code></strong>を表すといったように、英数字はその文字自身を意味します。コントロール文字イベントは部分文字列<code class="literal">"\C-"</code>、メタ文字は<code class="literal">"\M-"</code>によりプレフィクスされます。たとえば<code class="literal">"\C-x"</code>はキー<strong class="userinput"><code>C-x</code></strong>を表します。それらに加えて、<span class="keycap"><strong>TAB</strong></span>、<span class="keycap"><strong>RET</strong></span>、<span class="keycap"><strong>ESC</strong></span>、<span class="keycap"><strong>DEL</strong></span>などのイベントはそれぞれ<code class="literal">"\t"</code>、<code class="literal">"\r"</code>、<code class="literal">"\e"</code>、<code class="literal">"\d"</code>で表されます。複雑なキーシーケンスの文字列表現は、イベント成分の文字列表現を結合したものです。したがって<code class="literal">"\C-xl"</code>はキーシーケンス<strong class="userinput"><code>C-x
l</code></strong>を表します。
</p><p>キーシーケンスにはファンクションキー、マウスボタンイベント、システムイベント、または<strong class="userinput"><code>C-=</code></strong>や<strong class="userinput"><code>H-a</code></strong>のような文字列で表現できない非<acronym class="acronym">ASCII</acronym>文字が含まれます。これらはベクターとして表現される必要があります。
</p><p>ベクター表現ではベクターの各要素は1つの入力イベントをイベントのLisp形式で表します。<a class="link" href="ch21s07.html" title="Input Events">Input
Events</a>を参照してください。たとえば、ベクター<code class="literal">[?\C-x ?l]</code>はキーシーケンス<strong class="userinput"><code>C-x l</code></strong>を表します。
</p><p>キーシーケンスを文字列やベクターによる表現で記述する例は、section “Init Rebinding” in <em class="citetitle">The GNU Emacs
Manual</em>を参照してください。
</p><pre class="synopsis"><a id="idm59252944" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">kbd</code> <em class="replaceable"><code>keyseq-text</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数はテキスト<em class="replaceable"><code>keyseq-text</code></em>(文字列定数)をキーシーケンス(文字列かベクターの定数)に変換する。<em class="replaceable"><code>keyseq-text</code></em>の内容は<strong class="userinput"><code>C-x
C-k <span class="keycap"><strong>RET</strong></span></code></strong>(<code class="literal">kmacro-edit-macro</code>)
コマンドにより呼び出されたバッファー内と同じ構文を使用するべきであ特にファンクションキーの名前は‘<code class="literal">&lt;…&gt;</code>’で囲まなければならない。section “Edit
Keyboard Macro” in <em class="citetitle">The GNU Emacs Manual</em>を参照のこと。
</p><pre class="screen">(kbd "C-x") ⇒ "\C-x"
(kbd "C-x C-f") ⇒ "\C-x\C-f"
(kbd "C-x 4 C-f") ⇒ "\C-x4\C-f"
(kbd "X") ⇒ "X"
(kbd "RET") ⇒ "\^M"
(kbd "C-c SPC") ⇒ "\C-c "
(kbd "&lt;f1&gt; SPC") ⇒ [f1 32]
(kbd "C-M-&lt;down&gt;") ⇒ [C-M-down]
</pre></blockquote></div></div></div></body></html>