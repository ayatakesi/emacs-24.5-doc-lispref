<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Remapping Commands</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Remapping-Commands"/>Remapping Commands</h1></div></div></div><a id="idm62640720" class="indexterm"/><p>あるコマンドから他のコマンドへの<em class="firstterm">リマップ(remap)</em>には、特別な種類のキーバインディングが使用できます。この機能を使用するためには、ダミーイベント<code class="literal">remap</code>で始まり、その後にリマップしたいコマンド名が続くようなキーシーケンスにたいするキーバインディングを作成します。そして、そのバインディングにたいしては、新たな定義(通常はコマンド名だが、キーバインディングにたいして有効な他の任意の定義を指定可能)を指定します。
</p><p>たとえば、Myモードというモードが、<code class="literal">kill-line</code>のかわりに呼び出される<code class="literal">my-kill-line</code>という特別なコマンドを提供するとします。これを設定するには、このモードのキーマップに以下のようなリマッピングが含まれるはずです:
</p><pre class="screen">(define-key my-mode-map [remap kill-line] 'my-kill-line)
</pre><p>その後は、<code class="literal">my-mode-map</code>がアクティブなときは常に、ユーザーが<strong class="userinput"><code>C-k</code></strong>(<code class="literal">kill-line</code>についてデフォルトのグローバルキーシーケンス)をタイプすると、Emacsはかわりに<code class="literal">my-kill-line</code>を実行するでしょう。
</p><p>リマップはアクティブなキーマップでのみ行なわれることに注意してください。たとえば、<code class="literal">ctl-x-map</code>のようなプレフィクスキーマップ内にリマッピングを置いても、そのようなキーマップはそれ自体がアクティブでないので、通常は効果がありません。それに加えて、リマップは1レベルを通じてのみ機能します。以下の例では、
</p><pre class="screen">(define-key my-mode-map [remap kill-line] 'my-kill-line)
(define-key my-mode-map [remap my-kill-line] 'my-other-kill-line)
</pre><p>これは<code class="literal">kill-line</code>を<code class="literal">my-other-kill-line</code>にリマップ<span class="emphasis"><em>しません</em></span>。かわりに、通常のキーバインディングが<code class="literal">kill-line</code>を指定する場合は、それが<code class="literal">my-kill-line</code>にリマップされます。通常のバインディングが<code class="literal">my-kill-line</code>を指定した場合は、<code class="literal">my-other-kill-line</code>にリマップされます。
</p><p>コマンドのリマップをアンドゥするには、以下のようにそれを<code class="literal">nil</code>にリマップします：
</p><pre class="screen">(define-key my-mode-map [remap kill-line] nil)
</pre><pre class="synopsis"><a id="idm62602576" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">command-remapping</code> <em class="replaceable"><code>command</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>position</code></em> <em class="replaceable"><code>keymaps</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントアクティブキーマップにより与えられる、<em class="replaceable"><code>command</code></em>(シンボル)にたいするリマッピングをリターンする。<em class="replaceable"><code>command</code></em>がリマップされていない(これは普通の状況である)、またはシンボル以外の場合、この関数は<code class="literal">nil</code>をリターンする。<code class="literal">position</code>は、<code class="literal">key-binding</code>の場合と同様、使用するキーマップを決定するために、オプションバッファー位置、またはイベント位置をオプションで指定できる。
</p><p>オプション引数<code class="literal">keymaps</code>が非<code class="literal">nil</code>の場合、それは検索するキーマップのリストを指定する。この引数は、<code class="literal">position</code>が非<code class="literal">nil</code>の場合は無視される。
</p></blockquote></div></div></body></html>