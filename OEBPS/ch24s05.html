<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Help Functions</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Help-Functions"/>Help Functions</h1></div></div></div><a id="idm63936464" class="indexterm"/><p>Emacsは、さまざまなビルトインのヘルプ関数を提供し、それらはすべてプレフィックス<strong class="userinput"><code>C-h</code></strong>のサブコマンドとして、ユーザーがアクセスできます。それらについての詳細は、section “Help” in <em class="citetitle">The GNU Emacs
Manual</em>を参照してください。ここでは、同様な情報についてプログラムレベルのインターフェイスを説明します。
</p><pre class="synopsis"><a id="idm63934160" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">apropos</code> <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>do-all</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、名前にaproposパターン(apropos pattern: 適切なパターン)
<em class="replaceable"><code>pattern</code></em>を含む、“重要”なすべてのシンボルを探す。マッチに使用されるaproposパターンは単語、最低2つはマッチしなければならないスペース区切りの単語、または(特別な正規表現文字があれば)正規表現のいずれかである。あるシンボルが関数、変数、フェイスとしての定義、あるいはプロパティをもつ場合、そのシンボルは“重要”とされる。
</p><p>関数は、以下のような要素のリストをリターンする:
</p><pre class="screen">(<em class="replaceable"><code>symbol</code></em> <em class="replaceable"><code>score</code></em> <em class="replaceable"><code>function-doc</code></em> <em class="replaceable"><code>variable-doc</code></em>
 <em class="replaceable"><code>plist-doc</code></em> <em class="replaceable"><code>widget-doc</code></em> <em class="replaceable"><code>face-doc</code></em> <em class="replaceable"><code>group-doc</code></em>)
</pre><p>ここで、<em class="replaceable"><code>score</code></em>はマッチの面からそのシンボルがどれだけ重要に見えるかを比較する整数である。残りの各要素は、<em class="replaceable"><code>symbol</code></em>にたいする関数、変数、...等のドキュメント文字列(または<code class="literal">nil</code>)である。
</p><p>これは<code class="filename">*Apropos*</code>という名前のバッファーにもシンボルを表示し、その際各行にはドキュメント文字列の先頭から取得した1行説明とともに表示される。
</p><p><em class="replaceable"><code>do-all</code></em>が非<code class="literal">nil</code>、またはユーザーオプション<code class="literal">apropos-do-all</code>が非<code class="literal">nil</code>の場合、<code class="literal">apropos</code>は見つかった関数のキーバインディングも表示する。これは重要なものだけでなく、のinternされた<span class="emphasis"><em>すべて</em></span>のシンボルも表示する(同様にリターン値としてもそれらをリストする)。
</p></blockquote></div><pre class="synopsis"><a id="idm63899728" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">help-map</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、Helpキー<strong class="userinput"><code>C-h</code></strong>に続く文字にたいするローカルキーマップである。
</p></blockquote></div><pre class="synopsis"><a id="idm63896528" class="indexterm"/><span class="category"><span class="bold"><strong>Prefix Command</strong></span>:</span> <code class="function">help-command</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このシンボルは関数ではなく、関数定義セルには<code class="literal">help-map</code>として知られる、キーマップを保持する。これは、<code class="filename">help.el</code>内で以下のように定義されている:
</p><pre class="screen">(define-key global-map (string help-char) 'help-command)
(fset 'help-command help-map)
</pre></blockquote></div><pre class="synopsis"><a id="idm63892176" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">help-char</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、ヘルプ文字(help character:
Helpを意味する文字としてEmacsが認識する文字)である。デフォルトでは、<strong class="userinput"><code>C-h</code></strong>を意味する8が値である。この文字を読み取った際、<code class="literal">help-form</code>が非<code class="literal">nil</code>のLisp式ならば、Emacsはその式を評価して、結果が文字列の場合はウィンドウ内にそれを表示する。
</p><p>通常、<code class="literal">help-form</code>の値は<code class="literal">nil</code>である。その場合、ヘルプ文字はコマンド入力のレベルにおいて特別な意味を有せず、通常の方法におけるキーシーケンスの一部となる。<strong class="userinput"><code>C-h</code></strong>の標準的なキーバインディングは、複数の汎用目的をもつヘルプ機能のプレフィックスキーである。
</p><p>ヘルプ文字は、プレフィックスキーの後でも特別な意味をもつ。ヘルプ文字がプレフィックスキーのサブコマンドとしてバインディングをもたない場合は、そのプレフィックスキーのすべてのサブコマンドのリストを表示する、<code class="literal">describe-prefix-bindings</code>を実行する。
</p></blockquote></div><pre class="synopsis"><a id="idm63885136" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">help-event-list</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、“ヘルプ文字”の代役を果たすイベント型のリストである。これらのイベントは、<code class="literal">help-char</code>で指定されるイベントと同様に処理される。
</p></blockquote></div><pre class="synopsis"><a id="idm63865552" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">help-form</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>の場合、その値は文字<code class="literal">help-char</code>が読み取られるたびに評価されるフォームである。そのフォームの評価により文字列が生成された場合は、その文字列が表示される。
</p><p><code class="literal">read-event</code>、<code class="literal">read-char-choice</code>、<code class="literal">read-char</code>を呼び出すコマンドは、それが入力を行う間は、恐らく<code class="literal">help-form</code>を非<code class="literal">nil</code>にバインドすべきであろう(<strong class="userinput"><code>C-h</code></strong>が他の意味をもつ場合は、これを行うべきではない)。この式を評価した結果は、何にたいする入力なのか、そしてそれを正しくエンターする方法を説明する文字列であること。
</p><p>ミニバッファーへのエントリーにより、この変数は<code class="literal">minibuffer-help-form</code>の値にバインドされる(<a class="link" href="ch20s14.html#Definition-of-minibuffer_002dhelp_002dform">Definition
of minibuffer-help-form</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm63857104" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">prefix-help-command</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、プレフィックスキーにたいするヘルプをプリントする関数を保持する。その関数は、ユーザーが後にヘルプ文字を伴うプレフィックスキーをタイプし、そのヘルプ文字がプレフィックスの後のバインディングをもたないたときに呼び出される。この変数のデフォルト値は<code class="literal">describe-prefix-bindings</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm63853904" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">describe-prefix-bindings</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、もっとも最近のプレフィックスキーのサブコマンドすべてにたいするリストを表示する。プレフィックスの説明は、そのキーシーケンスの最後のイベントを除くすべてから構成される(最後のイベントは、恐らくヘルプ文字であろう)。
</p></blockquote></div><p>以下の2つの関数は、“electric”モードのように制御を放棄することなくヘルプを提供したいモードを意図しています。これらは、通常のヘルプ関数と区別するため、名前が‘<code class="literal">Helper</code>’で始まります。
</p><pre class="synopsis"><a id="idm63850192" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">Helper-describe-bindings</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、ローカルキーマップとグローバルキーマップの両方のキーバインディングすべてのリストを含むヘルプバッファーを表示するウィンドウをポップアップする。これは<code class="literal">describe-bindings</code>を呼び出すことにより機能する。
</p></blockquote></div><pre class="synopsis"><a id="idm63834576" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">Helper-help</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、カレントモードにたいするヘルプを提供する。これはミニバッファー内でメッセージ‘<code class="literal">Help (Type ? for further
options)</code>’とともにユーザーに入力を求め、その後キーバインディングが何か、何を意図するモードなのかを探すための助けを提供する。これは<code class="literal">nil</code>をリターンする。
</p><a id="idm63830992" class="indexterm"/><p>これは、マップ<code class="literal">Helper-help-map</code>を変更することによりカスタマイズできる。
</p></blockquote></div><pre class="synopsis"><a id="idm63829072" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">data-directory</code></pre><div class="blockquote"><blockquote class="blockquote"><a id="Definition-of-data_002ddirectory"/><p>この変数は、Emacsに付随する特定のドキュメントおよびテキストファイルを探すディレクトリーの名前を保持する。
</p></blockquote></div><pre class="synopsis"><a id="idm63826128" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">help-buffer</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ヘルプバッファーの名前(通常は<code class="filename">*Help*</code>)をリターンする。そのようなバッファーが存在しない場合は、最初にそれを作成する。
</p></blockquote></div><a id="idm63823056" class="indexterm"/><pre class="synopsis"><a id="idm63822032" class="indexterm"/><span class="category"><span class="bold"><strong>Macro</strong></span>:</span> <code class="function">with-help-window</code> <em class="replaceable"><code>buffer-name</code></em> <em class="replaceable"><code>body</code></em><em class="replaceable"><code>…</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このマクロは、<code class="literal">with-output-to-temp-buffer</code>(<a class="link" href="ch38s08.html" title="Temporary Displays">Temporary
Displays</a>を参照)のように<em class="replaceable"><code>body</code></em>を評価して、そのフォームが生成したすべての出力を、<em class="replaceable"><code>buffer-name</code></em>という名前のバッファーに挿入する(<em class="replaceable"><code>buffer-name</code></em>は、通常は関数<code class="literal">help-buffer</code>によりリターンされる値であるべきだろう)。これは、指定されたバッファーをHelpモードに置き、ヘルプウィンドウをquit、およびスクロールする方法を告げるメッセージを表示する。これは、ユーザーオプション<code class="literal">help-window-select</code>のカレント値が適切にセットされていれば、ヘルプウィンドウの選択も行う。これは<em class="replaceable"><code>body</code></em>内の最後の値をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm63814480" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">help-setup-xref</code> <em class="replaceable"><code>item</code></em> <em class="replaceable"><code>interactive-p</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<code class="filename">*Help*</code>バッファー内のクロスリファレンスデータを更新する。このクロスリファレンスは、ユーザーが‘<code class="literal">Back</code>’ボタンまたは‘<code class="literal">Forward</code>’ボタン上でクリックした際に、ヘルプ情報の再生成に使用される。<code class="filename">*Help*</code>バッファーを使用するほとんどのコマンドは、バッファーをクリアーする前に、この関数を呼び出すべきである。<em class="replaceable"><code>item</code></em>引数は、<code class="literal">(<em class="replaceable"><code>function</code></em>
.
<em class="replaceable"><code>args</code></em>)</code>という形式であること。ここで、<em class="replaceable"><code>function</code></em>は引数リスト<em class="replaceable"><code>args</code></em>で呼び出されるヘルプバッファーを再生成する関数である。コマンド呼び出しがinteractiveに行われた場合、<em class="replaceable"><code>interactive-p</code></em>引数は非<code class="literal">nil</code>である。この場合、<code class="filename">*Help*</code>バッファーの‘<code class="literal">Back</code>’ボタンにたいするitemのスタックはクリアーされる。
</p></blockquote></div><p><code class="literal">help-buffer</code>、<code class="literal">with-help-window</code>、<code class="literal">help-setup-xref</code>の使用例は、<a class="link" href="ch24s02.html#describe_002dsymbols-example">describe-symbols
example</a>を参照してください。
</p><pre class="synopsis"><a id="idm63802192" class="indexterm"/><span class="category"><span class="bold"><strong>Macro</strong></span>:</span> <code class="function">make-help-screen</code> <em class="replaceable"><code>fname</code></em> <em class="replaceable"><code>help-line</code></em> <em class="replaceable"><code>help-text</code></em> <em class="replaceable"><code>help-map</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このマクロは、提供するサブコマンドのリストを表示するプレフィックスキーのように振る舞う、<em class="replaceable"><code>fname</code></em>という名前のヘルプコマンドを定義する。
</p><p>呼び出された際、<em class="replaceable"><code>fname</code></em>はウィンドウ内に<em class="replaceable"><code>help-text</code></em>を表示してから、<em class="replaceable"><code>help-map</code></em>に応じてキーシーケンスの読み取りと実行を行う。文字列<em class="replaceable"><code>help-text</code></em>は、<em class="replaceable"><code>help-map</code></em>内で利用可能なバインディングを説明すべきである。
</p><p>コマンド<em class="replaceable"><code>fname</code></em>は、<em class="replaceable"><code>help-text</code></em>の表示をスクロールすることによる、自身のいくつかのイベントを処理するために定義される。<em class="replaceable"><code>fname</code></em>がこれらのスペシャルイベントのいずれかを読み取った際は、スクロールを行った後で他のイベントを読み取る。自身が処理する以外のイベントを読み取り、そのイベントが<em class="replaceable"><code>help-map</code></em>内にバインディングを有す際は、そのキーのバインディングを実行した後リターンする。
</p><p>引数<em class="replaceable"><code>help-line</code></em>は、<em class="replaceable"><code>help-map</code></em>内の候補の1行要約であること。Emacsのカレントバージョンでは、オプション<code class="literal">three-step-help</code>を<code class="literal">t</code>にセットした場合のみ、この引数が使用される。
</p><p>このマクロは、<strong class="userinput"><code>C-h C-h</code></strong>にバインドされるコマンド<code class="literal">help-for-help</code>内で使用される。
</p></blockquote></div><pre class="synopsis"><a id="idm63789520" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">three-step-help</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>の場合、<code class="literal">make-help-screen</code>で定義されたコマンドは、最初にエコーエリア内に自身の<em class="replaceable"><code>help-line</code></em>文字列を表示し、ユーザーが再度ヘルプ文字をタイプした場合のみ、長い<em class="replaceable"><code>help-text</code></em>文字列を表示する。
</p></blockquote></div></div></body></html>