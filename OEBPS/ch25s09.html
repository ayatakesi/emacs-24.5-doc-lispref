<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Contents of Directories</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Contents-of-Directories"/>Contents of Directories</h1></div></div></div><a id="idm66617808" class="indexterm"/><a id="idm66617040" class="indexterm"/><p>ディレクトリーとはファイルの一種で、さまざまな名前のファイルを含んでいます。ディレクトリーは、ファイルシステムの機能です。
</p><p>Emacsはディレクトリー内のファイル名をLispのリストとして一覧したり、シェルコマンド<code class="literal">ls</code>を使用してバッファー内にファイル名を表示することができます。後者の場合、Emacsはオプションで各ファイルに関する情報も表示でき、それは<code class="literal">ls</code>コマンドに渡すオプションに依存します。
</p><pre class="synopsis"><a id="idm66601936" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">directory-files</code> <em class="replaceable"><code>directory</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>full-name</code></em> <em class="replaceable"><code>match-regexp</code></em> <em class="replaceable"><code>nosort</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ディレクトリー<em class="replaceable"><code>directory</code></em>内のファイルの名前のリストをリターンする。デフォルトでは、このリストはアルファベット順である。
</p><p><em class="replaceable"><code>full-name</code></em>が非<code class="literal">nil</code>の場合、この関数はファイルの絶対ファイル名をリターンし、それ以外は指定されたディレクトリーにたいする相対ファイル名をリターンする。
</p><p><em class="replaceable"><code>match-regexp</code></em>が非<code class="literal">nil</code>の場合、この関数はその正規表現にたいするマッチを含むファイル名だけをリターンし、それ以外のファイル名はリストから除外される。大文字小文字を区別するファイルシステムでは、大文字小文字を区別する正規表現マッチングが行われる。
</p><p><em class="replaceable"><code>nosort</code></em>が非<code class="literal">nil</code>の場合、<code class="literal">directory-files</code>はリストをソートしないので、取得するファイル名に特定の順序はない。最大限の可能なスピードを得る必要があり、ファイル処理順を気にしない場合は、この関数を使用する。ユーザーから処理順が可視の場合は、名前をソートすれば、おそらくユーザーはより幸せになるだろう。
</p><pre class="screen">(directory-files "~lewis")
     ⇒ ("#foo#" "#foo.el#" "." ".."
         "dired-mods.el" "files.texi"
         "files.texi.~1~")
</pre><p><em class="replaceable"><code>directory</code></em>が読み取り可能なディレクトリー名でない場合は、エラーがシグナルされる。
</p></blockquote></div><pre class="synopsis"><a id="idm66591440" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">directory-files-and-attributes</code> <em class="replaceable"><code>directory</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>full-name</code></em> <em class="replaceable"><code>match-regexp</code></em> <em class="replaceable"><code>nosort</code></em> <em class="replaceable"><code>id-format</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、どのファイルを報告するか、およびファイル名を報告する方法において、<code class="literal">directory-files</code>と似ている。しかし、この関数はファイル名のリストをリターンするかわりに、各ファイルごとにリスト<code class="literal">(<em class="replaceable"><code>filename</code></em>
.
<em class="replaceable"><code>attributes</code></em>)</code>をリターンする。ここで<em class="replaceable"><code>attributes</code></em>は、そのファイルにたいして<code class="literal">file-attributes</code>がリターンするであろう値である。オプション引数<em class="replaceable"><code>id-format</code></em>は、<code class="literal">file-attributes</code>の対応する引数と同じ意味をもつ(<a class="link" href="ch25s06.html#Definition-of-file_002dattributes">Definition
of file-attributes</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm66582224" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">file-expand-wildcards</code> <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>full</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ワイルドカードパッケージ<em class="replaceable"><code>pattern</code></em>を展開して、それにマッチするファイル名のリストをリターンする。
</p><p>絶対ファイル名として<em class="replaceable"><code>pattern</code></em>が記述された場合は、値も絶対ファイル名になる。
</p><p><em class="replaceable"><code>pattern</code></em>が相対ファイル名で記述されている場合、それはカレントデフォルトディレクトリーにたいして相対的に解釈される。リターンされるファイル名も、通常はカレントデフォルトディレクトリーにたいする相対ファイル名になる。しかし<em class="replaceable"><code>full</code></em>が非<code class="literal">nil</code>の場合は、絶対ファイル名がリターンされる。
</p></blockquote></div><pre class="synopsis"><a id="idm66575568" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert-directory</code> <em class="replaceable"><code>file</code></em> <em class="replaceable"><code>switches</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>wildcard</code></em> <em class="replaceable"><code>full-directory-p</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<code class="literal">ls</code>の<em class="replaceable"><code>switches</code></em>に対応するフォーマットで、(カレントバッファー内に)ディレクトリー<em class="replaceable"><code>file</code></em>のディレクトリーリストを挿入する。これは、挿入したテキストの後にポイントを残す。<em class="replaceable"><code>switches</code></em>にはオプション文字列、または個別のオプションを表す文字列リストを指定できる。
</p><p>引数<em class="replaceable"><code>file</code></em>にはディレクトリー名、またはワイルドカード文字を含むファイル名を指定できる。<em class="replaceable"><code>wildcard</code></em>が非<code class="literal">nil</code>の場合、<em class="replaceable"><code>file</code></em>はワイルドカードを伴うファイル指定として扱われることを意味する。
</p><p><em class="replaceable"><code>full-directory-p</code></em>が非<code class="literal">nil</code>の場合、ディレクトリーリストにたいしてディレクトリーの完全なコンテンツ表示を要求することを意味する。<em class="replaceable"><code>file</code></em>がディレクトリーで、スイッチに‘<code class="literal">-d</code>’が含まれないときは、<code class="literal">t</code>を指定するべきである(<code class="literal">ls</code>へのオプション‘<code class="literal">-d</code>’は、ディレクトリーのコンテンツではなく、ファイルとしてディレクトリーを表示するよう指定する)。
</p><p>ほとんどのシステムでは、この関数は変数<code class="literal">insert-directory-program</code>の名前のディレクトリーリスト用プログラムを実行することにより機能する。<em class="replaceable"><code>wildcard</code></em>が非<code class="literal">nil</code>の場合は、ワイルドカード展開するために、<code class="literal">shell-file-name</code>で指定されるシェルの実行も行う。
</p><p>MS-DOSおよびMS-Windowsシステムは、標準的なUnixプログラム<code class="literal">ls</code>を欠くので、この関数はLispコードで<code class="literal">ls</code>をエミュレートする。
</p><p>技術的な詳細としては、<em class="replaceable"><code>switches</code></em>にロングオプション‘<code class="literal">--dired</code>’が含まれる際に<code class="literal">insert-directory</code>は、diredのためにこれを特別に扱う。しかし他のオプションと同様、通常は等価なショートオプション‘<code class="literal">-D</code>’が単に<code class="literal">insert-directory-program</code>に渡されるだけである。
</p></blockquote></div><pre class="synopsis"><a id="idm66540240" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">insert-directory-program</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、関数<code class="literal">insert-directory</code>用にディレクトリーリストを生成するプログラムである。この値は、Lispコードでリストを生成するシステムでは無視される。
</p></blockquote></div></div></body></html>