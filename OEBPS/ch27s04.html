<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Buffer File Name</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Buffer-File-Name"/>Buffer File Name</h1></div></div></div><a id="idm65676240" class="indexterm"/><a id="idm65675472" class="indexterm"/><a id="idm65674704" class="indexterm"/><p><em class="firstterm">バッファーファイル名(buffer file
name)</em>とは、そのバッファーにvisitされているファイルの名前です。バッファーがファイルをvisiblyしていなければ、バッファーファイル名は<code class="literal">nil</code>です。大抵、バッファー名はバッファーファイル名の非ディレクトリーパートと同じですが、バッファーファイル名とバッファー名は別物であり、個別にセットすることができます。<a class="link" href="ch25.html#Visiting-Files" title="Visiting Files">Visiting
Files</a>を参照してください。
</p><pre class="synopsis"><a id="idm65672016" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">buffer-file-name</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>buffer</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>buffer</code></em>がvisitしているファイルの、絶対ファイル名をリターンする。<em class="replaceable"><code>buffer</code></em>がファイルをvisitしていない場合、<code class="literal">buffer-file-name</code>は<code class="literal">nil</code>をリターンする。<em class="replaceable"><code>buffer</code></em>が与えられない場合のデフォルトは、カレントバッファーになる。
</p><pre class="screen">(buffer-file-name (other-buffer))
     ⇒ "/usr/user/lewis/manual/files.texi"
</pre></blockquote></div><pre class="synopsis"><a id="idm65665744" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">buffer-file-name</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このバッファーローカル変数は、カレントバッファーにvisitされているファイルの名前、ファイルをvisitしていなければ<code class="literal">nil</code>が含まれる。これは永続的なローカル変数であり、<code class="literal">kill-all-local-variables</code>の影響を受けない。
</p><pre class="screen">buffer-file-name
     ⇒ "/usr/user/lewis/manual/buffers.texi"
</pre><p>他のさまざまな事項を変更せずに、この変数を変更するのは危険である。通常は、<code class="literal">set-visited-file-name</code>を使用するほうがよい(以下参照)。バッファー名の変更などのような、そこで行われることのいくつかは、絶対必要という訳ではないが、その他の事項はEmacsが混乱するのを防ぐために必要不可欠である。
</p></blockquote></div><pre class="synopsis"><a id="idm65648336" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">buffer-file-truename</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このバッファーローカル変数は、カレントバッファーにvisitされているファイルの省略された形式の実名(truename)、ファイルをvisitしていない場合は<code class="literal">nil</code>を保持する。これは永続的にローカルであり、<code class="literal">kill-all-local-variables</code>の影響を受けない。See <a class="link" href="ch25s06.html#Truenames" title="Truenames">Truenames</a>、および<a class="link" href="ch25s08.html#abbreviate_002dfile_002dname">abbreviate-file-name</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm65643600" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">buffer-file-number</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このバッファーローカル変数は、カレントバッファーにvisitされているファイルのファイル番号(file number)とデバイス番号(device
number)、ファイルをvisitしていない場合は<code class="literal">nil</code>を保持する。これは永続的にローカルであり、<code class="literal">kill-all-local-variables</code>の影響を受けない。
</p><p>値は通常、<code class="literal">(<em class="replaceable"><code>filenum</code></em>
<em class="replaceable"><code>devnum</code></em>)</code>のような形式のリストである。この番号ペアーは、システム上でアクセス可能なすべてのファイルの中から、ファイルを一意に識別する。より詳細な情報は、<a class="link" href="ch25s06.html#File-Attributes" title="File Attributes">File
Attributes</a>の<code class="literal">file-attributes</code>を参照のこと。
</p><p><code class="literal">buffer-file-name</code>がシンボリックリンク名の場合は、どちらの番号も再帰的なターゲットを参照する。
</p></blockquote></div><pre class="synopsis"><a id="idm65636304" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">get-file-buffer</code> <em class="replaceable"><code>filename</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ファイル<em class="replaceable"><code>filename</code></em>をvisitしているバッファーをリターンする。そのようなバッファーが存在しない場合は、<code class="literal">nil</code>をリターンする。引数<em class="replaceable"><code>filename</code></em>は文字列でなければならず、展開(<a class="link" href="ch25s08.html#File-Name-Expansion" title="Functions that Expand Filenames">File
Name
Expansion</a>を参照)された後、killされていないすべてのバッファーがvisitしているファイル名と比較される。バッファーの<code class="literal">buffer-file-name</code>は、<em class="replaceable"><code>filename</code></em>の展開形と正確にマッチしなければならないことに注意。この関数は、同じファイルにたいする他の名前は、認識しないだろう。
</p><pre class="screen">(get-file-buffer "buffers.texi")
    ⇒ #&lt;buffer buffers.texi&gt;
</pre><p>特殊な状況下では、複数のバッファーが同じファイル名をvisitすることがあり得る。そのような場合、この関数はバッファーリスト内の最初に該当するバッファーをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm65629392" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">find-buffer-visiting</code> <em class="replaceable"><code>filename</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>predicate</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<code class="literal">get-file-buffer</code>と似ているが、そのファイルを<span class="emphasis"><em>違う名前</em></span>でvisitしているかもしれないすべてのバッファーをリターンする。つまり、バッファーの<code class="literal">buffer-file-name</code>は<em class="replaceable"><code>filename</code></em>の展開形式と正確にマッチする必要はなく、同じファイルを参照することだけが要求される。<em class="replaceable"><code>predicate</code></em>が非<code class="literal">nil</code>の場合、それは<em class="replaceable"><code>filename</code></em>をvisitしているバッファーを1つの引数とする関数であること。そのバッファーにたいして、<em class="replaceable"><code>predicate</code></em>が非<code class="literal">nil</code>をリターンした場合のみ、適切なリターン値と判断される。リターンすべき適切なバッファーが見つからない場合、<code class="literal">find-buffer-visiting</code>は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm65620048" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">set-visited-file-name</code> <em class="replaceable"><code>filename</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>no-query</code></em> <em class="replaceable"><code>along-with-file</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>filename</code></em>が非空文字列の場合、この関数はカレントバッファーにvisitされているファイルの名前を、<em class="replaceable"><code>filename</code></em>に変更する(バッファーがファイルをvisitしていない場合は、visitするファイルとして<em class="replaceable"><code>filename</code></em>を与える)。そのバッファーにたいする<span class="emphasis"><em>次回</em></span>の保存では、新たに指定されたファイルに保存されるだろう。
</p><p>このコマンドは、たとえそのバッファーのコンテンツがその前にvisitされていたファイルとマッチしていても、(Emacsが関知するかぎり)<em class="replaceable"><code>filename</code></em>のコンテンツとはマッチしないので、バッファーが変更されている(modified)とマークする。これは、その名前がすでに使用されていなければ、新たなファイル名に対応してバッファーをリネームする。
</p><p><em class="replaceable"><code>filename</code></em>が<code class="literal">nil</code>、または空文字列の場合、それは“visitされているファイルがない”ことを意味する。この場合、<code class="literal">set-visited-file-name</code>はバッファーの変更フラグを変更することなく、そのバッファーがファイルをvisitしていないとマークする。
</p><p>この関数は<em class="replaceable"><code>filename</code></em>をvisitしているバッファーがすでに存在する場合は、通常はユーザーに確認を求める。しかし、<em class="replaceable"><code>no-query</code></em>が非<code class="literal">nil</code>の場合は、この質問を行わない。<em class="replaceable"><code>filename</code></em>をvisitしているバッファーがすでに存在し、かつユーザーが承認、または<em class="replaceable"><code>no-query</code></em>が非<code class="literal">nil</code>の場合、この関数は中に数字が入った‘<code class="literal">&lt;…&gt;</code>’を<em class="replaceable"><code>filename</code></em>に追加して、新たなバッファーの名前を一意にする。
</p><p><em class="replaceable"><code>along-with-file</code></em>が非<code class="literal">nil</code>の場合、それは前にvisitされていたファイルが<em class="replaceable"><code>filename</code></em>にリネームされたと想定することを意味する。この場合、コマンドはバッファーの修正フラグを変更せず、そのバッファーの記録されている最終ファイル変更時刻を<code class="literal">visited-file-modtime</code>が報告する時刻(<a class="link" href="ch27s06.html" title="Buffer Modification Time">Modification
Time</a>を参照)で変更もしない。<em class="replaceable"><code>along-with-file</code></em>が<code class="literal">nil</code>の場合、この関数は<code class="literal">visited-file-modtime</code>が0をリターンした後に、記録済みの最終ファイル変更時刻をクリアーする。
</p><p>関数<code class="literal">set-visited-file-name</code>がinteractiveに呼び出されたときは、ミニバッファー内で<em class="replaceable"><code>filename</code></em>の入力を求める。
</p></blockquote></div><pre class="synopsis"><a id="idm65602512" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">list-buffers-directory</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このバッファーローカル変数は、visitしているファイル名をもたないバッファーにたいして、バッファーリスト中のvisitしているファイル名を表示する場所に表示する文字列を指定する。Diredバッファーは、この変数を使用する。
</p></blockquote></div></div></body></html>