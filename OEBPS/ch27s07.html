<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Read-Only Buffers</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Read-Only-Buffers"/>Read-Only Buffers</h1></div></div></div><a id="idm65472976" class="indexterm"/><a id="idm65472208" class="indexterm"/><p>あるバッファーが<em class="firstterm">読み取り専用(read-only)</em>の場合は、たとえスクロールやナローイングによってファイルのコンテンツのビューを変更しても、そのコンテンツを変更することはできません。
</p><p>読み取り専用バッファーは、2つのタイプの状況において使用されます:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>書き込み保護されたファイルをvisitするバッファーは、通常は読み取り専用になる。
</p><p>ここでの目的は、ユーザーにたいしてそのファイルへの保存を意図したバッファーの編集が無益、または望ましくないかもしれないことを伝えることである。それにも関わらずバッファーのテキストの変更を望むユーザーは、<strong class="userinput"><code>C-x
C-q</code></strong>で読み取り専用フラグをクリアーした後、これを行うことができる。
</p></li><li class="listitem"><p>DiredやRmailのようなモードは、通常の編集コマンドによるコンテンツの変更がおそらく間違いであるようなときに、バッファーを読み取り専用にする。
</p><p>このようなモードのスペシャルコマンドは、<code class="literal">buffer-read-only</code>を(<code class="literal">let</code>により)<code class="literal">nil</code>にバインドしたり、テキストを変更する箇所では<code class="literal">inhibit-read-only</code>を<code class="literal">t</code>にバインドする。
</p></li></ul></div><pre class="synopsis"><a id="idm65464912" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">buffer-read-only</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このバッファーローカル変数は、そのバッファーが読み取り専用かどうかを指定する。この変数が非<code class="literal">nil</code>なら、そのバッファーは読み取り専用である。
</p></blockquote></div><pre class="synopsis"><a id="idm65461712" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">inhibit-read-only</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>の場合、読み取り専用バッファー、およびその実際の値に依存して、一部もしくはすべての読み取り専用文字が変更されている。バッファー内の読み取り専用文字とは、テキストプロパティ<code class="literal">read-only</code>が非<code class="literal">nil</code>の文字である。テキストプロパティについての詳細は、<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>を参照のこと。
</p><p><code class="literal">inhibit-read-only</code>が<code class="literal">t</code>の場合、すべての<code class="literal">read-only</code>文字プロパティは効果がなくなる。<code class="literal">inhibit-read-only</code>がリストの場合、<code class="literal">read-only</code>文字プロパティがリストのメンバーなら効果がなくなる(比較は<code class="literal">eq</code>で行われる)。
</p></blockquote></div><pre class="synopsis"><a id="idm65449552" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">read-only-mode</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>arg</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、バッファーローカルなマイナーモードである、Read
Onlyモードにたいするモードコマンドである。このモードが有効なときは、そのバッファーの<code class="literal">buffer-read-only</code>は非<code class="literal">nil</code>である。無効なときは、そのバッファーの<code class="literal">buffer-read-only</code>は<code class="literal">nil</code>である。呼び出す際の慣習は、他のマイナーモードコマンドの慣習と同じである(<a class="link" href="ch23s03.html#Minor-Mode-Conventions" title="Conventions for Writing Minor Modes">Minor
Mode Conventions</a>を参照)。
</p><p>このマイナーモードは他のマイナーモードとは異なり、主に<code class="literal">buffer-read-only</code>にたいするラッパーの役目を果たし、別個に<code class="literal">read-only-mode</code>変数は存在しない。Read
Onlyモードが無効なときでも、<code class="literal">read-only</code>テキストプロパティが非<code class="literal">nil</code>の文字は読み取り専用のままである。一時的にすべての読み取り専用ステータスを無視するには、上述の<code class="literal">inhibit-read-only</code>をバインドすること。
</p><p>Read
Onlyモードを有効にする際、このモードコマンドはオプション<code class="literal">view-read-only</code>が非<code class="literal">nil</code>なら、Viewモードも有効にする。section “Miscellaneous Buffer Operations” in <em class="citetitle">The GNU Emacs
Manual</em>を参照のこと。Read Onlyモードを無効にする際に、もしもViewモードが有効なら、Viewモードも無効にする。
</p></blockquote></div><pre class="synopsis"><a id="idm65426384" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">barf-if-buffer-read-only</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーが読み取り専用の場合は、<code class="literal">buffer-read-only</code>エラーをシグナルする。カレントバッファーが読み取り専用の場合にエラーをシグナルする他の方法については、<a class="link" href="ch21s02.html#Using-Interactive" title="Using interactive">Using
Interactive</a>を参照のこと。
</p></blockquote></div></div></body></html>