<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>The Buffer List</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Buffer-List"/>The Buffer List</h1></div></div></div><a id="idm65421776" class="indexterm"/><a id="idm65421008" class="indexterm"/><p><em class="firstterm">バッファーリスト(buffer
list)</em>とは、すべての生きた(killされていない)バッファーのリストです。このリスト内のバッファーの順序は主に、それぞれのバッファーがウィンドウに表示されたのがどれほど最近なのかにもとづきます。いくつかの関数、特に<code class="literal">other-buffer</code>はこの順序を使用します。ユーザーに表示されるバッファーリストも、この順序にしたがいます。
</p><p>バッファーを作成すると、それはバッファーリストの最後に追加され
バッファーをkillすることにより、そのリストから削除されます。ウィンドウに表示するためにバッファーが選択されたとき(<a class="link" href="ch28s11.html" title="Switching to a Buffer in a Window">Switching
Buffers</a>を参照)、あるいはバッファーを表示するウィンドウが選択されたとき(<a class="link" href="ch28s08.html" title="Selecting Windows">Selecting
Windows</a>を参照)、そのバッファーは常にこのリストの先頭に移動します。バッファーがバリー(以下の<code class="literal">bury-buffer</code>を参照)されたときは、このリストの最後に移動します。バッファーリストを直接操作するために利用できる、Lispプログラマー向けの関数は存在しません。
</p><p>説明した基本バッファーリスト(fundamental buffer
list)に加えて、Emacsはそれぞれのフレームにたいしてローカルバッファーリスト(local buffer
list)を保守します。ローカルバッファーリストでは、そのフレーム内で表示されていた(または選択されたウィンドウの)バッファーが先頭になります(この順序は、そのフレームのフレームパラメーター<code class="literal">buffer-list</code>に記録される。<a class="link" href="ch29s03.html#Buffer-Parameters" title="Buffer Parameters">Buffer
Parameters</a>を参照されたい)。そのフレームでは表示されていないフレームは後になるよう、並び順は基本バッファーリストに準じます。
</p><pre class="synopsis"><a id="idm65415376" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">buffer-list</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、すべてのバッファーを含むバッファーリストをリターンする(名前がスペースで始まるバッファーも含む)。リストの要素はバッファーの名前ではなく、実際のバッファーである。
</p><p><em class="replaceable"><code>frame</code></em>がフレームの場合は、<em class="replaceable"><code>frame</code></em>のローカルバッファーリストをリターンする。<em class="replaceable"><code>frame</code></em>が<code class="literal">nil</code>、または省略された場合は、基本バッファーリストが使用される。その場合、そのバッファーを表示するフレームがどれかとは無関係に、もっとも最近に表示、または選択されたバッファーの順になる。
</p><pre class="screen">(buffer-list)
     ⇒ (#&lt;buffer buffers.texi&gt;
         #&lt;buffer  *Minibuf-1*&gt; #&lt;buffer buffer.c&gt;
         #&lt;buffer *Help*&gt; #&lt;buffer TAGS&gt;)
</pre><pre class="screen">
</pre><pre class="screen">;; ミニバッファーの名前が
;;   スペースで始まることに注意!
(mapcar (function buffer-name) (buffer-list))
    ⇒ ("buffers.texi" " *Minibuf-1*"
        "buffer.c" "*Help*" "TAGS")
</pre></blockquote></div><p><code class="literal">buffer-list</code>からリターンされるリストは、それ専用に構築されたリストであり、Emacsの内部的なデータ構造ではないし、それを変更してもバッファーの並び順に影響はありません。基本バッファーリスト内のバッファーの並び順を変更したい場合に簡単なのは、以下の方法です:
</p><pre class="screen">(defun reorder-buffer-list (new-list)
  (while new-list
    (bury-buffer (car new-list))
    (setq new-list (cdr new-list))))
</pre><p>この方法により、バッファーを失ったり、有効な生きたバッファー以外の何かを追加する危険を犯さずに、リストに任意の並び順を指定できます。
</p><p>特定のフレームのバッファーリストの並び順や値を変更するには、<code class="literal">modify-frame-parameters</code>でそのフレームの<code class="literal">buffer-list</code>パラメーターをセットしてください(<a class="link" href="ch29s03.html#Parameter-Access" title="Access to Frame Parameters">Parameter
Access</a>を参照)。
</p><pre class="synopsis"><a id="idm65400784" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">other-buffer</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>buffer</code></em> <em class="replaceable"><code>visible-ok</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、バッファーリスト中で<em class="replaceable"><code>buffer</code></em>以外の最初のバッファーをリターンする。これは通常選択されたウィンドウ(フレーム<em class="replaceable"><code>frame</code></em>、または選択されたフレーム。<a class="link" href="ch29s09.html" title="Input Focus">Input
Focus</a>を参照)に、もっとも最近表示された、<em class="replaceable"><code>buffer</code></em>以外のバッファーである。名前がスペースで始まるバッファーは、考慮されない。
</p><p><em class="replaceable"><code>buffer</code></em>が与えられない(または生きたバッファーでない)場合、<code class="literal">other-buffer</code>は選択されたフレームのローカルバッファーリスト内の、最初のバッファーをリターンする(<em class="replaceable"><code>frame</code></em>が非<code class="literal">nil</code>の場合は、<em class="replaceable"><code>frame</code></em>のローカルバッファーリスト内の最初のバッファーをリターンする)。
</p><p><em class="replaceable"><code>frame</code></em>が非<code class="literal">nil</code>の<code class="literal">buffer-predicate</code>パラメーターをもつ場合は、どのバッファーを考慮すべきかを決定するために、<code class="literal">other-buffer</code>はその述語を使用する。これはそれぞれのバッファーごとにその述語を一度呼び出して、値が<code class="literal">nil</code>ならそのバッファーは無視される。<a class="link" href="ch29s03.html#Buffer-Parameters" title="Buffer Parameters">Buffer
Parameters</a>を参照のこと。
</p><p><em class="replaceable"><code>visible-ok</code></em>が<code class="literal">nil</code>ならば、<code class="literal">other-buffer</code>はやむを得ない場合を除き、任意の可視のフレーム上のウィンドウ内で可視のバッファーをリターンすることを避ける。<em class="replaceable"><code>visible-ok</code></em>が非<code class="literal">nil</code>の場合は、バッファーがどこかで表示されているかどうかは問題にしない。
</p><p>適切なバッファーが存在しない場合は、バッファー<code class="filename">*scratch*</code>を(必要なら作成して)リターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm65380816" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">last-buffer</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>buffer</code></em> <em class="replaceable"><code>visible-ok</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame</code></em>のバッファーリスト内から、<em class="replaceable"><code>buffer</code></em>以外の最後のバッファーをリターンする。<em class="replaceable"><code>frame</code></em>が省略、または<code class="literal">nil</code>の場合は、選択されたフレームのバッファーリストを使用する。
</p><p>引数<em class="replaceable"><code>visible-ok</code></em>は、上述した<code class="literal">other-buffer</code>と同様に扱われる。適切なバッファーを見つけられない場合は、バッファー<code class="filename">*scratch*</code>がリターンされる。
</p></blockquote></div><pre class="synopsis"><a id="idm65373008" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">bury-buffer</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>buffer-or-name</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、バッファーリスト内の他のバッファーの並び順を変更することなく、<em class="replaceable"><code>buffer-or-name</code></em>をバッファーリストの最後に置く。つまり、このバッファーは<code class="literal">other-buffer</code>がリターンする候補で、もっとも期待度が低くなる。引数はバッファー自身か、バッファーの名前を指定できる。
</p><p>この関数は、基本バッファーリストと同様に、それぞれのフレームの<code class="literal">buffer-list</code>パラメーターを操作する。したがってバリー(bury:
埋める、隠す)したバッファーは、<code class="literal">(buffer-list
<em class="replaceable"><code>frame</code></em>)</code>および<code class="literal">(buffer-list)</code>の値の最後に置かれるだろう。さらに、そのバッファーが選択されたウィンドウに表示されていれば、そのウィンドウのバッファーリストの最後にバッファーを置くことも行う(<a class="link" href="ch28s15.html" title="Window History">Window
History</a>を参照)。
</p><p><em class="replaceable"><code>buffer-or-name</code></em>が<code class="literal">nil</code>、または省略された場合は、カレントバッファーをバリーすることを意味する。加えて、カレントバッファーが選択されたウィンドウに表示されている場合は、そのウィンドウを削除するか、他のバッファーを表示する。より正確には、選択されたウィンドウが専用(dedicated)のウィンドウ(see <a class="link" href="ch28s16.html" title="Dedicated Windows">Dedicated
Windows</a>)であり、かつそのフレーム上に他のウィンドウが存在する場合、専用ウィンドウは削除される。それがフレーム上で唯一のウィンドウであり、かつそのフレームが端末上で唯一のフレームでない場合、そのフレームは<code class="literal">frame-auto-hide-function</code>で指定される関数を呼び出すことにより、“開放”される(<a class="link" href="ch28s17.html" title="Quitting Windows">Quitting
Windows</a>を参照)。それ以外の場合は、他のバッファーをそのウィンドウ内に表示するために、<code class="literal">switch-to-prev-buffer</code>を呼び出す(<a class="link" href="ch28s15.html" title="Window History">Window
History</a>を参照)。<em class="replaceable"><code>buffer-or-name</code></em>が他のウィンドウで表示されていた場合は、そのまま表示され続ける。
</p><p>あるバッファーにたいして、それを表示するすべてのウィンドウでバッファーを置き換えるには、<code class="literal">replace-buffer-in-windows</code>を使用する。<a class="link" href="ch28s10.html" title="Buffers and Windows">Buffers
and Windows</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm65351504" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">unbury-buffer</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、選択されたフレームのローカルバッファーリストの最後のバッファーに切り替える。より正確には、選択されたウィンドウ内で、<code class="literal">last-buffer</code>(上記参照)がリターンするバッファーを表示するために、関数<code class="literal">switch-to-buffer</code>を呼び出す(<a class="link" href="ch28s11.html" title="Switching to a Buffer in a Window">Switching
Buffers</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm65347152" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">buffer-list-update-hook</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、バッファーリストが変更されたときは、常に実行されるノーマルフックである。(暗黙的に)このフックを実行する関数は<code class="literal">get-buffer-create</code>(<a class="link" href="ch27s09.html" title="Creating Buffers">Creating
Buffers</a>を参照)、<code class="literal">rename-buffer</code>(<a class="link" href="ch27s03.html" title="Buffer Names">Buffer
Names</a>を参照)、<code class="literal">kill-buffer</code>(<a class="link" href="ch27s10.html" title="Killing Buffers">Killing
Buffers</a>を参照)、<code class="literal">bury-buffer</code>(上記参照)、<code class="literal">select-window</code>(<a class="link" href="ch28s08.html" title="Selecting Windows">Selecting
Windows</a>を参照)である。
</p></blockquote></div></div></body></html>