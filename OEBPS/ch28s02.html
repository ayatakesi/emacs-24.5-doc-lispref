<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Windows and Frames</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Windows-and-Frames"/>Windows and Frames</h1></div></div></div><p>ウィンドウはそれぞれ、正確に1つのフレームに属します(<a class="link" href="ch29.html" title="Chapter 28. Frames">Frames</a>を参照)。
</p><pre class="synopsis"><a id="idm69281360" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-frame</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ウィンドウ<em class="replaceable"><code>window</code></em>が属するフレームをリターンする。<em class="replaceable"><code>window</code></em>が<code class="literal">nil</code>の場合のデフォルトは、選択されたウィンドウである。
</p></blockquote></div><pre class="synopsis"><a id="idm69272400" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-list</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>minibuffer</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フレーム<em class="replaceable"><code>frame</code></em>に属する、生きたウィンドウのリストをリターンする。<em class="replaceable"><code>frame</code></em>が省略、または<code class="literal">nil</code>の場合のデフォルトは、選択されたフレームである。
</p><p>オプション引数<em class="replaceable"><code>minibuffer</code></em>は、リターンされるリストにミニバッファーウィンドウを含めるべきかどうかを指定する。<em class="replaceable"><code>minibuffer</code></em>が<code class="literal">t</code>の場合は、ミニバッファーウィンドウが含まれる。<em class="replaceable"><code>minibuffer</code></em>が<code class="literal">nil</code>、または省略された場合は、ミニバッファーウィンドウがアクティブのときだけ含まれる。<em class="replaceable"><code>minibuffer</code></em>が<code class="literal">nil</code>と<code class="literal">t</code>以外の場合、ミニバッファーウィンドウは含まれない。
</p><p>オプション引数<em class="replaceable"><code>window</code></em>が非<code class="literal">nil</code>の場合、それは指定されたフレーム上の生きたウィンドウであること。その場合は、<em class="replaceable"><code>window</code></em>がリターンされるリストの最初の要素になる。<em class="replaceable"><code>window</code></em>が省略、または<code class="literal">nil</code>の場合は、そのフレームの選択されたウィンドウが最初の要素になる。
</p></blockquote></div><a id="idm69247824" class="indexterm"/><a id="idm69247056" class="indexterm"/><p>同一フレーム内のウィンドウは、リーフノード(leaf nodes)が生きたウィンドウであるような、<em class="firstterm">ウィンドウツリー(window
tree)</em>内に組織化されます。ウィンドウツリーの内部ノード(internal
nodes)は生きたウィンドウではありません。これらのウィンドウは、生きたウィンドウ間の関係を組織化するという目的のために存在します。ウィンドウツリーのルートノード(root
node)は、<em class="firstterm">ルートウィンドウ(root
window)</em>と呼ばれます。ルートノードは生きたウィンドウ(そのフレームにウィンドウが1つだけの場合)、または内部ウィンドウのいずれかです。
</p><p>ミニバッファーウィンドウ(<a class="link" href="ch20s11.html" title="Minibuffer Windows">Minibuffer
Windows</a>を参照)は、そのフレームがミニバッファーだけのフレームでない限り、そのフレームのウィンドウツリーの一部にはなりません。にもかかわらず、このセクションのほとんどの関数は、引数としてミニバッファーウィンドウを受け付けます。さらにこのセクションの最後に説明する関数<code class="literal">window-tree</code>は、実際のウィンドウツリーと並列してミニバッファーウィンドウをリストします。
</p><pre class="synopsis"><a id="idm69243216" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">frame-root-window</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame-or-window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame-or-window</code></em>にたいするルートウィンドウをリターンする。引数<em class="replaceable"><code>frame-or-window</code></em>は、ウィンドウかフレームのいずれかであること。これが省略、または<code class="literal">nil</code>の場合のデフォルトは、選択されたフレームである。<em class="replaceable"><code>frame-or-window</code></em>がウィンドウの場合、リターン値はそのウィンドウのフレームのルートウィンドウである。
</p></blockquote></div><a id="idm69238096" class="indexterm"/><a id="idm69237328" class="indexterm"/><a id="idm69236560" class="indexterm"/><p>ウィンドウが分割(split)されているときは、以前は1つだった2つの生きたウィンドウが存在します。これらのうちの一方は、元のウィンドウと同じLispウィンドウオブジェクトとして表され、もう一方は新たに作成されたLispウィンドウオブジェクトとして表されます。これらの生きたウィンドウは両方とも、単一の内部ウィンドウの<em class="firstterm">子ウィンドウ(child
windows)</em>として、ウィンドウツリーのリーフノードになります。もし必要なら、Emacsはこの内部ウィンドウを自動的に作成します。この内部ウィンドウは<em class="firstterm">親ウィンドウ(parent
window)</em>とも呼ばれ、ウィンドウツリー内の適切な位置に配置されます。同じ親を共有するウィンドウセットは、<em class="firstterm">兄弟(sibling)</em>と呼ばれます。
</p><a id="idm69234256" class="indexterm"/><pre class="synopsis"><a id="idm69233232" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-parent</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>window</code></em>の親ウィンドウ(parent
window)をリターンする。<em class="replaceable"><code>window</code></em>が省略、または<code class="literal">nil</code>の場合のデフォルトは、選択されたウィンドウである。<em class="replaceable"><code>window</code></em>が親をもたない(ミニバッファーウィンドウやそのフレームのルートウィンドウ)場合、リターン値は<code class="literal">nil</code>である。
</p></blockquote></div><p>内部ウィンドウはそれぞれ、常に最低でも2つの子ウィンドウをもちます。ウィンドウ削除によりこの数値が1になった場合、Emacsは自動的に内部ウィンドウを削除して、その残った単一の子ウィンドウがウィンドウツリー内のその位置に配置されます。
</p><p>子ウィンドウはそれぞれ生きたウィンドウ、または(次に自身の子ウィンドウをもつであろう)内部ウィンドウのいずれかです。したがって、各内部ウィンドウは、最終的にはその内部ウィンドウの子孫であるような生きたウィンドウにより占有される領域を結合した、特定の矩形<em class="firstterm">スクリーン領域(screen
area)</em>を占有すると考えることができます。
</p><a id="idm69226576" class="indexterm"/><a id="idm69225808" class="indexterm"/><a id="idm69225040" class="indexterm"/><p>内部ウィンドウそれぞれにたいして、近接する子たちのスクリーン領域は、垂直(vertically)または水平(horizontally)のいずれかにより整列されます(両方で整列されることはない)。子ウィンドウが他の子ウィンドウと上下に整列される場合、それらは<em class="firstterm">垂直コンビネーション(vertical
combination)</em>、左右に整列される場合は<em class="firstterm">水平コンビネーション(horizontal
combination)</em>を形成すると表現されます。以下の例で考えてみましょう:
</p><pre class="screen">     ______________________________________
    | ______  ____________________________ |
    ||      || __________________________ ||
    ||      |||                          |||
    ||      |||                          |||
    ||      |||                          |||
    ||      |||____________W4____________|||
    ||      || __________________________ ||
    ||      |||                          |||
    ||      |||                          |||
    ||      |||____________W5____________|||
    ||__W2__||_____________W3_____________ |
    |__________________W1__________________|

</pre><p>このフレームのルートウィンドウは、内部ウィンドウ<em class="replaceable"><code>W1</code></em>です。これの子ウィンドウは、生きたウィンドウ<em class="replaceable"><code>W2</code></em>と内部ウィンドウ<em class="replaceable"><code>W3</code></em>からなる水平コンビネーションを形成します。<em class="replaceable"><code>W3</code></em>の子ウィンドウは、生きたウィンドウ<em class="replaceable"><code>W4</code></em>と<em class="replaceable"><code>W5</code></em>からなる垂直コンビネーションを形成します。したがって、このウィンドウツリー内の生きたウィンドウは<em class="replaceable"><code>W2</code></em>、<em class="replaceable"><code>W4</code></em>、および<em class="replaceable"><code>W5</code></em>です。
</p><p>以下の関数は、内部ウィンドウの子ウィンドウ、および子ウィンドウの兄弟を取得するのに使用できます。
</p><pre class="synopsis"><a id="idm69205840" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-top-child</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、内部ウィンドウ<em class="replaceable"><code>window</code></em>の子ウィンドウが垂直コンビネーションを形成する場合は、<em class="replaceable"><code>window</code></em>の一番上の子ウィンドウをリターンする。他のタイプのウィンドウにたいするリターン値は<code class="literal">nil</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm69196752" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-left-child</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、内部ウィンドウ<em class="replaceable"><code>window</code></em>の子ウィンドウが水平コンビネーションを形成する場合は、<em class="replaceable"><code>window</code></em>の一番左の子ウィンドウをリターンする。他のタイプのウィンドウにたいするリターン値は<code class="literal">nil</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm69191760" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-child</code> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、内部ウィンドウ<em class="replaceable"><code>window</code></em>の最初の子ウィンドウをリターンする。これは、垂直コンビネーションにたいしては一番上、水平コンビネーションにたいしては一番左の子ウィンドウである。<em class="replaceable"><code>window</code></em>が生きたウィンドウの場合、リターン値は<code class="literal">nil</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm69187280" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-combined-p</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em> <em class="replaceable"><code>horizontal</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>window</code></em>が垂直コンビネーションの一部である場合のみ、非<code class="literal">nil</code>をリターンする。<em class="replaceable"><code>window</code></em>が省略、または<code class="literal">nil</code>の場合のデフォルトは、選択されたウィンドウである。
</p><p>オプション引数<em class="replaceable"><code>horizontal</code></em>が非<code class="literal">nil</code>ならば、<em class="replaceable"><code>window</code></em>が水平コンビネーションの一部である場合のみ非<code class="literal">nil</code>をリターンすることを意味する。
</p></blockquote></div><pre class="synopsis"><a id="idm69179344" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-next-sibling</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ウィンドウ<em class="replaceable"><code>window</code></em>の次の兄弟をリターンする。省略または<code class="literal">nil</code>の場合、<em class="replaceable"><code>window</code></em>のデフォルトは選択されたウィンドウになる。<em class="replaceable"><code>window</code></em>が、その親の最後の子の場合、リターン値は<code class="literal">nil</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm69173584" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-prev-sibling</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ウィンドウ<em class="replaceable"><code>window</code></em>の前の兄弟をリターンする。省略または<code class="literal">nil</code>の場合、<em class="replaceable"><code>window</code></em>のデフォルトは選択されたウィンドウになる。<em class="replaceable"><code>window</code></em>が、その親の最初の子の場合、リターン値は<code class="literal">nil</code>である。
</p></blockquote></div><p>関数<code class="literal">window-next-sibling</code>および<code class="literal">window-prev-sibling</code>を、ウィンドウのサイクル順(<a class="link" href="ch28s09.html" title="Cyclic Ordering of Windows">Cyclic
Window
Ordering</a>を参照)において次、または前のウィンドウをリターンする関数<code class="literal">next-window</code>および<code class="literal">previous-window</code>と混同しないでください。
</p><p>任意のフレーム上の最初の生きたウィンドウや、与えられたウィンドウにもっとも近いウィンドウを探すために、以下の関数を使用できます。
</p><pre class="synopsis"><a id="idm69164496" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">frame-first-window</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame-or-window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame-or-window</code></em>により指定されたフレームの、左上隅の生きたウィンドウをリターンする。引数<em class="replaceable"><code>frame-or-window</code></em>では、ウィンドウか生きたフレームを示さなければならず、デフォルトは選択されたフレームである。<em class="replaceable"><code>frame-or-window</code></em>がウィンドウを指定する場合、この関数はそのウィンドウのフレームの最初のウィンドウをリターンする。前の例のフレームが<code class="literal">(frame-first-window)</code>に指定されたとするならば、<em class="replaceable"><code>W2</code></em>がリターンされる。
</p></blockquote></div><a id="idm69155024" class="indexterm"/><pre class="synopsis"><a id="idm69154000" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-in-direction</code> <em class="replaceable"><code>direction</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em> <em class="replaceable"><code>ignore</code></em> <em class="replaceable"><code>sign</code></em> <em class="replaceable"><code>wrap</code></em> <em class="replaceable"><code>mini</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ウィンドウ<em class="replaceable"><code>window</code></em>内の位置<code class="literal">window-point</code>から、方向<em class="replaceable"><code>direction</code></em>にあるもっとも近い生きたウィンドウをリターンする。引数<em class="replaceable"><code>direction</code></em>は<code class="literal">above</code>、<code class="literal">below</code>、<code class="literal">left</code>、<code class="literal">right</code>のいずれかでなければならない。オプション引数<em class="replaceable"><code>window</code></em>は生きたウィンドウを示さなければならず、デフォルトは選択されたウィンドウである。
</p><p>この関数は、パラメーター<code class="literal">no-other-window</code>が非<code class="literal">nil</code>のウィンドウをリターンしない(<a class="link" href="ch28s25.html" title="Window Parameters">Window
Parameters</a>を参照)。もっとも近いウィンドウの<code class="literal">no-other-window</code>パラメーターが非<code class="literal">nil</code>の場合、この関数は指定された方向で<code class="literal">no-other-window</code>パラメーターが<code class="literal">nil</code>の、他のウィンドウを探す。オプション引数<em class="replaceable"><code>ignore</code></em>が非<code class="literal">nil</code>の場合は、たとえ<code class="literal">no-other-window</code>パラメーターが非<code class="literal">nil</code>のウィンドウでも、リターンされ得る。
</p><p>オプション引数<em class="replaceable"><code>sign</code></em>が負の数値の場合、それは参照位置として<code class="literal">window-point</code>のかわりに、<em class="replaceable"><code>window</code></em>の右端、または下端を使用することを意味する。<em class="replaceable"><code>sign</code></em>が正の数値の場合、それは参照位置として<em class="replaceable"><code>window</code></em>の左端、または上端を使用することを意味する。
</p><p>オプション引数<em class="replaceable"><code>wrap</code></em>が非<code class="literal">nil</code>の場合、それはフレームのボーダー(borders:
枠線)を<em class="replaceable"><code>direction</code></em>がラップアラウンド(wrap around:
最後に達したら最初に戻る)することを意味する。たとえば、<em class="replaceable"><code>window</code></em>はフレームの最上にあり、<em class="replaceable"><code>direction</code></em>が<code class="literal">above</code>の場合、フレームにミニバッファーがあればミニバッファーウィンドウ、それ以外はフレーム最下のウィンドウウィンドウリターンする。
</p><p>オプション引数<em class="replaceable"><code>mini</code></em>が<code class="literal">nil</code>の場合、それはミニバッファーがカレントでアクティブな場合のみ、ミニバッファーウィンドウをリターンすることを意味する。<em class="replaceable"><code>mini</code></em>が非<code class="literal">nil</code>ならば、たとえ非アクティブなときでもミニバッファーウィンドウをリターンする。しかし、<em class="replaceable"><code>wrap</code></em>が非<code class="literal">nil</code>の場合は、常に<em class="replaceable"><code>mini</code></em>が<code class="literal">nil</code>であるかのように動作する。
</p><p>適切なウィンドウが見つからない場合、この関数は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><p>以下の関数により、任意のフレームのウィンドウツリー全体を取得できます:
</p><pre class="synopsis"><a id="idm69115216" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-tree</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フレーム<em class="replaceable"><code>frame</code></em>にたいするウィンドウツリーを表すリストをリターンする。<em class="replaceable"><code>frame</code></em>が省略、または<code class="literal">nil</code>の場合のデフォルトは、選択されたフレームである。
</p><p>リターン値は、<code class="literal">(<em class="replaceable"><code>root</code></em>
<em class="replaceable"><code>mini</code></em>)</code>という形式のリストである。ここで<em class="replaceable"><code>root</code></em>はそのフレームのウィンドウツリーのルートウィンドウ、<em class="replaceable"><code>mini</code></em>はそのフレームのミニバッファーウィンドウを表す。
</p><p>ルートウィンドウが生きている場合、<em class="replaceable"><code>root</code></em>はそのウィンドウ自身である。それ以外では、<em class="replaceable"><code>root</code></em>はリスト<code class="literal">(<em class="replaceable"><code>dir</code></em>
<em class="replaceable"><code>edges</code></em> <em class="replaceable"><code>w1</code></em> <em class="replaceable"><code>w2</code></em>
...)</code>である。ここで<em class="replaceable"><code>dir</code></em>は水平コンビネーションなら<code class="literal">nil</code>、垂直コンビネーションなら<code class="literal">t</code>となり、<em class="replaceable"><code>edges</code></em>はそのコンビネーションのサイズと位置を与え、残りの要素は子ウィンドウである。子ウィンドウはそれぞれ、同じようにウィンドウオブジェクト(生きたウィンドウにたいして)、または上記フォーマットと同じ形式のリスト(内部ウィンドウにたいして)かもしれない。<em class="replaceable"><code>edges</code></em>要素は<code class="literal">window-edges</code>がリターンする値のような、リスト<code class="literal">(<em class="replaceable"><code>left</code></em>
<em class="replaceable"><code>top</code></em> <em class="replaceable"><code>right</code></em> <em class="replaceable"><code>bottom</code></em>)</code>である(<a class="link" href="ch28s23.html" title="Coordinates and Windows">Coordinates and Windows</a>を参照)。
</p></blockquote></div></div></body></html>