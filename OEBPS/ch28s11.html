<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Switching to a Buffer in a Window</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Switching-Buffers"/>Switching to a Buffer in a Window</h1></div></div></div><a id="idm68243024" class="indexterm"/><a id="idm68242256" class="indexterm"/><p>このセクションでは、あるウィンドウ内で特定のバッファーにスイッチするための、高レベルな関数について説明します。“バッファーをスイッチする”とは一般的に、(1)そのバッファーをあるウィンドウに表示して、(2)そのウィンドウを選択されたウィンドウとし(かつそのフレームを選択されたフレームとし、(3)そのバッファーウィンドウカレントバッファーにすることを意味します。
</p><p>Lispプログラムがアクセスや変更できるように、バッファーを一時的にカレントにするのにこれらの関数を<span class="emphasis"><em>使用しないでください</em></span>。これらはウィンドウヒストリー(<a class="link" href="ch28s15.html" title="Window History">Window
History</a>を参照)の変更のような副作用をもつので、そのような方法での使用はユーザーを驚かせることになるでしょう。バッファーをLispで変更するためにカレントにしたい場合は<code class="literal">with-current-buffer</code>、<code class="literal">save-current-buffer</code>、<code class="literal">set-buffer</code>を使用します。<a class="link" href="ch27s02.html" title="The Current Buffer">Current
Buffer</a>を参照してください。
</p><pre class="synopsis"><a id="idm68225232" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">switch-to-buffer</code> <em class="replaceable"><code>buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>norecord</code></em> <em class="replaceable"><code>force-same-window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、選択されたウィンドウ内で<em class="replaceable"><code>buffer-or-name</code></em>を表示して、それをカレントバッファーにしようと試みる。これはよくインタラクティブ(<strong class="userinput"><code>C-x
b</code></strong>のバインディングで)に使用され、同様にLispプログラムでも使用される。リターン値はスイッチしたバッファーである。
</p><p><em class="replaceable"><code>buffer-or-name</code></em>が<code class="literal">nil</code>の場合のデフォルトは、<code class="literal">other-buffer</code>によりリターンされるバッファーになる(<a class="link" href="ch27s08.html" title="The Buffer List">Buffer
List</a>を参照)。<em class="replaceable"><code>buffer-or-name</code></em>が既存のバッファーの名前でない文字列の場合、この関数はその名前で新たにバッファーを作成する。新たなバッファーのメジャーモードは、変数<code class="literal">major-mode</code>により決定される(<a class="link" href="ch23s02.html" title="Major Modes">Major
Modes</a>を参照)。
</p><p>通常は、指定されたバッファーはバッファーリスト —
グローバルバッファーリストと選択されたフレームのバッファーリストの両方の先頭に置かれる(<a class="link" href="ch27s08.html" title="The Buffer List">Buffer
List</a>を参照)。しかし、オプション引数<em class="replaceable"><code>norecord</code></em>が非<code class="literal">nil</code>なら、これは行われない。
</p><p><code class="literal">switch-to-buffer</code>が、選択されたウィンドウ内にバッファーを表示するのが不可能なことが時折ある。これは、選択されたウィンドウがミニバッファーウィンドウの場合や、選択されたウィンドウがそのバッファーにたいして特に専用(strongly
dedicated)な場合に発生する(<a class="link" href="ch28s16.html" title="Dedicated Windows">Dedicated
Windows</a>を参照)。この場合、このコマンドは<code class="literal">pop-to-buffer</code>(以下参照)を呼び出すことにより、通常は何か他のウィンドウにそのバッファーの表示を試みる。しかし、オプション引数が非<code class="literal">nil</code>なら、かわりにエラーをシグナルする。
</p></blockquote></div><p>デフォルトでは、<code class="literal">switch-to-buffer</code>はバッファーの<code class="literal">point</code>位置でバッファーを表示します。この振る舞いは、以下のオプションを使用して調整できます。
</p><pre class="synopsis"><a id="idm68210768" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">switch-to-buffer-preserve-window-point</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が<code class="literal">nil</code>の場合、<code class="literal">switch-to-buffer</code>は<em class="replaceable"><code>buffer-or-name</code></em>により指定されたバッファーを、そのバッファーの<code class="literal">point</code>位置で表示する。この変数が<code class="literal">already-displayed</code>なら、そのバッファーが任意の可視またはアイコン化されたフレーム上の他のウィンドウで表示されている場合は、選択されたウィンドウ内の以前の位置でのバッファーの表示を試みる。この変数が<code class="literal">t</code>なら、<code class="literal">switch-to-buffer</code>は選択されたウィンドウ内の以前の位置でそのバッファーを表示しようと試みる。
</p><p>この変数は、バッファーがすでに選択されたウィンドウに表示されているか、これまで表示されたことがない、またはバッファーを表示するために<code class="literal">switch-to-buffer</code>が<code class="literal">pop-to-buffer</code>を呼び出した場合は無視される。
</p></blockquote></div><p>以下の2つのコマンドは、説明している機能以外は<code class="literal">switch-to-buffer</code>と類似しています。
</p><pre class="synopsis"><a id="idm68202192" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">switch-to-buffer-other-window</code> <em class="replaceable"><code>buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>norecord</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>buffer-or-name</code></em>で指定されたバッファーを、選択されたウィンドウ以外の、別のウィンドウに表示する。これは関数<code class="literal">pop-to-buffer</code>(以下参照)を内部で使用する。
</p><p>選択されたウィンドウが指定されたバッファーをすでに表示している場合は表示を続けるが、見つかった他のウィンドウも同様にそのバッファーを表示する。
</p><p>引数<em class="replaceable"><code>buffer-or-name</code></em>と<em class="replaceable"><code>norecord</code></em>は、<code class="literal">switch-to-buffer</code>の場合と同じ意味をもつ。
</p></blockquote></div><pre class="synopsis"><a id="idm68195280" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">switch-to-buffer-other-frame</code> <em class="replaceable"><code>buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>norecord</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>buffer-or-name</code></em>で指定されたバッファーを、新たなフレームに表示する。これは関数<code class="literal">pop-to-buffer</code>(以下参照)を内部で使用する。
</p><p>指定されたバッファーがすでにカレント端末上の任意のフレームの他のウィンドウに表示されている場合、これはフレームを新たに作成せずにそのウィンドウに切り替える。しかし、これを行うために選択されたウィンドウを使用することは決してない。
</p><p>引数<em class="replaceable"><code>buffer-or-name</code></em>と<em class="replaceable"><code>norecord</code></em>は、<code class="literal">switch-to-buffer</code>の場合と同じ意味をもつ。
</p></blockquote></div><p>上述したコマンドは、任意のウィンドウにバッファーを柔軟に表示して、編集用にそのウィンドウを選択する関数<code class="literal">pop-to-buffer</code>を使用しています。次に、<code class="literal">pop-to-buffer</code>はバッファーの表示に<code class="literal">display-buffer</code>を使用します。したがって、<code class="literal">display-buffer</code>に影響する変数も、同様に影響します。<code class="literal">display-buffer</code>のドキュメントについては、<a class="link" href="ch28s12.html" title="Choosing a Window for Display">Choosing
Window</a>を参照してください。
</p><pre class="synopsis"><a id="idm68184912" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">pop-to-buffer</code> <em class="replaceable"><code>buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>action</code></em> <em class="replaceable"><code>norecord</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>buffer-or-name</code></em>をカレントバッファーにして、なるべく前に選択されていたウィンドウではないウィンドウにそれを表示する。そしてその後に、表示しているウィンドウを選択する。そのウィンドウが別のグラフィカルなフレーム上にある場合は、可能ならそのフレームが入力フォーカスを与えられる(<a class="link" href="ch29s09.html" title="Input Focus">Input
Focus</a>を参照)。リターン値は、切り替えたバッファーである。
</p><p><em class="replaceable"><code>buffer-or-name</code></em>が<code class="literal">nil</code>の場合のデフォルトは、<code class="literal">other-buffer</code>によりリターンされるバッファーになる(<a class="link" href="ch27s08.html" title="The Buffer List">Buffer
List</a>を参照)。<em class="replaceable"><code>buffer-or-name</code></em>が既存のバッファーの名前でない文字列の場合、この関数はその名前で新たにバッファーを作成する。新たなバッファーのメジャーモードは、変数<code class="literal">major-mode</code>により決定される(<a class="link" href="ch23s02.html" title="Major Modes">Major
Modes</a>を参照)。
</p><p><em class="replaceable"><code>action</code></em>が非<code class="literal">nil</code>の場合、それは<code class="literal">display-buffer</code>に渡すディスプレイアクション(display
action)であること(<a class="link" href="ch28s12.html" title="Choosing a Window for Display">Choosing
Window</a>を参照)。非<code class="literal">nil</code>、非リスト値の場合は、たとえそのバッファーがすでに選択されたウィンドウに表示されていたとしても、選択されたウィンドウではなく、ウィンドウをポップ(pop)することを意味する。
</p><p><code class="literal">switch-to-buffer</code>と同様、<em class="replaceable"><code>norecord</code></em>が<code class="literal">nil</code>なら、この関数はバッファーリストを更新する。
</p></blockquote></div></div></body></html>