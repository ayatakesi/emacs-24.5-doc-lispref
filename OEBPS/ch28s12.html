<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Choosing a Window for Display</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Choosing-Window"/>Choosing a Window for Display</h1></div></div></div><p>コマンド<code class="literal">display-buffer</code>は、表示のために柔軟にウィンドウを選択して、そのウィンドウ内に指定されたバッファーを表示します。これは、キーバインディング<strong class="userinput"><code>C-x
4
C-o</code></strong>を通じて、インタラクティブに呼び出すことができます。また、<code class="literal">switch-to-buffer</code>や<code class="literal">pop-to-buffer</code>を含む、多くの関数およびコマンドにより、サブルーチンとしても使用されます(<a class="link" href="ch28s11.html" title="Switching to a Buffer in a Window">Switching
Buffers</a>を参照)。
</p><a id="idm68168016" class="indexterm"/><a id="idm68167248" class="indexterm"/><a id="idm68162000" class="indexterm"/><p>このコマンドは、ウィンドウ内に表示するウィンドウを探すために、いくつかの複雑なステップを実行します。これらのステップは<em class="firstterm">ディスプレイアクション(display
actions)</em>を用いて記述されます。ディスプレイアクションは、<code class="literal">(<em class="replaceable"><code>function</code></em>
.
<em class="replaceable"><code>alist</code></em>)</code>という形式をもちます。ここで、<em class="replaceable"><code>function</code></em>は関数、または関数リストで、わたしたちはこれを<em class="firstterm">アクション関数(action
functions)</em>として参照します。<em class="replaceable"><code>alist</code></em>は連想リスト(association
list)で、わたしたちはこれを<em class="firstterm">アクションalist(action alists)</em>として参照します。
</p><p>アクション関数は、表示するバッファーと、アクションalistという、2つの引数を受け取ります。これは、自身の条件にしたがってウィンドウウィンドウ選択、または作成して、バッファーをウィンドウ内に表示します。成功した場合はそのウィンドウ、それ以外は<code class="literal">nil</code>をリターンします。事前定義されたアクション関数については、<a class="link" href="ch28s13.html" title="Action Functions for display-buffer">Display
Action Functions</a>を参照してください。
</p><p><code class="literal">display-buffer</code>は、複数ソースからのディスプレイアクションを組み合わせて、アクション関数のいずれか1つがバッファーの表示を管理して非<code class="literal">nil</code>値をリターンするまで、アクション関数を順に呼び出します。
</p><pre class="synopsis"><a id="idm68154320" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">display-buffer</code> <em class="replaceable"><code>buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>action</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、ウィンドウウィンドウ選択したり、そのバッファーをカレントにすることなく、<em class="replaceable"><code>buffer-or-name</code></em>をウィンドウに表示させる。引数<em class="replaceable"><code>buffer-or-name</code></em>はバッファー、または既存のバッファーの名前でなければならない。リターン値は、そのバッファーを表示するために選ばれたウィンドウである。
</p><p>オプション引数<em class="replaceable"><code>action</code></em>が非<code class="literal">nil</code>の場合、それは通常はディスプレイアクション(上述)であること。<code class="literal">display-buffer</code>は、以下のソース(記載順)からディスプレイアクションを集約して、アクション関数リストとアクションalistを構築する:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>変数<code class="literal">display-buffer-overriding-action</code>。
</p></li><li class="listitem"><p>ユーザーオプション<code class="literal">display-buffer-alist</code>。
</p></li><li class="listitem"><p><em class="replaceable"><code>action</code></em>引数。
</p></li><li class="listitem"><p>ユーザーオプション<code class="literal">display-buffer-base-action</code>。
</p></li><li class="listitem"><p>定数<code class="literal">display-buffer-fallback-action</code>。
</p></li></ul></div><p>各アクション関数は、いずれかが非<code class="literal">nil</code>をリターンするまで、第1引数にバッファー、第2引数に組み合わせられたアクションalistで、順番に呼び出される。呼び出し側は、ウィンドウ内にバッファーを表示しない場合を処理する用意があることを示すために、アクションalistの要素として<code class="literal">(allow-no-window
. t)</code>を渡すことができる。
</p><p>引数<em class="replaceable"><code>action</code></em>には非<code class="literal">nil</code>の非list値も指定できる。これは、たとえ選択されたウィンドウがすでにそのバッファーを表示していても、選択されたウィンドウではない別のウィンドウにバッファーが表示されるべきだという、特別な意味をもつ。プレフィックス引数とともにインタラクティブに呼び出された場合、<em class="replaceable"><code>action</code></em>は<code class="literal">t</code>である。
</p><p>オプション引数<em class="replaceable"><code>frame</code></em>が非<code class="literal">nil</code>の場合は、そのバッファーがすでに表示されているか判断する際、どのフレームをチェックするかを指定する。これは<em class="replaceable"><code>action</code></em>のアクションalistに、要素<code class="literal">(reusable-frames
. <em class="replaceable"><code>frame</code></em>)</code>を追加するのと等価である。<a class="link" href="ch28s13.html" title="Action Functions for display-buffer">Display Action Functions</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm68135760" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">display-buffer-overriding-action</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、<code class="literal">display-buffer</code>により最高の優先順で扱われるディスプレイアクションであること。デフォルト値は空(つまり<code class="literal">(nil
. nil)</code>)である。
</p></blockquote></div><pre class="synopsis"><a id="idm68115536" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">display-buffer-alist</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションの値は、ディスプレイアクションにコンディション(condition:
状態)をマップするalistである。コンディションはそれぞれ、バッファー名にマッチする正規表現か、2つの引数をとる関数で、引数はバッファー名と<code class="literal">display-buffer</code>に渡す<em class="replaceable"><code>action</code></em>引数である。<code class="literal">display-buffer</code>に渡されたバッファー名がこのalist内の正規表現にマッチするか、コンディションで指定された関数が非<code class="literal">nil</code>をリターンした場合、<code class="literal">display-buffer</code>はバッファーを表示すために、対応するディスプレイアクションを使用する。
</p></blockquote></div><pre class="synopsis"><a id="idm68110416" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">display-buffer-base-action</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションの値は、ディスプレイアクションであること。このオプションは、<code class="literal">display-buffer</code>呼び出しにたいする、“標準”のディスプレイアクションを定義するために使用できる。
</p></blockquote></div><pre class="synopsis"><a id="idm68107216" class="indexterm"/><span class="category"><span class="bold"><strong>Constant</strong></span>:</span> <code class="varname">display-buffer-fallback-action</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このディスプレイアクションは、<code class="literal">display-buffer</code>にたいして、他のディスプレイアクションが与えられなかった場合の代替え処理を指定する。
</p></blockquote></div></div></body></html>