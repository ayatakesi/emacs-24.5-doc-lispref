<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Quitting Windows</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Quitting-Windows"/>Quitting Windows</h1></div></div></div><p>バッファーを表示するために使用しているウィンドウを削除したいときは、フレームからそのウィンドウを削除するために、<code class="literal">delete-window</code>や<code class="literal">delete-windows-on</code>を呼び出すことができます(<a class="link" href="ch28s06.html" title="Deleting Windows">Deleting
Windows</a>を参照)。その、が別フレームで表示されているときは、かわりに<code class="literal">delete-frame</code>を呼び出したいと思うかもしれません(<a class="link" href="ch29s06.html" title="Deleting Frames">Deleting
Frames</a>を参照)。一方で、そのバッファーを表示するためにウィンドウが再利用されている場合は、関数<code class="literal">switch-to-prev-buffer</code>を呼び出して、前に表示されていたバッファーを表示したいと思うかもしれません(<a class="link" href="ch28s15.html" title="Window History">Window
History</a>を参照)。最終的には、そのウィンドウのバッファーをバリー(<a class="link" href="ch27s08.html" title="The Buffer List">Buffer
List</a>を参照)、またはkill(<a class="link" href="ch27s10.html" title="Killing Buffers">Killing Buffers</a>を参照)したいと思うかもしれません。
</p><p>以下のコマンドは、ウィンドウがバッファーを表示する方法を最初に入手する情報を使用して、上述した説明の自動化を試みます。
</p><pre class="synopsis"><a id="idm67770448" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">quit-window</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>kill</code></em> <em class="replaceable"><code>window</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、<em class="replaceable"><code>window</code></em>をquitして、そのバッファーをバリーする。引数<em class="replaceable"><code>window</code></em>は生きたウィンドウでなければならず、デフォルトは選択されたウィンドウである。プレフィックス引数<em class="replaceable"><code>kill</code></em>が非<code class="literal">nil</code>なら、バッファーをバリーするかわりにkillする。これは、ウィンドウとそのバッファーを処理するために、次に説明する関数<code class="literal">quit-restore-window</code>を呼び出す。
</p></blockquote></div><pre class="synopsis"><a id="idm67764304" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">quit-restore-window</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em> <em class="replaceable"><code>bury-or-kill</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>window</code></em>にたいして、そのバッファーが表示される前に存在した状態へのリストアを試みる。オプション引数<em class="replaceable"><code>window</code></em>は生きたウィンドウでなければならず、デフォルトは選択されたウィンドウである。
</p><p><em class="replaceable"><code>window</code></em>がそのバッファーを表示するために特別に作成されたバッファーの場合、この関数はそのフレームに他に少なくとも1つの生きたウィンドウがなければ、<em class="replaceable"><code>window</code></em>を削除しない。<em class="replaceable"><code>window</code></em>がそのフレームで唯一のウィンドウであり、かつそのフレームの端末上に他のフレームが存在する場合、オプション引数<em class="replaceable"><code>bury-or-kill</code></em>がそのウィンドウをどうするかを決定する。If
equals
<code class="literal">kill</code>の場合は、無条件でフレームは削除される。それ以外では、フレームの運命はそのフレームを単一の引数とする<code class="literal">frame-auto-hide-function</code>(以下参照)呼び出しにより決定される。
</p><p>特別に作成されたウィンドウでない場合、この関数は<em class="replaceable"><code>window</code></em>内で前に表示されていたバッファーの再表示を試みる。これは、前に表示されていたバッファーのウィンドウのスタート位置(<a class="link" href="ch28s19.html" title="The Window Start and End Positions">Window
Start and End</a>を参照)とポイント位置(<a class="link" href="ch28s18.html" title="Windows and Point">Window
Point</a>を参照)のリストアも試みる。加えて、<em class="replaceable"><code>window</code></em>のバッファーが過去に一時的にリサイズされていた場合、この関数は<em class="replaceable"><code>window</code></em>の元の高さのリストアも試みる。
</p><p>これまで説明したケースでは、<em class="replaceable"><code>window</code></em>内で表示されているバッファーは、依然としてそのウィンドウにたいする最後のバッファー表示関数で表示されたバッファーである。その時点で他のバッファーが表示されている、または前に表示されていたバッファーがもはや存在しない場合、この関数はかわりに何か他のバッファーを表示するために、<code class="literal">switch-to-prev-buffer</code>(<a class="link" href="ch28s15.html" title="Window History">Window
History</a>を参照)を呼び出す。
</p><p>オプション引数<em class="replaceable"><code>bury-or-kill</code></em>は、<em class="replaceable"><code>window</code></em>を処理する方法を指定し、以下の値を処理する。
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nil</code>
</span></dt><dd><p>これは、バッファーを特別な方法で処理しないことを意味する。結果、<em class="replaceable"><code>window</code></em>が削除されない場合は、<code class="literal">switch-to-prev-buffer</code>の呼び出しにより、通常はそのバッファーが再び表示されるだろう。
</p></dd><dt><span class="term"><code class="literal">append</code>
</span></dt><dd><p>これは、<em class="replaceable"><code>window</code></em>が削除されない場合、そのバッファーを<em class="replaceable"><code>window</code></em>の前のバッファーリストの最後に移動するので、将来の<code class="literal">switch-to-prev-buffer</code>呼び出しでこのバッファーには切り替わることは少なくなる。これは、そのバッファーをフレームのバッファーリストの最後への移動も行う。
</p></dd><dt><span class="term"><code class="literal">bury</code>
</span></dt><dd><p>これは、<em class="replaceable"><code>window</code></em>が削除されない場合、そのバッファーを<em class="replaceable"><code>window</code></em>の前のバッファーリストから削除する。これは、そのバッファーをフレームのバッファーリストの最後への移動も行う。この値は、バッファーをkillすることなく<code class="literal">switch-to-prev-buffer</code>がこのバッファーに再び切り替えさせないようにする、もっとも信頼できる解決手段を提供する。
</p></dd><dt><span class="term"><code class="literal">kill</code>
</span></dt><dd><p>これは、<em class="replaceable"><code>window</code></em>のバッファーをkillすることを意味する。
</p></dd></dl></div><p><code class="literal">quit-restore-window</code>は、<em class="replaceable"><code>window</code></em>の<code class="literal">quit-restore</code>ウィンドウパラメーター(<a class="link" href="ch28s25.html" title="Window Parameters">Window
Parameters</a>を参照)の情報にもとづき判定を行い、処理後にそれを<code class="literal">nil</code>にリセットしている。
</p></blockquote></div><p>以下のオプションは、quitすべきウィンドウ、あるいはバリーすべきバッファーをもつウィンドウを1つだけ含むフレームを処理する方法を指定します。
</p><pre class="synopsis"><a id="idm67710288" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">frame-auto-hide-function</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションで指定された関数は、自動的にフレームを隠すために呼び出される。この関数は、フレームを唯一の引数として呼び出される。
</p><p>ここで指定される関数は、選択されたウィンドウが専用(dedicated)で、かつバリーされるバッファーを表示しているときに、<code class="literal">bury-buffer</code>(<a class="link" href="ch27s08.html" title="The Buffer List">Buffer
List</a>を参照)から呼び出される。また、quitされるウィンドウのフレームが、そのウィンドウのバッファーを表示するために特別に作成されたフレームで、かつそのバッファーがkillされないときにも、<code class="literal">quit-restore-window</code>(上記)から呼び出される。
</p><p>デフォルトでは、<code class="literal">iconify-frame</code>(<a class="link" href="ch29s10.html" title="Visibility of Frames">Visibility of
Frames</a>を参照)を呼び出す。かわりに、フレームをディスプレイから削除する<code class="literal">delete-frame</code>(<a class="link" href="ch29s06.html" title="Deleting Frames">Deleting
Frames</a>を参照)、フレームを変更せずに残す<code class="literal">ignore</code>、またはフレームを唯一の引数とする任意の関数のいずれかを指定できる。
</p><p>このオプションで指定された関数は、指定されたフレームが生きたウィンドウただ1つを含み、かつ同一端末上に少なくとも1つ他のフレームが存在する場合のみ呼び出されることに注意。
</p></blockquote></div></div></body></html>