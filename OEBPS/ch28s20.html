<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Textual Scrolling</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Textual-Scrolling"/>Textual Scrolling</h1></div></div></div><a id="idm67569104" class="indexterm"/><a id="idm67568336" class="indexterm"/><p><em class="firstterm">テキスト的なスクロール(textual
scrolling)</em>とは、ウィンドウ内のテキストを上や下に移動することを意味します。これは、そのウィンドウのdisplay-startを変更することにより機能します。これは、ポイントを画面上に維持するために、<code class="literal">window-point</code>の値も変更するかもしれません(<a class="link" href="ch28s18.html" title="Windows and Point">Window
Point</a>を参照)。
</p><p>テキスト的なスクロールの基本的な関数は、(前方にスクロールする)<code class="literal">scroll-up</code>と、(後方にスクロールする)<code class="literal">scroll-down</code>です。これらの関数の名前における“up”と“down”は、バッファーテキストのそのウィンドウにたいする相対的な移動方向を示します。そのテキストが長いロール紙に記述されていて、スクロールコマンドはその上を上下に移動すると想像してみてください。つまり、バッファーの中央に注目している場合、繰り返して<code class="literal">scroll-down</code>を呼び出すと、最終的にはバッファーの先頭を目にすることになるでしょう。
</p><p>残念なことに、これは時折混乱を招きます。なぜなら、ある人はこれを逆の慣習にもとづいて考える傾向があるからです。彼らは、テキストがその場所に留まりウィンドウが移動して、“down”コマンドによりバッファー終端に移動するだろうと想像します。この慣習は、そのようなコマンドが現代風のキーボード上の<span class="keycap"><strong>PageDown</strong></span>という名前のキーにバインドされているという事実と一致しています。
</p><p>選択されたウィンドウ内で表示されているバッファーがカレントバッファーでない場合、(<code class="literal">scroll-other-window</code>以外の)テキスト的スクロール関数の結果は予測できません。<a class="link" href="ch27s02.html" title="The Current Buffer">Current
Buffer</a>を参照してください。
</p><p>(たとえば大きなイメージがある等で)ウィンドウにウィンドウの高さより高い行が含まれる場合、スクロール関数は部分的に可視な行をスクロールするために、そのウィンドウの垂直スクロール位置を調整します。Lisp呼び出し側は、変数<code class="literal">auto-window-vscroll</code>を<code class="literal">nil</code>にバインドすることにより、この機能を無効にできます(<a class="link" href="ch28s21.html" title="Vertical Fractional Scrolling">Vertical
Scrolling</a>を参照)。
</p><pre class="synopsis"><a id="idm67559376" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">scroll-up</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、選択されたウィンドウ内で<em class="replaceable"><code>count</code></em>行前方にスクロールする。
</p><p><em class="replaceable"><code>count</code></em>負の場合は、かわりに後方へスクロールする。<em class="replaceable"><code>count</code></em>が<code class="literal">nil</code>(または省略)の場合、スクロールされる距離は、そのウィンドウのテキストエリアの高さより小さい<code class="literal">next-screen-context-lines</code>となる。
</p><p>選択されたウィンドウがそれ以上スクロールできない場合、この関数はエラーをシグナルし、それ以外は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm67552464" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">scroll-down</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、選択されたウィンドウ内で<em class="replaceable"><code>count</code></em>行後方にスクロールする。
</p><p><em class="replaceable"><code>count</code></em>負の場合は、かわりに後方へスクロールする。それ以外の点では、これは<code class="literal">scroll-up</code>が行うのと同様に振る舞う。
</p></blockquote></div><pre class="synopsis"><a id="idm67547344" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">scroll-up-command</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<code class="literal">scroll-up</code>と同様に振る舞うが、選択されたウィンドウがそれ以上スクロールできず、かつ変数<code class="literal">scroll-error-top-bottom</code>の値が<code class="literal">t</code>の場合は、かわりにそのバッファーの終端への移動を試みる。ポイントがすでに終端にある場合は、エラーをシグナルする。
</p></blockquote></div><pre class="synopsis"><a id="idm67542096" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">scroll-down-command</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<code class="literal">scroll-down</code>と同様に振る舞うが、選択されたウィンドウがそれ以上スクロールできず、かつ変数<code class="literal">scroll-error-top-bottom</code>の値が<code class="literal">t</code>の場合は、かわりにそのバッファーの先頭への移動を試みる。ポイントがすでに先頭にある場合は、エラーをシグナルする。
</p></blockquote></div><pre class="synopsis"><a id="idm67536848" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">scroll-other-window</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、他のウィンドウ内のテキストを上方に<em class="replaceable"><code>count</code></em>行スクロールする。<em class="replaceable"><code>count</code></em>が負、または<code class="literal">nil</code>の場合は、<code class="literal">scroll-up</code>のように処理される。
</p><p>変数<code class="literal">other-window-scroll-buffer</code>にバッファーをセットすることにより、どのバッファーをスクロールするかを指定できる。そのバッファーが表示されていない場合、<code class="literal">scroll-other-window</code>はそれを何らかのウィンドウに表示する、
</p><p>選択されたウィンドウがミニバッファーのとき、次ウィンドウは通常はそのウィンドウの直上最左のウィンドウである。変数<code class="literal">minibuffer-scroll-window</code>をセットすることにより、スクロールする別のウィンドウを指定できる。この変数は、ミニバッファー以外のウィンドウが選択されているときは効果がない。これが非<code class="literal">nil</code>で、かつミニバッファーが選択されているとき、これは<code class="literal">other-window-scroll-buffer</code>より優先される。<a class="link" href="ch20s14.html#Definition-of-minibuffer_002dscroll_002dwindow">Definition
of minibuffer-scroll-window</a>を参照のこと。
</p><p>ミニバッファーがアクティブのとき、選択されたウィンドウが下端右角のウィンドウなら、ミニバッファーが次ウィンドウになる。この場合、<code class="literal">scroll-other-window</code>はミニバッファーのスクロールを試みる。ミニバッファーに含まれるのが1行だけの場合はどこにもスクロールできないので、エコーエリアに瞬時メッセージ‘<code class="literal">End
of buffer</code>’を表示後、その行を再表示する。
</p></blockquote></div><pre class="synopsis"><a id="idm67513936" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">other-window-scroll-buffer</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>なら、それは<code class="literal">scroll-other-window</code>がどのバッファーのウィンドウをスクロールするかを指定する。
</p></blockquote></div><pre class="synopsis"><a id="idm67510224" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-margin</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションは、スクロールマージン(ポイントとウィンドウの上端/下端との最小行数)のサイズを指定する。ポイントがウィンドウの上端/下端からその行数になったとき、再表示は(可能なら)ポイントをそのマージン外、ウィンドウの中央付近に移動するために、テキストを自動的にスクロールする。
</p></blockquote></div><pre class="synopsis"><a id="idm67507536" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-conservatively</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、ポイントがスクリーン外(またはスクロールマージン内)に移動したとき、スクロールを自動的に行う方法を指定する。値が正の整数<em class="replaceable"><code>n</code></em>の場合、再表示はそれが正しい表示範囲内にポイントを戻すなら、いずれかの方向に<em class="replaceable"><code>n</code></em>行以下のテキストをスクロールする。この振る舞いは、<em class="firstterm">保守的なスクロール(conservative
scrolling)</em>と呼ばれる。それ以外の場合、スクロールは<code class="literal">scroll-up-aggressively</code>や<code class="literal">scroll-down-aggressively</code>のような他の変数の制御の下、通常の方法で発生する。
</p><p>デフォルトの値は0で、これは保守的スクロールが発生し得ないことを意味する。
</p></blockquote></div><pre class="synopsis"><a id="idm67502160" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-down-aggressively</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、<code class="literal">nil</code>か、0から1までの小数<em class="replaceable"><code>f</code></em>であること。これが小数なら、スクリーン上でポイントが置かれたとき、下にスクロールする場所を指定する。より正確には、ポイントがウィンドウstartより上という理由によりウィンドウが下にスクロールされるとき、新たなstart位置はウィンドウ上端からウィンドウ高さの<em class="replaceable"><code>f</code></em>の箇所にポイントが置かれるように選択される。より大きな<em class="replaceable"><code>f</code></em>では、よりaggressive(積極的)にスクロールする。
</p><p>ポイントを中央に配すのがその効果なので、値<code class="literal">nil</code>は.5と等価である。どのような方法によりセットされたときでも、この変数は自動的にバッファーローカルになる。
</p></blockquote></div><pre class="synopsis"><a id="idm67496912" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-up-aggressively</code></pre><div class="blockquote"><blockquote class="blockquote"><p><code class="literal">scroll-up-aggressively</code>と同様。値<em class="replaceable"><code>f</code></em>は、ポイントがウィンドウ下端からどれほどの位置に置かれるべきかを指定する。つまり、<code class="literal">scroll-up-aggressively</code>と同様、大きな値ｄｗはよりaggressive(積極的)になる。
</p></blockquote></div><pre class="synopsis"><a id="idm67492816" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-step</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、<code class="literal">scroll-conservatively</code>のより古い変種である。違いは、値が<em class="replaceable"><code>n</code></em>なら<em class="replaceable"><code>n</code></em>以下の値ではなく、正確に<em class="replaceable"><code>n</code></em>だけのスクロールを許容することである。この機能は、<code class="literal">scroll-margin</code>とは共に機能しない。デフォルトは0。
</p></blockquote></div><a id="idm67488208" class="indexterm"/><pre class="synopsis"><a id="idm67486800" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-preserve-screen-position</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションが<code class="literal">t</code>なら、スクロールによりポイントがウィンドウ外に移動したとき、Emacsは常に、ポイントがポイントの上下端ではなくカーソルがそのウィンドウ内の元の垂直位置に保たれるようポイントの調整を試みる。
</p><p>値が非<code class="literal">nil</code>かつ非<code class="literal">t</code>の場合、たとえスクロールコマンドによりポイントがウィンドウ外に移動していなくとも、Emacsはカーソルが同じ垂直位置に保たれるよう、ポイントを調整する。
</p><p>このオプションはシンボルプロパティ<code class="literal">scroll-command</code>が非<code class="literal">nil</code>であるような、すべてのスクロールコマンドに影響する。
</p></blockquote></div><pre class="synopsis"><a id="idm67476688" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">next-screen-context-lines</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、全画面スクロールされたときに残される継続される行数を指定する。たとえば、引数が<code class="literal">nil</code>の<code class="literal">scroll-up</code>は、ウィンドウ上端ではなく下端に残される行数でスクロールする。デフォルト値は<code class="literal">2</code>。
</p></blockquote></div><pre class="synopsis"><a id="idm67472336" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scroll-error-top-bottom</code></pre><div class="blockquote"><blockquote class="blockquote"><p>このオプションが<code class="literal">nil</code>(デフォルト)の場合、それ以上のスクロールが不可能な際に、<code class="literal">scroll-up-command</code>と<code class="literal">scroll-down-command</code>は単にエラーをシグナルする。
</p><p>値が<code class="literal">t</code>なら、これらのコマンドはかわりにポイントをバッファーの先頭か終端(スクロール方向に依存する)に移動する。ポイントがすでにその位置にある場合のみ、エラーをシグナルする。
</p></blockquote></div><pre class="synopsis"><a id="idm67467216" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">recenter</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm67464272" class="indexterm"/><p>この関数は、選択されたウィンドウ内の指定された垂直位置にポイントを表示するように、ウィンドウ内のテキストをスクロールする。これはテキストに応じた“ポイント移動”を行わない。
</p><p><em class="replaceable"><code>count</code></em>が非負の数の場合は、そのウィンドウ上端から<em class="replaceable"><code>count</code></em>行下にポイントを含む行を配す。<em class="replaceable"><code>count</code></em>が負なら、ウィンドウ下端から上に数えるので、−1はそのウィンドウ内で最後の利用可能な行となる。
</p><p><em class="replaceable"><code>count</code></em>が<code class="literal">nil</code>(または非<code class="literal">nil</code>のリスト)の場合、<code class="literal">recenter</code>はポイントを含む行をウィンドウの中央に配す。<em class="replaceable"><code>count</code></em>が<code class="literal">nil</code>なら、この関数は<code class="literal">recenter-redisplay</code>の値に応じて、フレームを再描画するかもしれない。
</p><p><code class="literal">recenter</code>がインタラクティブに呼び出されたときは、rawプレフィックス引数が<em class="replaceable"><code>count</code></em>となる。したがって、プレフィックスとして<strong class="userinput"><code>C-u</code></strong>をタイプすると<em class="replaceable"><code>count</code></em>に非<code class="literal">nil</code>、<strong class="userinput"><code>C-u
4</code></strong>では<em class="replaceable"><code>count</code></em>に4がセットされ、後者ではカレント行を上端から4行目にセットする。
</p><p>引数0では、<code class="literal">recenter</code>はカレント行をウィンドウ上端に配す。コマンド<code class="literal">recenter-top-bottom</code>は、これを達成するためにより簡便な方法を提供する。
</p></blockquote></div><pre class="synopsis"><a id="idm67453008" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">recenter-redisplay</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>の場合は、引数<code class="literal">nil</code>で<code class="literal">recenter</code>を呼び出すことにより、フレームを再描画する。デフォルト値は<code class="literal">tty</code>で、これはフレームがttyフレームのときだけフレームを再描画することを意味する。
</p></blockquote></div><pre class="synopsis"><a id="idm67448144" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">recenter-top-bottom</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>デフォルトでは<strong class="userinput"><code>C-l</code></strong>にバインドされているこのコマンドは、<code class="literal">recenter</code>と同様に動作するが、引数なしで呼び出されたときの動作が異なる。この場合、連続して呼び出すことにより、変数<code class="literal">recenter-positions</code>で定義されるサイクル順に応じてポイントを配する。
</p></blockquote></div><pre class="synopsis"><a id="idm67443024" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">recenter-positions</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、<code class="literal">recenter-top-bottom</code>を引数なしで呼び出したときの挙動を制御する。デフォルト値は<code class="literal">(middle top
bottom)</code>で、これは引数なしで<code class="literal">recenter-top-bottom</code>を連続して呼び出すと、ポイントをウィンドウの中央、上端、下端と巡回して配すことを意味する。
</p></blockquote></div></div></body></html>