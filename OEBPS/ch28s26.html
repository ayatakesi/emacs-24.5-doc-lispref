<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hooks for Window Scrolling and Changes</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Window-Hooks"/>Hooks for Window Scrolling and Changes</h1></div></div></div><a id="idm71192144" class="indexterm"/><p>このセクションでは、あるウィンドウがそのバッファーの違う部分を表示したり、別のバッファーを表示したとき常にLispプログラムを実行可能にする方法について説明します。これを変更できる3つのアクションがあります。それはウィンドウのスクロール、ウィンドウ内でのバッファーの切り替え、ウィンドウのサイズ変更です。最初の2つのアクションは<code class="literal">window-scroll-functions</code>、最後のアクションは<code class="literal">window-size-change-functions</code>を実行します。
</p><pre class="synopsis"><a id="idm71181520" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">window-scroll-functions</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、ウィンドウのスクロールによりEmacsが再表示前に呼び出すべき関数のリストを保持する。そのウィンドウ内に異なるバッファーを表示したときも、これらの関数が実行される。
</p><p>この変数は、それぞれの関数が2つの引数、ウィンドウとウィンドウの新たなdisplay-start位置で呼び出されるので、ノーマルフックではない。
</p><p>これらの関数は、<code class="literal">window-end</code>(<a class="link" href="ch28s19.html" title="The Window Start and End Positions">Window Start and
End</a>を参照)を使用する際には気をつけなければならない。最新の値が必要な場合は、それを確実に入力するために<em class="replaceable"><code>update</code></em>引数を使用しなければならない。
</p><p><span class="bold"><strong>警告:</strong></span>
ウィンドウのスクロール方法を変更するためにこの機能を使用してはならない。これは、そのような用途のためにデザインされておらず、そのような使用は機能しないだろう。
</p></blockquote></div><pre class="synopsis"><a id="idm71175888" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">window-size-change-functions</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、理由は何であれ、任意のウィンドウのサイズが変更された場合に呼び出される関数のリストを保持する。これらの関数は、再表示ごとに1回、サイズ変更が発生したフレーム上で1回呼び出される。
</p><p>それぞれの関数は、フレームを唯一の引数として呼び出される。そのフレーム上のどのウィンドウのサイズが変更されたか、および変更された正確な方法を直接探す方法はない。とはいえ、各呼び出しにおいてsize-change関数が既存のウィンドウと、それらのサイズを記録すれば、現在のサイズと以前のサイズを比較することも可能である。
</p><p>ウィンドウの作成と削除はサイズの変更とみなされるので、これらの関数の呼び出しを引き起こす。フレームのサイズ変更は、既存のウィンドウのサイズを変更するので、これも変更とみなされる。
</p><p>これらの関数内で、<code class="literal">save-selected-window</code>を使用できる(<a class="link" href="ch28s08.html" title="Selecting Windows">Selecting
Windows</a>を参照)。しかし、<code class="literal">save-window-excursion</code>(<a class="link" href="ch28s24.html" title="Window Configurations">Window
Configurations</a>を参照)を使用してはならない。このマクロのexitはサイズ変更とみなされ、それはこれらの関数の際限ない呼び出しを引き起こすだろう。
</p></blockquote></div><pre class="synopsis"><a id="idm71170000" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">window-configuration-change-hook</code></pre><div class="blockquote"><blockquote class="blockquote"><p>既存フレームのウィンドウ構成を変更するたびに毎回実行される、ノーマルフックである。これにはウィンドウの分割と削除、ウィンドウのサイズ変更、ウィンドウ内への異なるバッファーの表示が含まれる。
</p><p>このフックのバッファーローカルな部分は、影響を受けるフレーム上の各ウィンドウにたいして、関係するウィンドウを選択、およびそのバッファーをカレントにして1回実行される。グローバルな部分は、変更されたフレームにたいして、そのフレームを選択して1回実行される。
</p></blockquote></div><p>加えて、Font Lockフォント表示関数(Font Lock fontification
function)を登録するために、<code class="literal">jit-lock-register</code>を使用できる。バッファーの一部が(再)フォント表示されたときは、ウィンドウがスクロール、またはサイズ変更されたという理由で、これが常に呼び出されるだろう。<a class="link" href="ch23s06.html#Other-Font-Lock-Variables" title="Other Font Lock Variables">Other
Font Lock Variables</a>を参照のこと。










</p></div></body></html>