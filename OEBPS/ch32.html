<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 31. Text</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Text"/>Chapter 31. Text</h1></div></div></div><a id="idm72888016" class="indexterm"/><p>このチャプターでは、バッファー内のテキストを扱う関数を説明します。ほとんどはカレントバッファー内のテキストにたいして検査、挿入、削除を行い、ポイント位置やポイントに隣接するテキストを操作することが多々あります。その多くはインタラクティブ(interactive:
対話的)です。テキストを変更するすべての関数は、その変更にたいするundo(アンドゥ、取り消し)を提供します(<a class="link" href="ch32s09.html" title="Undo">Undo</a>を参照)。
</p><p>テキストに関連する関数の多くが、<em class="replaceable"><code>start</code></em>および<em class="replaceable"><code>end</code></em>という名前の引数として渡された、2つのバッファー位置により定義された、テキストのリージョンを操作します。これらの引数は、マーカー(<a class="link" href="ch31.html" title="Chapter 30. Markers">Markers</a>を参照)か、数値的な文字位置(<a class="link" href="ch30.html" title="Chapter 29. Positions">Positions</a>を参照)のいずれかであるべきです。これらの引数の順序は関係ありません。<em class="replaceable"><code>start</code></em>がリージョンの終端で、<em class="replaceable"><code>end</code></em>がリージョンの先頭であっても、何も問題はないのです。たとえば、<code class="literal">(delete-region
1 10)</code>と<code class="literal">(delete-region 10
1)</code>は等価です。<em class="replaceable"><code>start</code></em>と<em class="replaceable"><code>end</code></em>のいずれかが、バッファーのアクセス可能範囲の外部なら、<code class="literal">args-out-of-range</code>エラーがシグナルされます。インタラクティブな呼び出しでは、これらの引数にポイントとマークが使用されます。
</p><a id="idm72864720" class="indexterm"/><p>このチャプターを通じて、“テキスト(text)”とは(関係あるときは)そのプロパティも含めた、バッファー内の文字を意味します。ポイントは常に2つの文字の間にあり、カーソルはポイントの後の文字上に表示されることを覚えておいてください。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Near-Point"/>Examining Text Near Point</h1></div></div></div><a id="idm72862672" class="indexterm"/><p>ポイント付近にある文字を調べるための関数が、数多く提供されています。簡単な関数のいくつかは、ここで説明します。<a class="link" href="ch34s04.html" title="Regular Expression Searching">Regexp
Search</a>の<code class="literal">looking-at</code>も参照してください。
</p><p>以下の4つの関数においてバッファーの“先頭(beginning)”と“終端(end)”はそれぞれ、アクセス可能範囲の先頭と終端を意味します。
</p><pre class="synopsis"><a id="idm72859856" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-after</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>position</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーの位置<em class="replaceable"><code>position</code></em>(つまり直後)の文字をリターンする。<em class="replaceable"><code>position</code></em>が、この目的にたいする範囲の外にある場合、すなわちバッファーの先頭より前、またはバッファーの終端以降にある場合、値は<code class="literal">nil</code>となる。<em class="replaceable"><code>position</code></em>のデフォルトは、ポイントである。
</p><p>以下の例では、バッファーの最初の文字が‘<code class="literal">@</code>’であると仮定する:
</p><pre class="screen">(string (char-after 1))
     ⇒ "@"
</pre></blockquote></div><pre class="synopsis"><a id="idm72853072" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-before</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>position</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーの位置<em class="replaceable"><code>position</code></em>の直前の文字をリターンする。<em class="replaceable"><code>position</code></em>が、この目的にたいする範囲の外にある場合、すなわちバッファーの先頭より前、またはバッファーの終端より後にある場合、値は<code class="literal">nil</code>となる。<em class="replaceable"><code>position</code></em>のデフォルトは、ポイントである。
</p></blockquote></div><pre class="synopsis"><a id="idm72847824" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">following-char</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーのポイントの後にある文字をリターンする。これは<code class="literal">(char-after
(point))</code>と同様。ただし、ポイントがバッファー終端にある場合、<code class="literal">following-char</code>は0をリターンする。
</p><p>ポイントが常に2文字間にあり、通常カーソルはポイント後の文字上に表示されることを思い出していただきたい。したがって、<code class="literal">following-char</code>がリターンする文字は、カーソル上の文字となる。
</p><p>以下の例では、‘<code class="literal">a</code>’と‘<code class="literal">c</code>’の間にポイントがある。
</p><pre class="screen">---------- Buffer: foo ----------
Gentlemen may cry ``Pea★ce! Peace!,''
but there is no peace.
---------- Buffer: foo ----------
</pre><pre class="screen">
</pre><pre class="screen">(string (preceding-char))
     ⇒ "a"
(string (following-char))
     ⇒ "c"
</pre></blockquote></div><pre class="synopsis"><a id="idm72811600" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">preceding-char</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーのポイントの前の文字をリターンする。上記<code class="literal">following-char</code>の下の例を参照されたい。ポイントがバッファー先頭にある場合、<code class="literal">preceding-char</code>は0をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm72807760" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">bobp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ポイントがバッファー先頭にあれば<code class="literal">t</code>をリターンする。ナローイングが効力をもつ場合、これはテキストのアクセス可能範囲の先頭を意味する。<a class="link" href="ch30.html#Point" title="Point">Point</a>の<code class="literal">point-min</code>も参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm72803408" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">eobp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ポイントがバッファー終端にあれば<code class="literal">t</code>をリターンする。ナローイングが効力をもつ場合、これはテキストのアクセス可能範囲の終端を意味する。<a class="link" href="ch30.html#Point" title="Point">Point</a>の<code class="literal">point-max</code>も参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm72799056" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">bolp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ポイントが行の先頭にあれば<code class="literal">t</code>をリターンする。<a class="link" href="ch30s02.html#Text-Lines" title="Motion by Text Lines">Text
Lines</a>を参照のこと。バッファー(またはアクセス可能範囲)の先頭は、常に行の先頭とみなされる。
</p></blockquote></div><pre class="synopsis"><a id="idm72795088" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">eolp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ポイントが行の終端にあれば<code class="literal">t</code>をリターンする。<a class="link" href="ch30s02.html#Text-Lines" title="Motion by Text Lines">Text
Lines</a>を参照のこと。バッファー(またはアクセス可能範囲)の終端は、常に行の先頭とみなされる。
</p></blockquote></div></div></div></body></html>