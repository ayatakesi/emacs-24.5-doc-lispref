<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inserting Text</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Insertion"/>Inserting Text</h1></div></div></div><a id="idm72690896" class="indexterm"/><a id="idm72690128" class="indexterm"/><a id="idm72689360" class="indexterm"/><a id="idm72688592" class="indexterm"/><p><em class="firstterm">挿入(insertion)</em>とは、バッファーへの新たなテキストの追加を意味します。テキストはポイント位置、すなわちポイント前の文字とポイント後の文字の間に追加されます。挿入関数は挿入されたテキストの後にポイントを残しますが、前にポイントを残す関数もいくつかあります。前者の挿入を<em class="firstterm">ポイント後挿入(after
point)</em>、後者を<em class="firstterm">ポイント前挿入(before point)</em>と呼びます。
</p><p>挿入により、挿入位置の後にあったマーカーは、テキストを取り囲むように移動されます(<a class="link" href="ch31.html" title="Chapter 30. Markers">Markers</a>を参照)。マーカーは挿入箇所をさしている際は、挿入によるマーカー再配置の有無は、そのマーカーの挿入タイプに依存します(<a class="link" href="ch31s05.html" title="Marker Insertion Types">Marker
Insertion
Types</a>を参照)。<code class="literal">insert-before-markers</code>のような特定のスペシャル関数は、マーカーの挿入タイプとは関係なく、挿入されたテキストの後にそのようなマーカーすべてを再配置します。
</p><p>カレントバッファーが読み取り専用(<a class="link" href="ch27s07.html" title="Read-Only Buffers">Read Only Buffers</a>を参照)、または読み取り専用テキスト(<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>を参照)を挿入しようとした場合、挿入関数はエラーをシグナルします。
</p><p>以下の関数は、文字列およびバッファーからプロパティとともにテキスト文字をコピーします。挿入される文字は、コピー元の文字と完全に同一のプロパティをもちます。それとは対照的に、文字列やバッファーの一部ではない個別の引数として指定された文字は、隣接するテキストからテキストプロパティを継承します。
</p><p>テキストが文字列またはバッファー由来の場合、マルチバイトバッファーに挿入するために、挿入関数はユニバイトからマルチバイトへの変換、およびその逆も行います。しかし、たとえカレントバッファーがマルチバイトバッファーであったとしても、コード128から255までのユニバイトはマルチバイトに変換しません。<a class="link" href="ch33s03.html" title="Converting Text Representations">Converting
Representations</a>を参照してください。
</p><pre class="synopsis"><a id="idm72669136" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>args</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字列および/または1つ以上の文字<em class="replaceable"><code>args</code></em>を、カレントバッファーのポイント位置に挿入して、ポイントを前方に移動する。別の言い方をすると、ポイントの前にテキストを挿入する。すべての<em class="replaceable"><code>args</code></em>が文字列が文字列と文字のいずれでもない場合は、エラーをシグナルする。値は<code class="literal">nil</code>。
</p></blockquote></div><pre class="synopsis"><a id="idm72660176" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert-before-markers</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>args</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字列および/または1つ以上の文字<em class="replaceable"><code>args</code></em>を、カレントバッファーのポイント位置に挿入して、ポイントを前方に移動する。すべての<em class="replaceable"><code>args</code></em>が文字列が文字列と文字のいずれでもない場合は、エラーをシグナルする。値は<code class="literal">nil</code>。
</p><p>他の挿入関数と異なり、この関数は挿入されたテキストの後を指すように、まずマーカーが挿入位置を指すように再配置する。挿入位置からオーバーレイが開始される場合、挿入されたテキストはそのオーバーレイの外側に出される。空でないオーバーレイが挿入位置で終わる場合、挿入されたテキストはそのオーバーレイの内側に入れられる。
</p></blockquote></div><pre class="synopsis"><a id="idm72654800" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">insert-char</code> <em class="replaceable"><code>character</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>count</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、カレントバッファーのポイントの前に、<em class="replaceable"><code>character</code></em>のインスタンスを<em class="replaceable"><code>count</code></em>個挿入する。引数<em class="replaceable"><code>count</code></em>は整数、<em class="replaceable"><code>character</code></em>は文字でなければならない。
</p><p>インタラクティブに呼び出された際は、このコマンドは<em class="replaceable"><code>character</code></em>にたいしてコードポイントかUnicode名による入力を求める。section “Inserting
Text” in <em class="citetitle">The GNU Emacs Manual</em>を参照のこと。
</p><p>この関数は、たとえカレントバッファーがマルチバイトバッファーであっても、コード128から255のユニバイト文字をマルチバイト文字に変換しない。<a class="link" href="ch33s03.html" title="Converting Text Representations">Converting
Representations</a>を参照のこと。
</p><p><em class="replaceable"><code>inherit</code></em>が非<code class="literal">nil</code>の場合、挿入された文字は挿入位置前後の2文字から、ステッキーテキストプロパティ(sticky text
properties)を継承する。<a class="link" href="ch32s19.html#Sticky-Properties" title="Stickiness of Text Properties">Sticky Properties</a>を参照のこと。
</p></blockquote></div><pre class="synopsis"><a id="idm72624720" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert-buffer-substring</code> <em class="replaceable"><code>from-buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーのポイント前に、バッファー<em class="replaceable"><code>from-buffer-or-name</code></em>の一部を挿入する。挿入されるテキストは、<em class="replaceable"><code>start</code></em>(を含む)から<em class="replaceable"><code>end</code></em>(を含まない)の間のリージョン(これらの引数のデフォルトは、そのバッファーのアクセス可能範囲の先頭と終端)である。この関数は<code class="literal">nil</code>をリターンする。
</p><p>以下の例では、バッファー‘<code class="literal">bar</code>’をカレントバッファーとしてフォームを実行する。バッファー‘<code class="literal">bar</code>’は、最初は空であるものとする。
</p><pre class="screen">---------- Buffer: foo ----------
We hold these truths to be self-evident, that all
---------- Buffer: foo ----------
</pre><pre class="screen">
</pre><pre class="screen">(insert-buffer-substring "foo" 1 20)
     ⇒ nil

---------- Buffer: bar ----------
We hold these truth★
---------- Buffer: bar ----------
</pre></blockquote></div><pre class="synopsis"><a id="idm72615888" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert-buffer-substring-no-properties</code> <em class="replaceable"><code>from-buffer-or-name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<code class="literal">insert-buffer-substring</code>と似ているが、テキストプロパティをコピーしない点が異なる。
</p></blockquote></div><p>テキスト挿入に加えて、隣接するテキストからテキストプロパティを継承する他の関数については、<a class="link" href="ch32s19.html#Sticky-Properties" title="Stickiness of Text Properties">Sticky
Properties</a>を参照のこと。インデント関数により挿入された空白文字も、テキストプロパティを継承する。
</p></div></body></html>