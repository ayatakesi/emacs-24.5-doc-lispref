<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Adaptive Fill Mode</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Adaptive-Fill"/>Adaptive Fill Mode</h1></div></div></div><p><em class="firstterm">Adaptive
Fillモード</em>が有効なとき、Emacsは事前定義された値を使用するのではなく、フィルされる各パラグラフのテキストから自動的に、フィルプレフィクスを決定します。このフィルプレフィクスはフィルの間、<a class="link" href="ch32s11.html" title="Filling">Filling</a>と<a class="link" href="ch32s14.html" title="Auto Filling">Auto
Filling</a>で説明されているように、そのパラグラフの2行目以降の行頭に挿入されます。
</p><pre class="synopsis"><a id="idm71915856" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">adaptive-fill-mode</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>なら、Adaptive Fillモードは有効である。デフォルトは<code class="literal">t</code>。
</p></blockquote></div><pre class="synopsis"><a id="idm71912144" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">fill-context-prefix</code> <em class="replaceable"><code>from</code></em> <em class="replaceable"><code>to</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、Adaptive
Fillモードの肝を実装する。これは<em class="replaceable"><code>from</code></em>から<em class="replaceable"><code>to</code></em>、通常はパラグラフの開始から終了にあるテキストにもとづいて、フィルプレフィクスを選択する。これは、以下で説明する変数にもとづき、そのパラグラフの最初の2行を調べることにより、これを行う。
</p><p>この関数は通常、文字列としてフィルプレフィクスをリターンする。しかしこれを行う前に、この関数はそのプレフィクスで始まる行がパラグラフの開始とは見えないだろうか、最終チェックを行う(以降では特に明記しない)。これが発生した場合、この関数はかわりに<code class="literal">nil</code>をリターンすることにより、異常を通知する。
</p><p>以下が、<code class="literal">fill-context-prefix</code>が行う詳細である:
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"><p>1行目からフィルプレフィクス候補を取得するために、(もしあれば)まず<code class="literal">adaptive-fill-function</code>内の関数、次に<code class="literal">adaptive-fill-regexp</code>(以下参照)の正規表現を試みる。これらの非<code class="literal">nil</code>の最初の結果、いずれも<code class="literal">nil</code>なら空文字列が1行目の候補となる。
</p></li><li class="listitem"><p>そのパラグラフが1行だけなら、関数は見つかったプレフィクス候補の妥当性をテストする。その後、この関数はそれが妥当ならその候補を、それ以外はスペース文字列をリターンする(以下の<code class="literal">adaptive-fill-first-line-regexp</code>の説明を参照)。
</p></li><li class="listitem"><p>すでにそのパラグラフが2行以上なら、この関数は次に1行目にたいして行なったのとまったく同じ方法で、2行目でプレフィクス候補を探す。見つからなければ<code class="literal">nil</code>をリターンする。
</p></li><li class="listitem"><p>ここで、この関数は発見的手法により2つのプレフィクス候補を比較する。2行目の候補の非空白文字の並びが1行目の候補と同じなら、この関数は2行目の候補をリターンする。それ以外では、2つの候補に共通するもっとも長い先頭の部分文字列(これは空文字列かもしれない)をリターンする。
</p></li></ol></div></blockquote></div><pre class="synopsis"><a id="idm71887568" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">adaptive-fill-regexp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>Adaptive
Fillモードは、(もしあれば)行の左マージン空白文字の後から開始されるテキストにたいして、この正規表現をマッチする。マッチする文字列が、その行のフィルプレフィクス候補である。
</p><p>デフォルト値は、空白文字と特定の句読点文字が混在した文字列にマッチする。
</p></blockquote></div><pre class="synopsis"><a id="idm71884496" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">adaptive-fill-first-line-regexp</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この正規表現は1行だけのパラグラフに使用され、1つの可能なフィルプレフィクス候補の追加の妥当性評価として機能する。その候補は、この正規表現にマッチするか、<code class="literal">comment-start-skip</code>にマッチしなければならない。マッチしなければ、<code class="literal">fill-context-prefix</code>はその候補を“同じ幅”のスペース文字列に置き換える。
</p><p>この変数のデフォルト値は <code class="literal">"\\`[
\t]*\\'"</code>で、これは空白文字列だけにマッチする。このデフォルトの効果は、1行パラグラフで見つかったフィルプレフィクスが、常に純粋な空白文字となるよう強制することである。
</p></blockquote></div><pre class="synopsis"><a id="idm71875664" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">adaptive-fill-function</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数に関数をセットすることにより、自動的なフィルプレフィクス選択にたいして、より複雑な方法を指定することが可能になる。その関数は、(もしあれば)行の左マージンの後のポイントで呼び出され、かつポイントを保たなければならない。その関数は、“その行”のフィルプレフィクス、またはプレフィクスの判断に失敗したことを意味する<code class="literal">nil</code>のいずれかをリターンすること。
</p></blockquote></div></div></body></html>