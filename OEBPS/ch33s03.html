<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Converting Text Representations</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Converting-Representations"/>Converting Text Representations</h1></div></div></div><p>Emacsはユニバイトテキストをマルチバイトに変換できます。マルチバイトテキストに含まれるのが<acronym class="acronym">ASCII</acronym>と8ビットrawバイトだけという条件つきで、マルチバイトテキストからユニバイトへの変換もできます。一般的にこれらの変換はバッファーへのテキスト挿入時、または複数の文字列を1つの文字列に合わせてテキストにputするときに発生します。文字列のコンテンツを、いずれかの表現に明示的に変換することもできます。
</p><p>Emacsは、そのテキストの構成にもとづいて、文字列の表現を選択します。一般的なルールでは、ユニバイトテキストが他のマルチバイトテキストと組み合わされている場合は、マルチバイト表現のほうがより一般的であり、ユニバイトテキストのすべての文字を保有できるので、ユニバイトテキストをマルチバイトテキストに変換します。
</p><p>バッファーへのテキスト挿入時、Emacsはそのバッファーの<code class="literal">enable-multibyte-characters</code>で指定されるように、テキストをそのバッファーの表現に変換します。特にユニバイトバッファーへマルチバイトテキストを挿入する際は、たとえ一般的にはマルチバイトテキスト内のすべての文字を保持することはできなくても、Emacsはテキストをユニバイトに変換します。バッファーコンテンツをマルチバイトに変換するという自然な代替方法は、そのバッファーの表現が自動的にオーバーライドできないユーザーによる選択にもとづく表現であるため、受け入れられません。
</p><p>ユニバイトテキストからマルチバイトテキストへの変換では、<acronym class="acronym">ASCII</acronym>文字は未変更のまま残され、128から255のコードをもつバイトが8ビットrawバイトのマルチバイト表現に変換されます。
</p><p>マルチバイトテキストからユニバイトテキストへの変換では、すべての<acronym class="acronym">ASCII</acronym>と8ビット文字が、それらの1バイト形式に変換されますが、各文字のコードポイントの描い8ビット以外は破棄されるため、非<acronym class="acronym">ASCII</acronym>文字の情報は失われます。ユニバイトテキストからマルチバイトテキストに変換して、それをユニバイトに戻せば、元のユニバイトテキストが再生成されます。
</p><p>以下の2つの関数は、引数<em class="replaceable"><code>string</code></em>、またはテキストプロパティをもたない新たに作成された文字列のいずれかをリターンします。
</p><pre class="synopsis"><a id="idm74446672" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">string-to-multibyte</code> <em class="replaceable"><code>string</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>string</code></em>と同じ文字シーケンスを含むマルチバイト文字列をリターンする。<em class="replaceable"><code>string</code></em>がマルチバイト文字列なら、それが未変更のままリターンされる。この関数は、<em class="replaceable"><code>string</code></em>が<acronym class="acronym">ASCII</acronym>文字と8ビットrawバイトだけを含むと仮定する。後者は<code class="literal">#x3FFF80</code>から<code class="literal">#x3FFFFF</code>(両端を含む)に対応する、8ビットrawバイトのマルチバイト表現に変換される(<a class="link" href="ch33.html#Text-Representations" title="Text Representations">codepoints</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm74440400" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">string-to-unibyte</code> <em class="replaceable"><code>string</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>string</code></em>と同じ文字シーケンスを含む、ユニバイト文字列をリターンする。<em class="replaceable"><code>string</code></em>に非<acronym class="acronym">ASCII</acronym>文字が含まれる場合は、エラーをシグナルする。<em class="replaceable"><code>string</code></em>がユニバイト文字列なら、それが未変更のままリターンされる。<acronym class="acronym">ASCII</acronym>文字と8ビット文字だけを含む<em class="replaceable"><code>string</code></em>引数にたいしてのみ、この関数を使用すること。
</p></blockquote></div><pre class="synopsis"><a id="idm74434640" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">byte-to-string</code> <em class="replaceable"><code>byte</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm74432080" class="indexterm"/><p>この関数は、文字データ<em class="replaceable"><code>byte</code></em>の単一バイトを含むユニバイト文字列をリターンする。<em class="replaceable"><code>byte</code></em>が0から255までの整数でなければ、エラーをシグナルする。
</p></blockquote></div><pre class="synopsis"><a id="idm74429904" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">multibyte-char-to-unibyte</code> <em class="replaceable"><code>char</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これはマルチバイト文字<em class="replaceable"><code>char</code></em>をユニバイト文字に変換して、その文字をリターンする。<em class="replaceable"><code>char</code></em>が<acronym class="acronym">ASCII</acronym>と8ビットのいずれでもなければ、この関数は−1をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm74425552" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">unibyte-char-to-multibyte</code> <em class="replaceable"><code>char</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>char</code></em>が<acronym class="acronym">ASCII</acronym>か8ビットrawバイトのいずれかであると仮定して、ユニバイト文字<acronym class="acronym">ASCII</acronym>をマルチバイト文字に変換する。
</p></blockquote></div></div></body></html>