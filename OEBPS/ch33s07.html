<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Character Sets</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Character-Sets"/>Character Sets</h1></div></div></div><a id="idm74252880" class="indexterm"/><a id="idm74252112" class="indexterm"/><a id="idm74251344" class="indexterm"/><p>Emacsの<em class="firstterm">文字セット(character
set、もしくはcharset)</em>とは、それぞれの文字が数字のコードポイントに割り当てられれた、文字セットのことです(Unicode標準ではこれを<em class="firstterm">符号化文字集合(coded
character
set)</em>と呼ぶ)。Emacsの各文字セットは、シンボルであるような名前をもちます。1つの文字が、任意の数の異なる文字セットに属することができますが、各文字セット内で異なるコードポイントをもつのが一般的でしょう。文字セットの例には<code class="literal">ascii</code>、<code class="literal">iso-8859-1</code>、<code class="literal">greek-iso8859-7</code>、<code class="literal">windows-1255</code>が含まれます。文字セット内で文字に割り当てられるコードポイントは、Emacs内のバッファーや文字列内で使用されるコードポイントとは、通常異なります。
</p><a id="idm74247376" class="indexterm"/><a id="idm74246224" class="indexterm"/><a id="idm74245072" class="indexterm"/><p>Emacsは、特別な文字セットをいくつか定義しています。文字セット<code class="literal">unicode</code>は、Emacsコードポイントが<code class="literal">0..#x10FFFF</code>の範囲の、すべての文字セットを含みます。文字セット<code class="literal">emacs</code>は、すべての<acronym class="acronym">ASCII</acronym>、および非<acronym class="acronym">ASCII</acronym>文字を含みます。最後に<code class="literal">eight-bit</code>文字セットは、8ビットrawバイトを含みます。テキスト内でrawバイトを見つけたときに、Emacsはこれを使用します。
</p><pre class="synopsis"><a id="idm74240464" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">charsetp</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>object</code></em>は文字セットを命名するシンボルなら<code class="literal">t</code>、それ以外は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm74231888" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">charset-list</code></pre><div class="blockquote"><blockquote class="blockquote"><p>値は、すべての定義済み文字セットの名前のリストである。
</p></blockquote></div><pre class="synopsis"><a id="idm74229200" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">charset-priority-list</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>highestp</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、すべての定義済み文字セットの優先順にソートされたリストをリターンする。<em class="replaceable"><code>highestp</code></em>が非<code class="literal">nil</code>なら、この関数はもっとも優先度の高い文字セット1つをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm74224592" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-charset-priority</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>charsets</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>charsets</code></em>をもっとも高い優先度の文字セットにする。
</p></blockquote></div><pre class="synopsis"><a id="idm74220624" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-charset</code> <em class="replaceable"><code>character</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>restriction</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>character</code></em>が属する文字セットで、もっとも優先度の高い文字セットの名前をリターンする。ただし<acronym class="acronym">ASCII</acronym>文字は例外であり、この関数は常に<code class="literal">ascii</code>をリターンする。
</p><p><em class="replaceable"><code>restriction</code></em>が非<code class="literal">nil</code>なら、それは検索する文字セットのリストであること。かわりにコーディングシステムも指定でき、その場合はそのコーディングシステムによりサポートされている必要がある(<a class="link" href="ch33s10.html" title="Coding Systems">Coding
Systems</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm74201040" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">charset-plist</code> <em class="replaceable"><code>charset</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字セット<em class="replaceable"><code>charset</code></em>のプロパティをリターンする。たとえ<em class="replaceable"><code>charset</code></em>がシンボルだったとしても、これはそのシンボルのプロパティリストと同じではない。文字セットプロパティにはドキュメント文字列、短い名前等、その文字セットに関する重要な情報が含まれる。
</p></blockquote></div><pre class="synopsis"><a id="idm74197072" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">put-charset-property</code> <em class="replaceable"><code>charset</code></em> <em class="replaceable"><code>propname</code></em> <em class="replaceable"><code>value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>charset</code></em>のプロパティ<em class="replaceable"><code>propname</code></em>に、与えられた<em class="replaceable"><code>value</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm74191952" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">get-charset-property</code> <em class="replaceable"><code>charset</code></em> <em class="replaceable"><code>propname</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>charset</code></em>のプロパティ<em class="replaceable"><code>propname</code></em>の値をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm74187600" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">list-charset-chars</code> <em class="replaceable"><code>charset</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、文字セット<em class="replaceable"><code>charset</code></em>内の文字のリストを表示する。
</p></blockquote></div><p>Emacsは文字の内部的な表現と、その文字の特定の文字セット内でのコードポイントを相互に変換することができます。以下は、これらをサポートするための関数です。
</p><pre class="synopsis"><a id="idm74182864" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">decode-char</code> <em class="replaceable"><code>charset</code></em> <em class="replaceable"><code>code-point</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>charset</code></em>内で<em class="replaceable"><code>code-point</code></em>に割り当てられた文字を、Emacsの対応する文字にデコードして、それをリターンする。そのコードポイントの文字が<em class="replaceable"><code>charset</code></em>に含まれなければ、値は<code class="literal">nil</code>である。<em class="replaceable"><code>code-point</code></em>がLisp整数(<a class="link" href="ch04.html#Integer-Basics" title="Integer Basics">most-positive-fixnum</a>を参照)に収まらない場合は、コンスセル<code class="literal">(<em class="replaceable"><code>high</code></em>
.
<em class="replaceable"><code>low</code></em>)</code>として指定できるかもしれない。ここで<em class="replaceable"><code>low</code></em>はその値の下位来る16ビット、<em class="replaceable"><code>high</code></em>は上位16ビットである。
</p></blockquote></div><pre class="synopsis"><a id="idm74174672" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">encode-char</code> <em class="replaceable"><code>char</code></em> <em class="replaceable"><code>charset</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>charset</code></em>内で文字<em class="replaceable"><code>char</code></em>に割り当てられた、コードポイントをリターンする。結果がLisp整数に収まらない場合は、上述の<code class="literal">decode-char</code>の2つ目の引数のように、コンスセル<code class="literal">(<em class="replaceable"><code>high</code></em>
.
<em class="replaceable"><code>low</code></em>)</code>としてリターンされる。<em class="replaceable"><code>charset</code></em>が<em class="replaceable"><code>char</code></em>にたいするコードポイントをもたなければ、値は<code class="literal">nil</code>である。
</p></blockquote></div><p>以下の関数は、文字セット内の文字の一部、全くすべてにたいして、特定の関数を適用するのに便利です。
</p><pre class="synopsis"><a id="idm74166864" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">map-charset-chars</code> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>charset</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>arg</code></em> <em class="replaceable"><code>from-code</code></em> <em class="replaceable"><code>to-code</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>charset</code></em>内の文字にたいして<em class="replaceable"><code>function</code></em>を呼び出す。<em class="replaceable"><code>function</code></em>は2つの引数で呼び出される。1つ目はコンスセル<code class="literal">(<em class="replaceable"><code>from</code></em>
.
<em class="replaceable"><code>to</code></em>)</code>で、<em class="replaceable"><code>from</code></em>と<em class="replaceable"><code>to</code></em>は文字セット内に含まれる文字の範囲である。<em class="replaceable"><code>arg</code></em>は、2つ目の引数として<em class="replaceable"><code>function</code></em>に渡される。
</p><p>デフォルトでは、<em class="replaceable"><code>function</code></em>に渡されるコードポイントの範囲には<em class="replaceable"><code>charset</code></em>内のすべての文字が含まれるが、オプション引数<em class="replaceable"><code>from-code</code></em>および<em class="replaceable"><code>to-code</code></em>により、それは<em class="replaceable"><code>charset</code></em>の2つのコードポイント間にある文字範囲に制限される。<em class="replaceable"><code>from-code</code></em>または<em class="replaceable"><code>to-code</code></em>のいずれかが<code class="literal">nil</code>の場合のデフォルトは、<em class="replaceable"><code>charset</code></em>のコードポイントの最初または最後である。
</p></blockquote></div></div></body></html>