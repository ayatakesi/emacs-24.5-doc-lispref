<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Translation of Characters</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Translation-of-Characters"/>Translation of Characters</h1></div></div></div><a id="idm74123472" class="indexterm"/><a id="idm74122704" class="indexterm"/><p><em class="firstterm">変換テーブル(translation
table)</em>とは？文字から文字へのマッピングを指定する、文字テーブルです(<a class="link" href="ch07s06.html" title="Char-Tables">Char-Tables</a>を参照)。これらのテーブルはエンコーディング、デコーディング、および他の用地にも使用されます。独自に変換テーブルを指定するコーディングシステムも、いくつかあります。他のすべてのコーディングシステムに適用される、デフォルトの変換テーブルも存在します。
</p><p>変換テーブルには、余分のスロットが2つあります。1つ目のスロットは<code class="literal">nil</code>、または逆の変換を処理する変換テーブルです。2つ目のスロットは、変換する文字シーケンスを照合する際の、最大文字数です(以下の<code class="literal">make-translation-table-from-alist</code>の説明を参照)。
</p><pre class="synopsis"><a id="idm74119120" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-translation-table</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>translations</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、引数<em class="replaceable"><code>translations</code></em>にもとづいて、変換テーブルをリターンする。<em class="replaceable"><code>translations</code></em>の各要素は、<code class="literal">(<em class="replaceable"><code>from</code></em>
. <em class="replaceable"><code>to</code></em>)</code>という形式のリストであること。これは<em class="replaceable"><code>from</code></em>から<em class="replaceable"><code>to</code></em>への、文字の変換を指示する。
</p><p>各引数内の引数とフォームは順に処理され、もし前のフォームですでに<em class="replaceable"><code>to</code></em>がたとえば<em class="replaceable"><code>to-alt</code></em>に変換されていれば、<em class="replaceable"><code>from</code></em>も<em class="replaceable"><code>to-alt</code></em>に変換される。
</p></blockquote></div><p>デコードを行う間、その変換テーブルの変換は、通常のデコーディングの結果の文字に適用されます。あるコーディングシステムがプロパティ<code class="literal">:decode-translation-table</code>をもつなら、それは使用する変換テーブル、または順に適用するべき変換テーブルのリストを指定します(これはコーディングシステムの名前であるようなシンボルのプロパティではなく、<code class="literal">coding-system-get</code>がリターンするような、コーディングシステムのプロパティである。<a class="link" href="ch33s10.html#Coding-System-Basics" title="Basic Concepts of Coding Systems">Basic Concepts of Coding
Systems</a>を参照されたい)。最後に、もし<code class="literal">standard-translation-table-for-decode</code>が非<code class="literal">nil</code>なら、結果となる文字はそのテーブルにより変換されます。
</p><p>エンコードを行う間は、その変換テーブルの変換はバッファー内の文字に適用され、変換結果は実際にエンコードされます。あるコーディングシステムがプロパティ<code class="literal">:encode-translation-table</code>をもつなら、それは使用する変換テーブル、または順に適用するべき変換テーブルのリストを指定します。加えて、もし変数<code class="literal">standard-translation-table-for-encode</code>が非<code class="literal">nil</code>なら、それは変換結果にたいして使用するべき変換テーブルを指定します。
</p><pre class="synopsis"><a id="idm74101840" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">standard-translation-table-for-decode</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これはデコード用のデフォルトの変換テーブルである。あるコーディングシステムが独自に変換テーブルを指定する場合、この変数の値が非<code class="literal">nil</code>なら、それら独自のテーブル適用後に、この変数の変換テーブルが適用される。
</p></blockquote></div><pre class="synopsis"><a id="idm74098640" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">standard-translation-table-for-encode</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これはエンコード用のデフォルトの変換テーブルである。あるコーディングシステムが独自に変換テーブルを指定する場合、この変数の値が非<code class="literal">nil</code>なら、それら独自のテーブル適用後に、この変数の変換テーブルが適用される。
</p></blockquote></div><pre class="synopsis"><a id="idm74094928" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">translation-table-for-input</code></pre><div class="blockquote"><blockquote class="blockquote"><p>自己ソウニュ文字は、挿入前にこの変換テーブルを通じて変換が行われる。検索コマンドも、バッファー内の内容とより信頼性のある比較ができるように、このテーブルを通じて入力を変換する。
</p><p>この変数は、セット時に自動的にバッファーローカルになる。
</p></blockquote></div><pre class="synopsis"><a id="idm74079568" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-translation-table-from-vector</code> <em class="replaceable"><code>vec</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、バイト(値は0から#xFF)から文字にマップする256要素の配列であるような<em class="replaceable"><code>vec</code></em>から作成した変換テーブルをリターンする。未変換のバイトにたいする要素は、<code class="literal">nil</code>かもしれない。リターンされるテーブルは、余分な1つ目のスロットにそのマッピングを保持する変換テーブル、2つ目の余分なスロットに値<code class="literal">1</code>をもつ。
</p><p>この関数は、各バイトを特定の文字にマップするような、プライベートなコーディングシステムを簡単に作成する手段を提供する。<code class="literal">define-coding-system</code>の<em class="replaceable"><code>props</code></em>引数のプロパティ<code class="literal">:decode-translation-table</code>と<code class="literal">:encode-translation-table</code>に、リターンされるテーブルと、逆変換テーブルを指定できる。
</p></blockquote></div><pre class="synopsis"><a id="idm74072528" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-translation-table-from-alist</code> <em class="replaceable"><code>alist</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<code class="literal">make-translation-table</code>と似ているが、シンプルな1体1の変換テーブルではなく、より複雑な変換テーブルをリターンする。<em class="replaceable"><code>alist</code></em>の各要素は<code class="literal">(<em class="replaceable"><code>from</code></em>
.
<em class="replaceable"><code>to</code></em>)</code>という形式をもち、ここで<em class="replaceable"><code>from</code></em>および<em class="replaceable"><code>to</code></em>は、文字または文字シーケンスを指定するベクターである。<em class="replaceable"><code>from</code></em>が文字なら、その文字は<em class="replaceable"><code>to</code></em>(文字または文字シーケンス)に変換される。<em class="replaceable"><code>from</code></em>が文字のベクターならそのシーケンスは<em class="replaceable"><code>to</code></em>に変換される。リターンされるテーブルは、1つ目の余分なスロットに逆のマッピングを行う変換テーブル、2つ目の余分なスロットには文字シーケンス<em class="replaceable"><code>from</code></em>すべての最大長をもつ。
</p></blockquote></div></div></body></html>