<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Syntax Descriptors</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Syntax-Descriptors"/>Syntax Descriptors</h1></div></div></div><a id="idm76420816" class="indexterm"/><p><em class="firstterm">構文クラス(syntax
class)</em>の文字は、その文字の構文的な役割を記述します。各構文テーブルは、それぞれの文字の構文クラスを指定します。ある構文テーブルでの文字のクラスと、別のテーブルにおけるその文字のクラスとの間に関連性がある必要はありません。
</p><p>構文テーブルはそれぞれニーモニック文字(mnemonic
character)により選別され、クラスを指定する必要がある際にはそのクラスの名前としての役割を果たします。この指定子文字(designator
character)は通常、そのクラスに割当てられることが多々あります。しかしその指定子としての意味は不変であり、その文字がカレントでもつ構文とは独立しています。つまりカレント構文テーブルにおいて実際に文字‘<code class="literal">\</code>’が構文をもつかどうかに関係なく、指定子文字としての‘<code class="literal">\</code>’は常に“エスケープ文字(escape
characte)r”を意味します。
構文クラスとそれらの指定子文字のリストは、<a class="link" href="ch35s02.html#Syntax-Class-Table" title="Table of Syntax Classes">Syntax Class Table</a>を参照してください。
</p><a id="idm76417488" class="indexterm"/><p><em class="firstterm">構文記述子(syntax
descriptor)</em>とは、文字の構文クラスと、その他の構文的なプロパティを記述するLisp文字列のことです。ある文字の構文を変更したい際、それは関数<code class="literal">modify-syntax-entry</code>を呼び出して、その引数に構文記述子を渡すことにより行われます(<a class="link" href="ch35s03.html" title="Syntax Table Functions">Syntax
Table Functions</a>を参照)。
</p><p>構文記述子の1つ目の文字は、構文クラスの指定子文字でなければなりません。2つ目の文字がもしあれば、マッチング文字を指定します(Lispでは‘<code class="literal">(</code>’にたいするマッチング文字は‘<code class="literal">)</code>’)。スペースはマッチング文字が存在しないことを指定します。その後に続く文字は、追加の構文プロパティを指定します(<a class="link" href="ch35s02.html#Syntax-Flags" title="Syntax Flags">Syntax
Flags</a>を参照)。
</p><p>マッチング文字やフラグが必要なければ、(構文クラスを指定する)1つの文字だけで十分です。
</p><p>たとえばCモードでの文字‘<code class="literal">*</code>’の構文記述子は<code class="literal">".
23"</code>(区切り記号、マッチング文字用スロットは未使用、コメント開始記号の2つ目の文字、コメント終了記号の1つ目の文字)、‘<code class="literal">/</code>’にたいするエントリーは‘<code class="literal">.
14</code>’(区切り記号、マッチング文字用スロットは未使用、コメント開始記号の1つ目の文字、コメント終了記号の2つ目の文字)です。
</p><p>Emacsは、低レベルでの構文クラスを記述するために使用される<em class="firstterm">raw構文記述子(raw syntax
descriptors)</em>も定義しています。<a class="link" href="ch35s07.html" title="Syntax Table Internals">Syntax Table Internals</a>を参照してください。
</p><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Syntax-Class-Table"/>Table of Syntax Classes</h2></div></div></div><a id="idm76407888" class="indexterm"/><p>以下は構文クラス、それらの指定子となる文字とそれらの意味、およびそれらの使用例を示すテーブルです。
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">空白文字: ‘<code class="literal"> </code>’、または‘<code class="literal">-</code>’
</span></dt><dd><p>シンボルおよび単語を区別する文字。空白文字は通常は他の構文的な意義をもたず、複数の空白文字は構文的には単一の空白文字と等しい。スペース、タブ、フォームフィードは、ほとんどすべてのメジャーモードにおいて空白文字にクラスっ分けされる。
</p><p>この構文クラスは‘<code class="literal"> </code>’または‘<code class="literal">-</code>’により指定できる。両指定子は等価である。
</p></dd><dt><span class="term">単語構成文字: ‘<code class="literal">w</code>’
</span></dt><dd><p>人間の言語における単語の一部。これらは通常は、プログラム内において変数やコマンドの名前として使用される。通常、すべての大文字と小文字、および数字は単語構成文字である。
</p></dd><dt><span class="term">シンボル構成文字: ‘<code class="literal">_</code>’
</span></dt><dd><p>単語構成文字とともに変数やコマンドの名前で使用される、追加の文字。例としてはLispモードの文字‘<code class="literal">$&amp;*+-_&lt;&gt;</code>’が含まれ、これらはたとえ英単語の一部でないとしても、シンボルの名前の一部となり得る。標準Cでは、シンボル内において非単語構成文字で有効な文字はアンダースコア(‘<code class="literal">_</code>’)だけである。
</p></dd><dt><span class="term">区切り文字: ‘<code class="literal">.</code>’
</span></dt><dd><p>人間の言語において句読点として使用される文字、またはプログラミング言語でシンボルを別のシンボルと区別するために使用される文字。Emacs
Lispモードのようないくつかのプログラミング言語のモードでは、単語構成文字およびシンボル構成文字のいずれでもないいくつかの文字はすべて、他の用途をもつので、このクラスの文字をもたない。Cモードのような他のプログラミング言語のモードでは、演算子にたいして区切り文字構文が使用される。
</p></dd><dt><span class="term">開カッコ文字: ‘<code class="literal">(</code>’
, </span><span class="term">閉カッコ文字: ‘<code class="literal">)</code>’
</span></dt><dd><p>文や式を囲うために、異なるペアーとして使用される文字。そのようなグループ化は開カッコで開始され、閉カッコで終了する。開カッコ文字はそれぞれ特定の閉カッコ文字にマッチし、その逆も成り立つ。Emacsqは通常、閉カッコ挿入字に、マッチする開カッコを示す。<a class="link" href="ch38s20.html" title="Blinking Parentheses">Blinking</a>を参照のこと。
</p><p>人間の言語、およびCのコードではカッコのペアーは‘<code class="literal">()</code>’、‘<code class="literal">[]</code>’、‘<code class="literal">{}</code>’である。Emacs
Lispではリストとベクターにたいする区切り文字(‘<code class="literal">()</code>’および‘<code class="literal">[]</code>’)は、カッコ文字としてクラス分けされる。
</p></dd><dt><span class="term">文字列クォート: ‘<code class="literal">"</code>’
</span></dt><dd><p>文字列定数を区切るために使用される文字。文字列の先頭と終端に、同じ文字列クォート文字が出現する。このようなクォート文字列はネストされない。
</p><p>Emacsのパース機能は、文字列を単一のトークンとみなす。文字列内では、その文字の通常の構文的な意味は抑制される。
</p><p>Lispモードはダブルクォーテーション(‘<code class="literal">"</code>’)、および垂直バー(‘<code class="literal">|</code>’)とう、2つの文字列クォート文字をもつ。Emacs
Lispでは‘<code class="literal">|</code>’は使用しないが、Common
Lispでは使用される。Cも文字列にたいするダブルクォート文字、および文字定数にたいするシングルクォート文字(‘<code class="literal">'</code>’)という、2つのクォート文字をもつ。
</p><p>人間用のテキストには文字列クォート文字がない。そのクォーテーション内の別の文字の通常の構文的プロパティを、クォーテーションマークがオフに切り替えるのを、わたしたちは望まない。
</p></dd><dt><span class="term">エスケープ構文文字: ‘<code class="literal">\</code>’
</span></dt><dd><p>文字列や文字定数内で使用されるような、エスケープシーケンスで始まる文字。CとLispの両方で、文字‘<code class="literal">\</code>’はこのクラスに属する(Cでは文字列内でのみ使用されるが、Cコード中を通じてこのように扱っても問題ないことがわかった)。
</p><p><code class="literal">words-include-escapes</code>が非<code class="literal">nil</code>な、このクラスの文字は単語の一部とみなされる。<a class="link" href="ch30s02.html#Word-Motion" title="Motion by Words">Word
Motion</a>を参照のこと。
</p></dd><dt><span class="term">文字クォート: ‘<code class="literal">/</code>’
</span></dt><dd><p>その文字の通常の構文的な意義を失うよう、後続の文字をクォートするために使用される文字。これは直後に続く文字だけに影響する点が、エスケープ文字と異なる。
</p><p><code class="literal">words-include-escapes</code>が非<code class="literal">nil</code>な、このクラスの文字は単語の一部とみなされる。<a class="link" href="ch30s02.html#Word-Motion" title="Motion by Words">Word
Motion</a>を参照のこと。
</p><p>このクラスはTeXモードのバックスラッシュにたいして使用される。
</p></dd><dt><span class="term">区切りペアー: ‘<code class="literal">$</code>’
</span></dt><dd><p>文字列クォート文字と似ているが、この区切りの間にある文字の構文的なプロパティは抑制されない点が異なる。現在のところTeXモードだけが区切りペアーを使用する(‘<code class="literal">$</code>’によりmathモードに出入りする)。
</p></dd><dt><span class="term">式プレフィクス: ‘<code class="literal">'</code>’
</span></dt><dd><p>式に隣接して出現した場合に、その式の一部とみなされる、構文的演算子にたいして使用される文字。Lispモードではアポストロフィー‘<code class="literal">'</code>’(クォートに使用)、カンマ‘<code class="literal">,</code>’(マクロに使用)、‘<code class="literal">#</code>’(特定のデータ型にたいするリード構文として使用)が、これらの文字に含まれる。
</p></dd><dt><span class="term">コメント開始文字: ‘<code class="literal">&lt;</code>’
, </span><span class="term">コメント終了文字: ‘<code class="literal">&gt;</code>’
</span></dt><dd><a id="idm76324176" class="indexterm"/><p>さまざまな言語において、コメントを区切るために使用する文字。人間用のテキストはコメント文字をもたない。Lispでは、セミコロン(‘<code class="literal">;</code>’)がコメントの開始で、改行かフォームフィードで終了する。
</p></dd><dt><span class="term">標準構文の継承: ‘<code class="literal">@</code>’
</span></dt><dd><p>この構文クラスは、特定の構文を指定しない。これは、その文字の構文を探すために標準構文テーブルを照合するよう告げる。
</p></dd><dt><span class="term">汎用コメント区切り: ‘<code class="literal">!</code>’
</span></dt><dd><p>特殊なコメントを開始または終了させる文字。<span class="emphasis"><em>任意</em></span>の汎用コメント区切りは、<span class="emphasis"><em>任意</em></span>の汎用コメント区切りにマッチするが、コメント開始とコメント終了とはマッチできない。汎用コメント区切りは、汎用コメント区切り同士としかマッチできない。
</p><p>この構文クラスは主として<code class="literal">syntax-table</code>テキストプロパティ(<a class="link" href="ch35s04.html" title="Syntax Properties">Syntax
Properties</a>を参照)とともに使用することを意図している。任意の文字範囲にたいして、その範囲の最初と最後の文字にたいして、それらが汎用コメント区切りであることを示す<code class="literal">syntax-table</code>プロパティを付与することにより、その範囲がコメントを形成するとマークすることができる。
</p></dd><dt><span class="term">汎用文字列区切り: ‘<code class="literal">|</code>’
</span></dt><dd><p>文字列を開始または終了させる文字。<span class="emphasis"><em>任意</em></span>の汎用文字列区切りは、<span class="emphasis"><em>任意</em></span>の汎用文字列区切りにマッチするが、通常の文字列クォート文字とはマッチできない。
</p><p>この構文クラスは主として<code class="literal">syntax-table</code>テキストプロパティ(<a class="link" href="ch35s04.html" title="Syntax Properties">Syntax
Properties</a>を参照)とともに使用することを意図している。任意の文字範囲にたいして、その範囲の最初と最後の文字にたいして、それらが汎用文字列区切りであることを示す<code class="literal">syntax-table</code>プロパティを付与することにより、その範囲が文字列定数を形成するとマークすることができる。
</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Syntax-Flags"/>Syntax Flags</h2></div></div></div><a id="idm76311760" class="indexterm"/><p>構文テーブル内の文字全体にたいして、構文クラスに加えてフラグを指定できます。利用できる8つのフラグがあり、それらは文字‘<code class="literal">1</code>’、‘<code class="literal">2</code>’、‘<code class="literal">3</code>’、‘<code class="literal">4</code>’、‘<code class="literal">b</code>’、‘<code class="literal">c</code>’、‘<code class="literal">n</code>’、‘<code class="literal">p</code>’で表されます。
</p><p>‘<code class="literal">p</code>’を除くすべてのフラグは、コメント区切りを記述するために使用されます。数字のフラグは2文字から構成されるコメント区切りにたいして使用されます。これらは、文字の文字クラスに関連付けられた構文的プロパティに加えて、その文字も<span class="emphasis"><em>同様</em></span>にコメントシーケンスの一部となれることを示します。Cモードでは区切り文字であり、<span class="emphasis"><em>かつ</em></span>コメントシーケンス開始(‘<code class="literal">/*</code>’)の2文字目であり、<span class="emphasis"><em>かつ</em></span>コメントシーケンス終了(‘<code class="literal">*/</code>’)の1文字目である‘<code class="literal">*</code>’のような文字のために、フラグとクラスは互いに独立しています。フラグ‘<code class="literal">b</code>’、‘<code class="literal">c</code>’、‘<code class="literal">n</code>’は対応するコメント区切りを限定するために使用されます。
</p><p>以下は文字<em class="replaceable"><code>c</code></em>にたいして利用できるフラグと、それらの意味を示すテーブルです:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>‘<code class="literal">1</code>’は、<em class="replaceable"><code>c</code></em>が2文字からなるコメント開始シーケンスの開始であることを意味する。
</p></li><li class="listitem"><p>‘<code class="literal">2</code>’は、<em class="replaceable"><code>c</code></em>がそのようなシーケンスの2文字目であることを意味する。
</p></li><li class="listitem"><p>‘<code class="literal">3</code>’は、<em class="replaceable"><code>c</code></em>が2文字からなるコメント終了シーケンスの開始であることを意味する。
</p></li><li class="listitem"><p>‘<code class="literal">4</code>’は、<em class="replaceable"><code>c</code></em>がそのようなシーケンスの2文字目であることを意味する。
</p></li><li class="listitem"><p>‘<code class="literal">b</code>’は、<em class="replaceable"><code>c</code></em>が代替えのコメントスタイル“b”に属するコメント区切りであることを意味する。このフラグは2文字のコメント開始では2文字目、2文字のコメント終了では1文字目にたいしてのみ意味をもつ。
</p></li><li class="listitem"><p>‘<code class="literal">c</code>’は、<em class="replaceable"><code>c</code></em>が代替えのコメントスタイル“c”に属するコメント区切りであることを意味する。2文字からなるコメント区切りにたいしては、そのいずれかが‘<code class="literal">c</code>’であればスタイル“c”となる。
</p></li><li class="listitem"><p>コメント区切り文字での‘<code class="literal">n</code>’は、この種のコメントがネスト可能であることを指定する。2文字からなるコメント区切りにたいしては、そのいずれかが‘<code class="literal">n</code>’であればネスト可能となる。
</p><a id="idm76285776" class="indexterm"/><p>Emacsは任意の構文テーブル1つにたいして、同時に複数のコメントスタイルをサポートする。コメントスタイルはフラグ‘<code class="literal">b</code>’、‘<code class="literal">c</code>’、‘<code class="literal">n</code>’の組み合わせなので、8個の異なるコメントスタイルが可能である。コメント区切りはそれぞれスタイルをもち、同じスタイルのコメント区切りとのみマッチできる。つまりコメントがスタイル“bn”のコメント開始シーケンスで開始されるなら、そのコメントは次のスタイル“bn”のコメント終了シーケンスにマッチするまで拡張されるだろう。
</p><p>C++にたいして適切なコメント構文は、以下のようになる:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">‘<code class="literal">/</code>’
</span></dt><dd><p>‘<code class="literal">124</code>’
</p></dd><dt><span class="term">‘<code class="literal">*</code>’
</span></dt><dd><p>‘<code class="literal">23b</code>’
</p></dd><dt><span class="term">newline
</span></dt><dd><p>‘<code class="literal">&gt;</code>’
</p></dd></dl></div><p>これは4つのコメント区切りシーケンスを定義する:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">‘<code class="literal">/*</code>’
</span></dt><dd><p>これは2文字目の‘<code class="literal">*</code>’が‘<code class="literal">b</code>’フラグをもつので、“b”スタイルのコメント開始シーケンスである。
</p></dd><dt><span class="term">‘<code class="literal">//</code>’
</span></dt><dd><p>これは2文字目の‘<code class="literal">/</code>’が‘<code class="literal">b</code>’フラグをもたないので、“a”スタイルのコメント開始シーケンスである。
</p></dd><dt><span class="term">‘<code class="literal">*/</code>’
</span></dt><dd><p>これは1文字目の‘<code class="literal">*</code>’が‘<code class="literal">b</code>’フラグをもつので、“b”スタイルのコメント終了シーケンスである。
</p></dd><dt><span class="term">newline
</span></dt><dd><p>これは改行▼文字が‘<code class="literal">b</code>’フラグをもたないので、“a”スタイルのコメント終了シーケンスである。
</p></dd></dl></div></li><li class="listitem"><p>‘<code class="literal">p</code>’はLisp構文にたいして、追加のプレフィクス文字を識別する。これらが式の間に出現した際は、空白文字として扱われる。これらが式の内部に出現したときは、それらの通常の構文クラスに応じて処理される。
</p><p>関数<code class="literal">backward-prefix-chars</code>はこれらの文字と、同様にメインの構文クラスがプレフィクスであるような文字(‘<code class="literal">'</code>’)を超えて、後方に移動する。<a class="link" href="ch35s05.html" title="Motion and Syntax">Motion
and Syntax</a>を参照のこと。
</p></li></ul></div></div></div></body></html>