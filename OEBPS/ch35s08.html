<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Categories</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Categories"/>Categories</h1></div></div></div><a id="idm75880528" class="indexterm"/><a id="idm75879760" class="indexterm"/><p><em class="firstterm">カテゴリー(categories)</em>は、構文的に文字をクラス分けする別の手段を提供します。必要に応じて複数のカテゴリーを定義して、それぞれの文字に独立して1つ以上のカテゴリーを割り当てることができます。構文クラスと異なり、カテゴリーは互いに排他ではありません。1つの文字が複数のカテゴリーに属すのは、普通のことです。
</p><a id="idm75878352" class="indexterm"/><p>バッファーはそれぞれ<em class="firstterm">カテゴリーテーブル(category
table)</em>をもっています。これはどのカテゴリーが定義されていて、各カテゴリーにどの文字が属すかを記録しています。カテゴリーテールは自身のカテゴリーを定義しますが、標準カテゴリーはすべてのモードで利用可能なので、通常これらは標準カテゴリーテーブルをコピーすることにより初期化されます。
</p><p>カテゴリーはそれぞれ、‘<code class="literal">
</code>’から‘<code class="literal">~</code>’の範囲の<acronym class="acronym">ASCII</acronym>プリント文字による名前をもちます。<code class="literal">define-category</code>で定義する際は、カテゴリーの名前を指定します。
</p><a id="idm75853776" class="indexterm"/><p>カテゴリーテーブルは、実際には文字テーブルです(<a class="link" href="ch07s06.html" title="Char-Tables">Char-Tables</a>を参照)。カテゴリーテーブルのインデックス<em class="replaceable"><code>c</code></em>の要素は、文字<em class="replaceable"><code>c</code></em>が属するカテゴリーを示す<em class="firstterm">カテゴリーセット(category
set)</em>というブールベクターです。このカテゴリーセット内で、もしインデックス<em class="replaceable"><code>cat</code></em>の要素が<code class="literal">t</code>なら、<em class="replaceable"><code>cat</code></em>はそのセットのメンバーであり、その文字<em class="replaceable"><code>c</code></em>はカテゴリー<em class="replaceable"><code>cat</code></em>に属することを意味します。
</p><p>以下の3つの関数では、オプション引数<em class="replaceable"><code>table</code></em>のデフォルトはカレントバッファーのカテゴリーテーブルです。
</p><pre class="synopsis"><a id="idm75847888" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">define-category</code> <em class="replaceable"><code>char</code></em> <em class="replaceable"><code>docstring</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数はカテゴリーテーブル<em class="replaceable"><code>table</code></em>にたいして、名前が<em class="replaceable"><code>char</code></em>、ドキュメントが<em class="replaceable"><code>docstring</code></em>であるような、新たなカテゴリーを定義する。
</p><p>以下に強い右から左への指向性をもつ文字(<a class="link" href="ch38s24.html" title="Bidirectional Display">Bidirectional
Display</a>を参照)にたいするカテゴリーを新たに定義して、それを特別なカテゴリーテーブル内で使用する例を示す:
</p><pre class="screen">(defvar special-category-table-for-bidi
  (let ((category-table (make-category-table))
	(uniprop-table (unicode-property-table-internal 'bidi-class)))
    (define-category ?R "Characters of bidi-class R, AL, or RLO"
                     category-table)
    (map-char-table
     #'(lambda (key val)
	 (if (memq val '(R AL RLO))
	     (modify-category-entry key ?R category-table)))
     uniprop-table)
    category-table))
</pre></blockquote></div><pre class="synopsis"><a id="idm75828688" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">category-docstring</code> <em class="replaceable"><code>category</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カテゴリーテーブル<em class="replaceable"><code>table</code></em>内のカテゴリー<em class="replaceable"><code>category</code></em>の、ドキュメント文字列をリターンする。
</p><pre class="screen">(category-docstring ?a)
     ⇒ "ASCII"
(category-docstring ?l)
     ⇒ "Latin"
</pre></blockquote></div><pre class="synopsis"><a id="idm75823440" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">get-unused-category</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>table</code></em>内で現在のところ未定義なカテゴリーの名前(文字)をリターンする。<em class="replaceable"><code>table</code></em>内で利用可能なカテゴリーがすべて使用済みなら、<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm75818576" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">category-table</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーのカテゴリーテーブルをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm75815760" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">category-table-p</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>object</code></em>がカテゴリーテーブルなら<code class="literal">t</code>、それ以外は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm75811152" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">standard-category-table</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、標準カテゴリーテーブルをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm75808336" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">copy-category-table</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>table</code></em>のコピーを構築して、それをリターンする。<em class="replaceable"><code>table</code></em>が与えられない(または<code class="literal">nil</code>)場合は、標準カテゴリーテーブルのコピーをリターンする。それ以外の場合は、もし<em class="replaceable"><code>table</code></em>がカテゴリーテーブルでなければ、エラーをシグナルする。
</p></blockquote></div><pre class="synopsis"><a id="idm75803088" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-category-table</code> <em class="replaceable"><code>table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>table</code></em>をカレントバッファーのカテゴリーテーブルにする。リターン値は<em class="replaceable"><code>table</code></em>。
</p></blockquote></div><pre class="synopsis"><a id="idm75799120" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-category-table</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これは空のカテゴリーテーブルを作成してリターンする。
This creates and returns an empty category table.
空のカテゴリーテーブルでは、どのカテゴリーも割り当てられておらず、何らかのカテゴリーに属する文字もない。
</p></blockquote></div><pre class="synopsis"><a id="idm75792208" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-category-set</code> <em class="replaceable"><code>categories</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、初期内容が文字列<em class="replaceable"><code>categories</code></em>にリストされるカテゴリーであるような、新たなカテゴリーセット(ブールベクター)をリターンする。<em class="replaceable"><code>categories</code></em>の要素はカテゴリー名であること。新たなカテゴリーセットはそれらのカテゴリーにたいして<code class="literal">t</code>、それ以外のすべてのカテゴリーにたいして<code class="literal">nil</code>をもつ。
</p><pre class="screen">(make-category-set "al")
     ⇒ #&amp;128"\0\0\0\0\0\0\0\0\0\0\0\0\2\20\0\0"
</pre></blockquote></div><pre class="synopsis"><a id="idm75786576" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-category-set</code> <em class="replaceable"><code>char</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファーのカテゴリーテーブル内で、文字<em class="replaceable"><code>char</code></em>にたいするカテゴリーセットをリターンする。これは文字<em class="replaceable"><code>char</code></em>が属するカテゴリーを記録するブールベクターである。関数<code class="literal">char-category-set</code>は、カテゴリーテーブル内にある同じブールベクターをリターンするので、メモリーの割り当ては行わない。
</p><pre class="screen">(char-category-set ?a)
     ⇒ #&amp;128"\0\0\0\0\0\0\0\0\0\0\0\0\2\20\0\0"
</pre></blockquote></div><pre class="synopsis"><a id="idm75781584" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">category-set-mnemonics</code> <em class="replaceable"><code>category-set</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カテゴリーセット<em class="replaceable"><code>category-set</code></em>を、そのセットのメンバーのカテゴリーを指定する文字を含む文字列に変換する。
</p><pre class="screen">(category-set-mnemonics (char-category-set ?a))
     ⇒ "al"
</pre></blockquote></div><pre class="synopsis"><a id="idm75777232" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">modify-category-entry</code> <em class="replaceable"><code>char</code></em> <em class="replaceable"><code>category</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>table</code></em> <em class="replaceable"><code>reset</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カテゴリーテーブル<em class="replaceable"><code>table</code></em>(デフォルトはカレントバッファーのカテゴリーテーブル)内の、<em class="replaceable"><code>char</code></em>のカテゴリーセットを変更する。<em class="replaceable"><code>char</code></em>には文字、または<code class="literal">(<em class="replaceable"><code>min</code></em>
.
<em class="replaceable"><code>max</code></em>)</code>という形式のコンスセルを指定できる。後者の場合、この関数は<em class="replaceable"><code>min</code></em>と<em class="replaceable"><code>max</code></em>の間(両端を含む)の範囲にある、すべての文字のカテゴリーセットを変更する。
</p><p>これは通常、カテゴリーセットに<em class="replaceable"><code>category</code></em>を追加することにより、変更を行う。しかし<em class="replaceable"><code>reset</code></em>が非<code class="literal">nil</code>なら、かわりに<em class="replaceable"><code>category</code></em>を削除する。
</p></blockquote></div><pre class="synopsis"><a id="idm75767248" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">describe-categories</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>buffer-or-name</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントカテゴリーテーブル内のカテゴリー仕様を説明する。これはその説明をバッファーに挿入してから、そのバッファーを表示する。<em class="replaceable"><code>buffer-or-name</code></em>が非<code class="literal">nil</code>なら、かわりにそのバッファーのカテゴリーテーブルを説明する。
</p></blockquote></div></div></body></html>