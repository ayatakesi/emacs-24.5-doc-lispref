<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 35. Abbrevs and Abbrev Expansion</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Abbrevs"/>Chapter 35. Abbrevs and Abbrev Expansion</h1></div></div></div><a id="idm75759440" class="indexterm"/><p>略語(abbreviation)、または<em class="firstterm">abbrev</em>は、より長い文字列へと展開される文字列です。ユーザーはabbrev文字列を挿入して、それを探して自動的にabbrevの展開形に置換できます。これによりタイプ量を節約できます。
</p><p>カレントで効果をもつabbrevsのセットは、<em class="firstterm">abbrevテーブル(abbrev
table)</em>内に記録されます。バッファーはそれぞれローカルにabbrevテーブルをもちますが、通常は同一のメジャーモードにあるすべてのバッファーが1つのabbrevテーブルを共有します。グローバルabbrevテーブルも存在します。通常は両者が使用されます。
</p><p>abbrevテーブルはobarrayとして表されます。obarraysについての情報は、<a class="link" href="ch09s03.html" title="Creating and Interning Symbols">Creating
Symbols</a>を参照してください。,abbrevはそれぞれ、obarray内のシンボルとして表現されます。そのシンボルの名前がabbrevで、値が展開形になります。シンボルの関数定義は展開を行うフック関数です(<a class="link" href="ch36s02.html" title="Defining Abbrevs">Defining
Abbrevs</a>を参照)。また、シンボルノプロパティセルには、使用回数やそのabbrevが展開された回数を含む、さまざまな追加プロパティが含まれます(<a class="link" href="ch36s06.html" title="Abbrev Properties">Abbrev
Properties</a>を参照)。
</p><a id="idm75750864" class="indexterm"/><p><em class="firstterm">システムabbrev(system
abbrevs)</em>と呼ばれる特定のabbrevは、ユーザーではなくメジャーモードにより定義されます。システムabbrevは、非<code class="literal">nil</code>の<code class="literal">:system</code>プロパティにより識別されます(<a class="link" href="ch36s06.html" title="Abbrev Properties">Abbrev
Properties</a>を参照)。abbrevがabbrevファイルに保存される際、システムabbrevは省略されます。<a class="link" href="ch36s03.html" title="Saving Abbrevs in Files">Abbrev
Files</a>を参照してください。
</p><p>abbrevに使用されるシンボルは通常のobarrayにinternされないので、Lisp式の読み取り結果として現れることは決してありません。実際に、通常はabbrevを扱うコードを除き、それらが使用されることはありません。したがって、それらを非標準的な方法で使用しても安全なのです。
</p><p>マイナーモードであるAbbrevモードが有効な場合、バッファーローカル変数<code class="literal">abbrev-mode</code>は非<code class="literal">nil</code>となり、そのバッファー内で、abbrevは自動的に展開されます。abbrev用のユーザーレベルのコマンドについては、section “Abbrev Mode” in <em class="citetitle">The GNU Emacs Manual</em>を参照してください。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Abbrev-Tables"/>Abbrev Tables</h1></div></div></div><a id="idm75744336" class="indexterm"/><p>このセクションでは、abbrevテーブルの作成と操作を行う方法について説明します。
</p><pre class="synopsis"><a id="idm75742800" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-abbrev-table</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>props</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、空のabbrevテーブル(シンボルを含まないobarray)を作成してリターンする。これは0で充填されたベクターである。<em class="replaceable"><code>props</code></em>は、新たなテーブルに適用されるプロパティリストである(<a class="link" href="ch36s07.html" title="Abbrev Table Properties">Abbrev
Table Properties</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm75726032" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">abbrev-table-p</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>object</code></em>がabbrevテーブルなら、非<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm75709648" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">clear-abbrev-table</code> <em class="replaceable"><code>abbrev-table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>abbrev-table</code></em>内のabbrevをすべて未定義とし、空のまま残す。
</p></blockquote></div><pre class="synopsis"><a id="idm75705552" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">copy-abbrev-table</code> <em class="replaceable"><code>abbrev-table</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>abbrev-table</code></em>のコピー(同じabbrev定義を含む新たなabbrevテーブル)をリターンする。これは名前、値、関数だけをコピーし、プロパティリストは何も<span class="emphasis"><em>コピーしない</em></span>。
</p></blockquote></div><pre class="synopsis"><a id="idm75701584" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">define-abbrev-table</code> <em class="replaceable"><code>tabname</code></em> <em class="replaceable"><code>definitions</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>docstring</code></em> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>props</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数はabbrevテーブル名(値がabbrevテーブルであるような変数)として<em class="replaceable"><code>tabname</code></em>(シンボル)を定義する。これは、そのテーブル内に<em class="replaceable"><code>definitions</code></em>に応じて、abbrevを定義する。<em class="replaceable"><code>definitions</code></em>は、<code class="literal">(<em class="replaceable"><code>abbrevname</code></em>
<em class="replaceable"><code>expansion</code></em> [<em class="replaceable"><code>hook</code></em>]
[<em class="replaceable"><code>props</code></em>...])</code>という形式の要素をもつリストである。これらの要素は引数として、<code class="literal">define-abbrev</code>に渡される。  
</p><p>オプション文字列<em class="replaceable"><code>docstring</code></em>は、変数<em class="replaceable"><code>tabname</code></em>のドキュメント文字列である。プロパティリスト<em class="replaceable"><code>props</code></em>は、abbrevテーブルに適用される(<a class="link" href="ch36s07.html" title="Abbrev Table Properties">Abbrev
Table Properties</a>を参照)。
</p><p>同一の<em class="replaceable"><code>tabname</code></em>にたいしてこの関数が複数回呼び出された場合は、元のコンテンツ全体を上書きせずに、後続の呼び出しは<em class="replaceable"><code>definitions</code></em>内の定義を<em class="replaceable"><code>tabname</code></em>に追加する(後続の呼び出しでは、<em class="replaceable"><code>definitions</code></em>内で明示的に再定義または未定義にした場合のみabbrevを上書きできる)。
</p></blockquote></div><pre class="synopsis"><a id="idm79833936" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">abbrev-table-name-list</code></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、値がabbrevテーブルであるようなシンボルのリストである。<code class="literal">define-abbrev-table</code>は、このリストに新たなabbrevテーブル名を追加する。
</p></blockquote></div><pre class="synopsis"><a id="idm79830736" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">insert-abbrev-table-description</code> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>human</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、ポイントの前に名前が<em class="replaceable"><code>name</code></em>のabbrevテーブルの説明を挿入する。引数<em class="replaceable"><code>name</code></em>は、値がabbrevテーブルであるようなシンボルである。  
</p><p><em class="replaceable"><code>human</code></em>が非<code class="literal">nil</code>なら、説明は人間向けになる。システムabbrevはそのようにリストされ、識別される。それ以外なら説明はLisp式(カレントで定義されているように<em class="replaceable"><code>name</code></em>を定義するが、システムabbrevとしては定義しないような<code class="literal">define-abbrev-table</code>呼び出し)となる(<em class="replaceable"><code>name</code></em>を使用するモードまたはパッケージは、それらを個別に<em class="replaceable"><code>name</code></em>に追加すると想定されている)。
</p></blockquote></div></div></div></body></html>