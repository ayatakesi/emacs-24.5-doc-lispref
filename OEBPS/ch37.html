<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 36. Processes</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Processes"/>Chapter 36. Processes</h1></div></div></div><a id="idm79594192" class="indexterm"/><a id="idm79593424" class="indexterm"/><a id="idm79592656" class="indexterm"/><a id="idm79591888" class="indexterm"/><p>オペレーティングシステムの用語では、<em class="firstterm">プロセス(process)</em>とはプログラムを実行できるスペースのことです。Emacsはプロセス内で実行されます。Emacs
Lispプログラムは、別のプログラムをそれら自身のプロセス内で呼び出すことができます。これらは、<em class="firstterm">親プロセス(parent
process)</em>であるEmacsプロセスの<em class="firstterm">サブプロセス(subprocesses)</em>、または<em class="firstterm">子プロセス(child
processes)</em>と呼ばれます。
</p><p>Emacsのサブプロセスは<em class="firstterm">同期(synchronous)</em>、または<em class="firstterm">非同期(asynchronous)</em>であり、それはそれらが作成された方法に依存します。同期サブプロセスを作成した際、Lispプログラムは実行を継続する前に、そのサブプロセスの終了を待機します。非同期サブプロセスを作成したときは、それをLispプログラムと並行して実行できます。この種のサブプロセスは、EmacsではLispオブジェクととして表現され、そのオブジェクトも“プロセス”と呼ばれています。Lispプログラムはサブプロセスとのやり取りや、サブプロセスの制御のために、このオブジェクトを使用できます。たとえばシグナル送信、ステータス情報の取得、プロセス出力の受信や、プロセスへ入力を送信することができます。
</p><pre class="synopsis"><a id="idm79587792" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">processp</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>object</code></em>がEmacsのサブプロセスを表すなら<code class="literal">t</code>、それ以外は<code class="literal">nil</code>をリターンする。
</p></blockquote></div><p>カレントEmacsセッションのサブプロセスに加えて、そのマシン上で実行中の他のプロセスにアクセスすることもできます。<a class="link" href="ch37s12.html" title="Accessing Other Processes">System
Processes</a>を参照してください。
</p><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Subprocess-Creation"/>Functions that Create Subprocesses</h1></div></div></div><a id="idm79577552" class="indexterm"/><a id="idm79576784" class="indexterm"/><p>内部でプログラムを実行するサブプロセスを作成するために、3つのプリミティブが存在します。1つは<code class="literal">start-process</code>で、これは非同期プロセスを作成して、プロセスオブジェクトをリターンします(<a class="link" href="ch37s04.html" title="Creating an Asynchronous Process">Asynchronous
Processes</a>を参照)。他の2つは<code class="literal">call-process</code>と<code class="literal">call-process-region</code>で、これらは同期プロセスを作成して、プロセスオブジェクとをリターンしません(<a class="link" href="ch37s03.html" title="Creating a Synchronous Process">Synchronous
Processes</a>を参照)。特定のタイプのプロセスを実行するために、これらのプリミティブを利用する、さまざまな高レベル関数が存在します。
</p><p>同期プロセスと非同期プロセスについては、以降のセクションで説明します。この3つの関数はすべて類似した様式で呼び出されるので、ここでそれらに共通の引数について説明します。
</p><a id="idm79560272" class="indexterm"/><a id="idm79559504" class="indexterm"/><a id="idm79558480" class="indexterm"/><p>すべての場合において、その関数の<em class="replaceable"><code>program</code></em>引数は、実行するプログラムを指定します。ファイルが見つからなかったり、実行できない場合は、エラーがシグナルされます。ファイル名が相対的な場合、検索するディレクトリーのリストは、変数<code class="literal">exec-path</code>に格納されています。Emacsは起動時、環境変数<code class="envar">PATH</code>の値にもとづいて、<code class="literal">exec-path</code>を初期化します。<code class="literal">exec-path</code>内では、標準的なファイル名構成要素‘<code class="literal">~</code>’、‘<code class="literal">.</code>’、‘<code class="literal">..</code>’は通常どおり解釈されますが、環境変数の置換(‘<code class="literal">$HOME</code>’等)は認識されません。それらの置換を行うには、<code class="literal">substitute-in-file-name</code>を使用してください(<a class="link" href="ch25s08.html#File-Name-Expansion" title="Functions that Expand Filenames">File
Name Expansion</a>を参照)。このリスト内で<code class="literal">nil</code>は、<code class="literal">default-directory</code>を参照します。
</p><p>プログラムの実行では、指定された名前にサフィックスの追加を試みることもできます:
</p><pre class="synopsis"><a id="idm79549904" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">exec-suffixes</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、指定されたプログラムファイル名への追加を試みるための、サフィックス(文字列)のリストである。指定されたとおりの名前を試みたいなら、このリストに<code class="literal">""</code>を含めること。デフォルト値はシステムに依存する。
</p></blockquote></div><p><span class="bold"><strong>注意してください:</strong></span>
引数<em class="replaceable"><code>program</code></em>にはプログラム名だけが含まれ、コマンドライン引数を含めることはできない。これらを提供するために、以下で説明する別の引数<em class="replaceable"><code>args</code></em>を使用しなければならない。
</p><p>サブプロセス作成関数にはそれぞれ、<em class="replaceable"><code>buffer-or-name</code></em>引数があります。これはプログラムの標準出力の行き先を指定します。これはバッファーかバッファー名であるべきです。バッファー名なら、もしそのバッファーがまだ作成されていなければ、そのバッファーを作成します。<code class="literal">nil</code>を指定することもでき、その場合はカスタム製のフィルター関数が出力を処理するのでなければ、出力を破棄するよう指示します(<a class="link" href="ch37s09.html#Filter-Functions" title="Process Filter Functions">Filter
Functions</a>、および<a class="link" href="ch19.html" title="Chapter 18. Reading and Printing Lisp Objects">Read and
Print</a>を参照のこと)。通常は、出力がランダムに混在してしまうため、同一バッファーに複数プロセスの出力を送信するのは避けるべきです。同期プロセスにたいしては、バッファーのかわりにファイルに出力を送信できます。
</p><a id="idm79543120" class="indexterm"/><p>これら3つのサブプロセス作成関数はすべて、<code class="literal">&amp;rest</code>引数である<em class="replaceable"><code>args</code></em>をもっています。<em class="replaceable"><code>args</code></em>はすべて文字列でなければならず、それらは個別のコマンドライン引数として、<em class="replaceable"><code>program</code></em>に与えられます。これらの文字列は指定されたプログラムに直接渡されるので、文字列内ではワイルドカード文字やその他のshell構成要素は特別な意味をもちません。
</p><a id="idm79540304" class="indexterm"/><p>サブプロセスはその環境をEmacsから継承しますが、<code class="literal">process-environment</code>でそれをオーバーラードするよう指定することができます。<a class="link" href="ch39s03.html" title="Operating System Environment">System
Environment</a>を参照してください。サブプロセスは自身のカレントディレクトリーを、<code class="literal">default-directory</code>の値から取得します。
</p><pre class="synopsis"><a id="idm79537360" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">exec-directory</code></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm79535312" class="indexterm"/><p>この変数の値は、GNU
Emacsとともに配布され、Emacsにより呼び出されることを意図したプログラムを含むディレクトリーの名前(文字列)である。プログラム<code class="literal">movemail</code>はそのようなプログラムの例であり、Rmailはinboxから新しいメールを読み込むためにこのプログラムを使用する。
</p></blockquote></div><pre class="synopsis"><a id="idm79533392" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">exec-path</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、サブプロセス内で実行するためのプログラムを検索するための、ディレクトリーのリストである。要素はそれぞれ、ディレクトリーの名前(文字列)、または<code class="literal">nil</code>のいずれかである。<code class="literal">nil</code>はデフォルトディレクトリー(<code class="literal">default-directory</code>の値)を意味する。
<a id="idm79529552" class="indexterm"/>
</p><p><code class="literal">exec-path</code>の値は、<em class="replaceable"><code>program</code></em>引数が絶対ファイル名でないとき、<code class="literal">call-process</code>および<code class="literal">start-process</code>により使用される。
</p><p>一般的には、<code class="literal">exec-path</code>を直接変更するべきではない。かわりにEmacs起動前に、環境変数<code class="envar">PATH</code>が適切にセットされているか確認すること。<code class="envar">PATH</code>とは独立に<code class="literal">exec-path</code>の変更を試みると、混乱した結果へと導かれ得る。
</p></blockquote></div></div></div></body></html>