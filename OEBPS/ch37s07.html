<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sending Input to Processes</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Input-to-Processes"/>Sending Input to Processes</h1></div></div></div><a id="idm79132624" class="indexterm"/><p>非同期サブプロセスは、Emacsにより入力が送信されたときに入力を受信し、それはこのセクション内の関数で行われます。これを行うには入力を送信するプロセスと、送信するための入力データを指定しなければなりません。そのデータは、サブプロセスの“標準入力”として表れます。
</p><p>オペレーティングシステムには、ptyのバッファーされた入力にたいして制限をもつものがいくつかあります。それらのシステムでは、Emacsは他の文字列の間に定期的かつ強制的に、<acronym class="acronym">EOF</acronym>を送信します。ほとんどのプログラムにたいして、これらの<acronym class="acronym">EOF</acronym>は無害です。
</p><p>サブプロセスの入力は通常、テキストをファイルに書き込むときと同じように、サブプロセスが受信する前に、コーディングシステムを使用してエンコードされます。どのコーディングシステムを使用するかを指定するには、<code class="literal">set-process-coding-system</code>を使用できます(<a class="link" href="ch37s06.html" title="Process Information">Process
Information</a>を参照)。それ以外の場合、非<code class="literal">nil</code>なら<code class="literal">coding-system-for-write</code>がコーディングシステムとなり、さもなくばデフォルトのメカニズムがコーディングシステムを決定します(<a class="link" href="ch33s10.html#Default-Coding-Systems" title="Default Coding Systems">Default
Coding Systems</a>を参照)。
</p><p>入力バッファーが一杯のため、システムがプロセスからの入力を受け取ることができないことがあります。これが発生したときは、送信関数はしばらく待機して、サブプロセスの出力を受け取り、再度送信を試みます。これは保留となっている更なる入力を読み取り、バッファーに空きを作る機会をサブプロセスに与えます。これはフィルター、センチネル、タイマーの実行も可能にするので、コードを記述する際はそれを考慮してください。
</p><p>以下の関数では、<em class="replaceable"><code>process</code></em>引数はプロセス、プロセス名、またはバッファー、バッファー名(これは<code class="literal">get-buffer-process</code>で取得されるプロセスを意味する)。<code class="literal">nil</code>は、カレントバッファーのプロセスを意味します。
</p><pre class="synopsis"><a id="idm79124688" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">process-send-string</code> <em class="replaceable"><code>process</code></em> <em class="replaceable"><code>string</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>string</code></em>のコンテンツを、標準入力として<em class="replaceable"><code>process</code></em>に送信する。たとえばファイルをリストするShellバッファーを作成するには:
</p><pre class="screen">(process-send-string "shell&lt;1&gt;" "ls\n")
     ⇒ nil
</pre></blockquote></div><pre class="synopsis"><a id="idm79099344" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">process-send-region</code> <em class="replaceable"><code>process</code></em> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>start</code></em>と<em class="replaceable"><code>end</code></em>で定義されるリージョンのテキストを、標準入力として<em class="replaceable"><code>process</code></em>に送信する。
</p><p><em class="replaceable"><code>start</code></em>と<em class="replaceable"><code>end</code></em>が、カレントバッファー内の位置を示す整数かマーカーでなければ、エラーがシグナルされる(いずれかの大小は重要ではない)。
</p></blockquote></div><pre class="synopsis"><a id="idm79093200" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">process-send-eof</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>process</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>process</code></em>が入力内の<acronym class="acronym">EOF</acronym>(end-of-file)を見ることを可能にする。<acronym class="acronym">EOF</acronym>は、すべての送信済みテキストの後になる。この関数は<em class="replaceable"><code>process</code></em>をリターンする。
</p><pre class="screen">(process-send-eof "shell")
     ⇒ "shell"
</pre></blockquote></div><pre class="synopsis"><a id="idm79087568" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">process-running-child-p</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>process</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>process</code></em>が自身の子プロセスに端末の制御を与えたかどうかを告げるだろう。値<code class="literal">t</code>はそれが真であるか、あるいはEmacsがそれを告げることができないことを意味し、<code class="literal">nil</code>はなら偽であることをEmacsは保証します。
</p></blockquote></div></div></body></html>