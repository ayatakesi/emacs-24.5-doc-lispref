<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Communicating with Serial Ports</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Serial-Ports"/>Communicating with Serial Ports</h1></div></div></div><a id="idm78307920" class="indexterm"/><a id="idm78306896" class="indexterm"/><a id="idm78305872" class="indexterm"/><p>Emacsはシリアルポートと対話できます。インタラクティブな使用、<strong class="userinput"><code>M-x
serial-term</code></strong>にたいしては端末ウィンドウをオープンし、Lispプログラム<code class="literal">make-serial-process</code>にたいしてはプロセスオブジェクトを作成します。
</p><p>シリアルポートは、クローズと再オープンなして、実行時に設定することができます。関数<code class="literal">serial-process-configure</code>によりスピード、バイトサイズ、およびその他のパラメーターを変更できます。<code class="literal">serial-term</code>で作成された端末ウィンドウでは、モードラインをクリックして設定を行うことができます。
</p><p>シリアル接続はプロセスオブジェクトとして表され、サブプロセスやネットワークプロセスと同様の方法で使用できます。これによりデータの送受信や、シリアルポートの設定ができます。しかし、シリアルプロセスオブジェクトにプロセスIDはありません。それにたいしてシグナルの送信はできず、ステータスコードは他のタイプのプロセスオブジェクトとは異なります。プロセスオブジェクトへの<code class="literal">delete-process</code>、またはプロセスバッファーにたいする<code class="literal">kill-buffer</code>は接続をクローズしますが、そのシリアルポートに接続されたデバイスに影響はありません。
</p><p>関数<code class="literal">process-type</code>は、シリアルポート接続を表すプロセスオブジェクトにたいする、シンボル<code class="literal">serial</code>をリターンします。
</p><p>シリアルポートはGNU/Linux、Unix、およびMS Windowsのシステムで利用できます。
</p><pre class="synopsis"><a id="idm78298448" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">serial-term</code> <em class="replaceable"><code>port</code></em> <em class="replaceable"><code>speed</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>新たなバッファー内で、シリアルポートにたいする端末エミュレーターを開始する。<em class="replaceable"><code>port</code></em>は、接続先のシリアルポートの名前である。たとえばUnixでは、これは<code class="filename">/dev/ttyS0</code>のようになるだろう。MS
Windowsでは、<code class="filename">COM1</code>や<code class="filename">\\.\COM10</code>のようになるかもしれない(Lisp文字列ではバックスラッシュは2重にする)。
</p><p><em class="replaceable"><code>speed</code></em>は、ビット毎秒でのシリアルポートのスピードである。一般的な値は9600。そのバッファーはTermモードになる。このバッファーで使用するコマンドについては、section “Term
Mode” in <em class="citetitle">The GNU Emacs Manual</em>を参照のこと。モードラインメニューから、スピードと設定を変更できる。
</p></blockquote></div><pre class="synopsis"><a id="idm78278992" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">make-serial-process</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>args</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、プロセスとバッファーを作成する。引数は、キーワード/引数ペアーで指定する。以下は意味のあるキーワードのリストで、最初の2つ(<em class="replaceable"><code>port</code></em>と<em class="replaceable"><code>speed</code></em>)は必須である:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">:port <em class="replaceable"><code>port</code></em></code>
</span></dt><dd><p>これは、シリアルポートの名前である。UnixおよびGNUシステムでは<code class="filename">/dev/ttyS0</code>のようなファイル名、Windowsでは<code class="filename">COM1</code>、<code class="filename">COM9</code>より高位のポートでは<code class="filename">\\.\COM10</code>のようになるかもしれない(Lisp文字列ではバックスラッシュは2重にする)。
</p></dd><dt><span class="term"><code class="literal">:speed <em class="replaceable"><code>speed</code></em></code>
</span></dt><dd><p>ビット毎秒でのシリアルポートのスピード。この関数は<code class="literal">serial-process-configure</code>を呼び出すことにより、スピードを操作する。この関数の更なる詳細については、以降のドキュメントを参照されたい。
</p></dd><dt><span class="term"><code class="literal">:name <em class="replaceable"><code>name</code></em></code>
</span></dt><dd><p>そのプロセスの名前。<em class="replaceable"><code>name</code></em>が与えられなければ、<em class="replaceable"><code>port</code></em>が同様にプロセス名の役目を果たす。
</p></dd><dt><span class="term"><code class="literal">:buffer <em class="replaceable"><code>buffer</code></em></code>
</span></dt><dd><p>そのプロセスに関連付けられたバッファー。値はバッファー、またはそれがバッファーの名前であるような文字列かもしれない。出力を処理するために出力ストリーム、あるいはフィルター関数を指定しなければ、プロセス出力はそのバッファーの終端に出力される。<em class="replaceable"><code>buffer</code></em>が与えられなければ、そのプロセスバッファーの名前は、<code class="literal">:name</code>キーワードから取得される。
</p></dd><dt><span class="term"><code class="literal">:coding <em class="replaceable"><code>coding</code></em></code>
</span></dt><dd><p><em class="replaceable"><code>coding</code></em>は、このプロセスにたいする読み書きに使用される、コーディングシステムを指定する。<em class="replaceable"><code>coding</code></em>がコンス<code class="literal">(<em class="replaceable"><code>decoding</code></em>
.
<em class="replaceable"><code>encoding</code></em>)</code>なら、読み取りに<em class="replaceable"><code>decoding</code></em>、書き込みには<em class="replaceable"><code>encoding</code></em>が使用される。指定されない場合のデフォルトは、データ自身から判断されるコーディングシステムである。
</p></dd><dt><span class="term"><code class="literal">:noquery <em class="replaceable"><code>query-flag</code></em></code>
</span></dt><dd><p>プロセスqueryフラグを、<em class="replaceable"><code>query-flag</code></em>に初期化する。<a class="link" href="ch37s11.html" title="Querying Before Exit">Query Before
Exit</a>を参照のこと。未指定の場合のフラグのデフォルトは<code class="literal">nil</code>。
</p></dd><dt><span class="term"><code class="literal">:stop <em class="replaceable"><code>bool</code></em></code>
</span></dt><dd><p><em class="replaceable"><code>bool</code></em>が非<code class="literal">nil</code>なら、“stopped”の状態でプロセスを開始する。stopped状態では、シリアルプロセスは入力データを受け付けないが、出力データの送信は可能。stopped状態のクリアーは<code class="literal">continue-process</code>、セットは<code class="literal">stop-process</code>で行う。
</p></dd><dt><span class="term"><code class="literal">:filter <em class="replaceable"><code>filter</code></em></code>
</span></dt><dd><p>プロセスフィルターとして、<em class="replaceable"><code>filter</code></em>をインストールする。
</p></dd><dt><span class="term"><code class="literal">:sentinel <em class="replaceable"><code>sentinel</code></em></code>
</span></dt><dd><p>プロセスセンチネルとして、<em class="replaceable"><code>sentinel</code></em>をインストールする。
</p></dd><dt><span class="term"><code class="literal">:plist <em class="replaceable"><code>plist</code></em></code>
</span></dt><dd><p>プロセスの初期plistとして、<em class="replaceable"><code>plist</code></em>をインストールする。
</p></dd><dt><span class="term"><code class="literal">:bytesize</code>
, </span><span class="term"><code class="literal">:parity</code>
, </span><span class="term"><code class="literal">:stopbits</code>
, </span><span class="term"><code class="literal">:flowcontrol</code>
</span></dt><dd><p>これらは、<code class="literal">make-serial-process</code>が呼び出す、<code class="literal">serial-process-configure</code>により処理される。
</p></dd></dl></div><p>後の設定により変更され得るオリジナルの引数リストは、関数<code class="literal">process-contact</code>を通じて利用可能。
</p><p>以下に例を示す:
</p><pre class="screen">(make-serial-process :port "/dev/ttyS0" :speed 9600)
</pre></blockquote></div><pre class="synopsis"><a id="idm78237648" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">serial-process-configure</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>args</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm78234704" class="indexterm"/><a id="idm78233936" class="indexterm"/><a id="idm78233168" class="indexterm"/><a id="idm78232400" class="indexterm"/><a id="idm78231632" class="indexterm"/><p>この関数は、シリアルポート接続を設定する。引数はキーワード/引数ペアーで指定する。与えられない属性は、そのプロセスのカレントの設定(関数<code class="literal">process-contact</code>を通じて利用可能)から再初期化されるか、妥当なデフォルトにセットされる。以下の引数が定義されている:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">:process <em class="replaceable"><code>process</code></em></code>
, </span><span class="term"><code class="literal">:name <em class="replaceable"><code>name</code></em></code>
, </span><span class="term"><code class="literal">:buffer <em class="replaceable"><code>buffer</code></em></code>
, </span><span class="term"><code class="literal">:port <em class="replaceable"><code>port</code></em></code>
</span></dt><dd><p>設定するプロセスを識別するために、これらの引数のいずれかを与えられる。これらの引数が何も与えられなければ、カレントバッファーのプロセスが使用される。
</p></dd><dt><span class="term"><code class="literal">:speed <em class="replaceable"><code>speed</code></em></code>
</span></dt><dd><p>ビット毎秒、別名<em class="firstterm">ボーレート(baud
rate)</em>での、シリアルポートのスピード。値には任意の数字が可能だが、ほとんどのシリアルポートは1200から115200の間の数少ない定義済みの値でのみ機能し、もっとも一般的な値は9600である。<em class="replaceable"><code>speed</code></em>が<code class="literal">nil</code>なら、この関数は他のすべての引数を無視して、そのポートを設定しない。これは接続を通じて送信された‘<code class="literal">AT</code>’コマンドでのみ設定可能な、Bluetooth/シリアル変換アダプターのような、特殊なシリアルポートで有用かもしれない。<em class="replaceable"><code>speed</code></em>にたいする値<code class="literal">nil</code>は、<code class="literal">make-serial-process</code>または<code class="literal">serial-term</code>の呼び出しにより、すでにオープン済みの接続にたいしてのみ有効である。
</p></dd><dt><span class="term"><code class="literal">:bytesize <em class="replaceable"><code>bytesize</code></em></code>
</span></dt><dd><p>ビット/バイトでの数値で、7か8を指定できる。<em class="replaceable"><code>bytesize</code></em>が与えられない、または<code class="literal">nil</code>の場合のデフォルトは8。
</p></dd><dt><span class="term"><code class="literal">:parity <em class="replaceable"><code>parity</code></em></code>
</span></dt><dd><p>値には<code class="literal">nil</code>(パリティなし)、シンボル<code class="literal">odd</code>(奇数パリティ)、シンボル<code class="literal">even</code>(偶数パリティ)を指定できる。<em class="replaceable"><code>parity</code></em>が与えられない場合のデフォルトはパリティなし。
</p></dd><dt><span class="term"><code class="literal">:stopbits <em class="replaceable"><code>stopbits</code></em></code>
</span></dt><dd><p>各バイトの送信を終了するために使用されるストップビットの数値。<em class="replaceable"><code>stopbits</code></em>には1か2が可能。<em class="replaceable"><code>stopbits</code></em>が与えられない、または<code class="literal">nil</code>の場合のデフォルトは1。
</p></dd><dt><span class="term"><code class="literal">:flowcontrol <em class="replaceable"><code>flowcontrol</code></em></code>
</span></dt><dd><p>この接続にたいして使用するフロー制御のタイプで、<code class="literal">nil</code>(フロー制御を使用しない)、シンボル<code class="literal">hw</code>(RTS/CTSハードウェアフロー制御)、シンボル<code class="literal">sw</code>(XON/XOFFソフトウェアフロー制御)のいずれか。<em class="replaceable"><code>flowcontrol</code></em>が与えられない場合のデフォルトは、フロー制御なし。
</p></dd></dl></div><p>シリアルポートの初期設定のために、<code class="literal">make-serial-process</code>は内部的に<code class="literal">serial-process-configure</code>を呼び出す。
</p></blockquote></div></div></body></html>