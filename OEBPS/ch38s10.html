<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Size of Displayed Text</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Size-of-Displayed-Text"/>Size of Displayed Text</h1></div></div></div><a id="idm81245392" class="indexterm"/><a id="idm81244624" class="indexterm"/><p>すべての文字が同じ幅をもつ訳ではないので、以下の関数により文字の幅をチェックできます。関連する関数については、<a class="link" href="ch32s17.html#Primitive-Indent" title="Indentation Primitives">Primitive
Indent</a>と<a class="link" href="ch30s02.html#Screen-Lines" title="Motion by Screen Lines">Screen Lines</a>を参照してください。
</p><pre class="synopsis"><a id="idm81242192" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-width</code> <em class="replaceable"><code>char</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字<em class="replaceable"><code>char</code></em>がカレントバッファーに表示された場合(つまりそのバッファーのディスプレイテーブルがあれば、それを考慮に入れる。<a class="link" href="ch38s21.html#Display-Tables" title="Display Tables">Display
Tables</a>を参照されたい)の幅を、列数でリターンする。タブ文字の幅は、通常は<code class="literal">tab-width</code>である(<a class="link" href="ch38s21.html#Usual-Display" title="Usual Display Conventions">Usual
Display</a>を参照)。
</p></blockquote></div><pre class="synopsis"><a id="idm81237072" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">string-width</code> <em class="replaceable"><code>string</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字列<em class="replaceable"><code>string</code></em>がカレントバッファー、および選択されたウィンドウに表示された場合の幅を、列数でリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm81233488" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">truncate-string-to-width</code> <em class="replaceable"><code>string</code></em> <em class="replaceable"><code>width</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>start-column</code></em> <em class="replaceable"><code>padding</code></em> <em class="replaceable"><code>ellipsis</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>string</code></em>の一部を、列数<em class="replaceable"><code>width</code></em>にフィット新たな文字列としてリターンする。
</p><p><em class="replaceable"><code>string</code></em>が<em class="replaceable"><code>width</code></em>に満たない場合、その文字列終端が結果の終端となる。<em class="replaceable"><code>string</code></em>内の1つの複数列文字が、列<em class="replaceable"><code>width</code></em>を超えて跨がる場合、その文字は結果に含まれない。つまり結果は<em class="replaceable"><code>width</code></em>より短くなるかもしれないが、それを超えることはできない。
</p><p>オプション引数<em class="replaceable"><code>start-column</code></em>は、開始列を指定する。これが非<code class="literal">nil</code>なら、その文字列の最初の<em class="replaceable"><code>start-column</code></em>列は、値から省かれる。<em class="replaceable"><code>string</code></em>内の1つの複数列文字が、列<em class="replaceable"><code>start-column</code></em>を超えて跨がる場合、その文字は結果に含まれない。
</p><p>オプション引数<em class="replaceable"><code>padding</code></em>が非<code class="literal">nil</code>なら、結果となる文字列の幅を正確に<em class="replaceable"><code>width</code></em>列に拡張するために、パディング文字が追加される。結果文字列が<em class="replaceable"><code>width</code></em>より短ければ、結果文字列の終端にパディング文字が使用される。<em class="replaceable"><code>string</code></em>内の1つの複数列文字が列<em class="replaceable"><code>start-column</code></em>を跨ぐ場合は、先頭にもパディング文字が使用される。
</p><p><em class="replaceable"><code>ellipsis</code></em>が非<code class="literal">nil</code>なら、それは<em class="replaceable"><code>string</code></em>の表示幅が<em class="replaceable"><code>ellipsis</code></em>の表示幅以下でなければ、<em class="replaceable"><code>width</code></em>を超えてしまう場合に、<em class="replaceable"><code>string</code></em>の終端(任意のパディングを含む)を置き換える文字列であること。<em class="replaceable"><code>ellipsis</code></em>が非<code class="literal">nil</code>、かつ文字列以外なら、それは<code class="literal">"..."</code>を意味する。
</p><pre class="screen">(truncate-string-to-width "\tab\t" 12 4)
     ⇒ "ab"
(truncate-string-to-width "\tab\t" 12 4 ?\s)
     ⇒ "    ab  "
</pre></blockquote></div><p>以下の関数は、あるテキストが与えられたウィンドウに表示されたときのサイズを、ピクセル単位でリターンします。この関数は、テキストを含むためにウィンドウを十分大きくするために、<code class="literal">fit-window-to-buffer</code>(<a class="link" href="ch28s04.html" title="Resizing Windows">Resizing
Windows</a>を参照)と<code class="literal">fit-frame-to-buffer</code>(<a class="link" href="ch29s03.html#Size-and-Position" title="Frame Size And Position">Size and
Position</a>を参照)により使用されます。
</p><pre class="synopsis"><a id="idm81200848" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">window-text-pixel-size</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em> <em class="replaceable"><code>from</code></em> <em class="replaceable"><code>to</code></em> <em class="replaceable"><code>x-limit</code></em> <em class="replaceable"><code>y-limit</code></em> <em class="replaceable"><code>mode-and-header-line</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>window</code></em>のバッファーのテキストサイズを、ピクセル単位でリターンする。<em class="replaceable"><code>window</code></em>は生きたウィンドウでなければならず、デフォルトは選択されたウィンドウ。リターン値は、任意のテキスト行の最大ピクセル幅と、すべてのテキスト行の最大ピクセル高さのコンスである。
</p><p>オプション引数<em class="replaceable"><code>from</code></em>が非<code class="literal">nil</code>なら、それは考慮すべき最初のテキスト位置を指定し、デフォルトはそのバッファーのアクセス可能な最小の位置である。<em class="replaceable"><code>from</code></em>が<code class="literal">t</code>なら、それは改行文字ではない、アクセス可能な最小位置を使用する。オプション引数<em class="replaceable"><code>to</code></em>が非<code class="literal">nil</code>なら、それは考慮すべき最後のテキスト位置を指定し、デフォルトはそのバッファーのアクセス可能な最大の位置である。<em class="replaceable"><code>to</code></em>が<code class="literal">t</code>なら、それは改行文字ではない、アクセス可能な最大位置を使用する。
</p><p>オプション引数<em class="replaceable"><code>x-limit</code></em>が非<code class="literal">nil</code>なら、それはリターンされ得る、最大ピクセル幅を指定する。<em class="replaceable"><code>x-limit</code></em>が<code class="literal">nil</code>または省略された場合には、<em class="replaceable"><code>window</code></em>のbody(<a class="link" href="ch28s03.html" title="Window Sizes">Window
Sizes</a>を参照)のピクセル幅を使用する。これは、呼び出し側が<em class="replaceable"><code>window</code></em>の幅の変更を意図しない場合に有用である。それ以外なら、呼び出し側はここで想定される<em class="replaceable"><code>window</code></em>のbodyの、最大幅を指定するべきである。X座標を超えるテキストの<em class="replaceable"><code>x-limit</code></em>は無視される。長い行の幅の計算には多くの時間を要する可能性があるので、特にいずれにせよ切り詰められるであろう長い行を含むバッファーの場合には、必要に応じて、この引数の値を小さくすることは、よいアイデアである。
</p><p>オプション引数<em class="replaceable"><code>y-limit</code></em>が非<code class="literal">nil</code>なら、それはリターンされ得る、最大ピクセル高さを指定する。Y座標を超えるテキストの<em class="replaceable"><code>y-limit</code></em>は無視される。大きなバッファーのピクセル高さの計算には多くの時間を要する可能性があるので、特に呼び出し側がバッファーのサイズを知らない場合、この変数の指定は合理的である。
</p><p>オプション引数<em class="replaceable"><code>mode-and-header-line</code></em>が<code class="literal">nil</code>または省略された場合は、リターン値に<em class="replaceable"><code>window</code></em>のモードラインとヘッダーラインの高さを含めないことを意味する。これがシンボル<code class="literal">mode-line</code>または<code class="literal">header-line</code>のいずれかなら、それらが存在する場合は、リターン値にそのラインの高さだけを含める。これが<code class="literal">t</code>なら、存在する場合は両方の高さをリターン値に含める。
</p></blockquote></div></div></body></html>