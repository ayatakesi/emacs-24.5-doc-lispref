<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Line Height</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Line-Height"/>Line Height</h1></div></div></div><a id="idm81180240" class="indexterm"/><a id="idm81179472" class="indexterm"/><p>各ディスプレイ行のトータル高さは、その行のコンテンツ高さに、そのディスプレイ上部または下部にオプションで追加される垂直行スペーシングを加えて構成されます。
</p><p>行のコンテンツ高さは、もしあれば最後の改行を含む、そのディスプレイ行の文字またはイメージの最大高さです(継続されるディスプレイ行には最後の改行が含まれない)。特にこれより大きい高さを指定しなければ、これがデフォルトの行高さになります(一般的には、これはデフォルトのフレームフォント高さに等しい)。
</p><p>より大きい行高さを明示的に指定するためにはディスプレイ行の絶対高さ、または垂直スペースを指定することによる、複数の方法が存在します。しかし何を指定したかに関わらず、実際の行高さがデフォルトの高さより小さくなることはありません。
</p><a id="idm81177552" class="indexterm"/><p>改行は、その改行で終わるディスプレイ行のトータル高さを制御する、テキストプロパティまたはオーバーレイプロパティ<code class="literal">line-height</code>をもつことができます。
</p><p>プロパティの値が<code class="literal">t</code>なら、改行文字はその行の表示高さにたいして効果をもたず、可視なコンテンツだけが高さを決定します。これはイメージ間に追加のブランク領域をもたない、小さなイメージ(またはイメージスライス)にたいして有用です。
</p><p>プロパティの値が<code class="literal">(<em class="replaceable"><code>height</code></em>
<em class="replaceable"><code>total</code></em>)</code>という形式のリストなら、これはディスプレイ行の<span class="emphasis"><em>下部</em></span>に余分なスペースを追加します。最初にEmacsは、その行の<span class="emphasis"><em>上部</em></span>の余分なスペースを制御するための高さspecとして、<em class="replaceable"><code>height</code></em>を使用します。それから行のトータル高さを<em class="replaceable"><code>total</code></em>にするために、行の<span class="emphasis"><em>下部</em></span>に必要なスペースを追加します。この場合、行のスペーシングを指定する他の方法は無視されます。
</p><a id="idm81167312" class="indexterm"/><p>他の種類のプロパティ値は高さspec(height
spec)です。これは行の高さを指定する数値に変換されます。高さspecを記述するためには複数の方法があります。以下はそれらが数値に変換される方法です:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal"><em class="replaceable"><code>integer</code></em></code>
</span></dt><dd><p>高さspecが正の整数なら、高さの値はその整数。
</p></dd><dt><span class="term"><code class="literal"><em class="replaceable"><code>float</code></em></code>
</span></dt><dd><p>高さspecが浮動小数点数<em class="replaceable"><code>float</code></em>なら、高さ数値はそのフレームのデフォルト行高さの<em class="replaceable"><code>float</code></em>倍。
</p></dd><dt><span class="term"><code class="literal">(<em class="replaceable"><code>face</code></em> . <em class="replaceable"><code>ratio</code></em>)</code>
</span></dt><dd><p>高さspecがこのフォーマットのコンスなら、高さ数値はフェイス<em class="replaceable"><code>face</code></em>の高さの<em class="replaceable"><code>ratio</code></em>倍。<em class="replaceable"><code>ratio</code></em>には任意の型の数値を指定でき、<code class="literal">nil</code>は1のratioを意味する。<em class="replaceable"><code>face</code></em>が<code class="literal">t</code>なら、カレントフェイスを参照する。
</p></dd><dt><span class="term"><code class="literal">(nil . <em class="replaceable"><code>ratio</code></em>)</code>
</span></dt><dd><p>高さspecがこのフォーマットのコンスなら、高さ数値はその行のコンテンツ高さの<em class="replaceable"><code>ratio</code></em>倍。
</p></dd></dl></div><p>したがって、任意の有効な種々の高さspecにより、ピクセル単位で高さが決定されます。行のコンテンツ高さがこれより小さければ、Emacsは指定されたトータル高さになるよう、余分な垂直スペースを行の上部に追加します。
</p><p><code class="literal">line-height</code>プロパティを指定しない場合、その行の高さは行のコンテンツ高さとに行スペーシングを追加して構成されます。Emacsの異なるさまざまな部分のテキストにたいして、行スペーシングを指定する複数の方法が存在します。
</p><p>グラフィカルなディスプレイでは、フレームパラメーター<code class="literal">line-spacing</code>(<a class="link" href="ch29s03.html#Layout-Parameters" title="Layout Parameters">Layout
Parameters</a>を参照)を使用することにより、フレーム内のすべての行にたいして行スペーシングを指定できます。しかし<code class="literal">line-spacing</code>のデフォルト値が非<code class="literal">nil</code>なら、それはそのフレームのフレームパラメーター<code class="literal">line-spacing</code>をオーバーライドします。整数は行の下部に配するピクセル数を指定します。浮動小数点数はフレームのデフォルト行高さに相対的にスペーシングを指定します。
</p><a id="idm81152080" class="indexterm"/><p>バッファーローカル変数<code class="literal">line-spacing</code>を通じて、バッファー内のすべての行の行スペーシングを指定できます。整数は行の下部に配するピクセル数を指定します。浮動小数点数はデフォルトフレーム行高さに相対的にスペーシングを指定します。これは、そのフレームにたいして指定された行スペーシングをオーバーライドします。
</p><a id="idm81150416" class="indexterm"/><p>最後に改行は、改行で終わるディスプレイ行にたいして、デフォルトフレーム行スペーシングおよびバッファーローカル変数<code class="literal">line-spacing</code>をオーバーライドする、テキストプロパティまたはオーバーレイプロパティ<code class="literal">line-spacing</code>をもつことができます。
</p><p>種々の方法により、これらのメカニズムは各行のスペーシングにたいするLisp値を指定します。値は高さspecで、これは上述したLisp値に変換されます。しかしこの場合高さ数値は行高さではなく行スペーシングを指定します。
</p><p>テキスト端末では、行スペーシングは変更できません。
</p></div></body></html>