<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Faces</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Faces"/>Faces</h1></div></div></div><a id="idm81146448" class="indexterm"/><p><em class="firstterm">フェイス(face)</em>とはフォント、フォアグラウンドカラー、バックグラウンドカラー、オプションのアンダーライン等のテキストを表示するための、グラフィカルな属性のコレクションのことです。フェイスはEmacsがバッファー内、同様にモードラインのようなフレームの他の部分で、テキストを表示する方法を制御します。
</p><a id="idm81145040" class="indexterm"/><p>フェイスを表現する1つの方法として、<code class="literal">(:foreground "red" :weight
bold)</code>のような属性のプロパティリストがあります。このようなリストは、<em class="firstterm">anonymousフェイス(anonymous
face)</em>と呼ばれます。たとえば<code class="literal">face</code>テキストプロパティとしてanonymousフェイスを割り当てることができ、Emacsは指定された属性でテキストを表示するでしょう。<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>を参照してください。
</p><a id="idm81141968" class="indexterm"/><p>より一般的には、フェイスは<em class="firstterm">フェイス名(face
name)</em>を通じて参照されます。これはフェイス属性のセットに関連付けられたLispシンボル<a href="#ftn.idm81140432" class="footnote" id="idm81140432"><sup class="footnote">[19]</sup></a>。です。名前つきフェイスは<code class="literal">defface</code>マクロを使用して定義できます(<a class="link" href="ch38s12.html#Defining-Faces" title="Defining Faces">Defining
Faces</a>を参照)。Emacsにはいくつかの標準名前つきフェイスが同梱されています(<a class="link" href="ch38s12.html#Basic-Faces" title="Basic Faces">Basic Faces</a>を参照)。
</p><p>Emacsの多くの箇所で名前つきフェイスが要求され、anonymousフェイスは受け入れられません。これらには<a class="link" href="ch38s12.html#Attribute-Functions" title="Face Attribute Functions">Attribute
Functions</a>に記述される関数、および変数<code class="literal">font-lock-keywords</code>(<a class="link" href="ch23s06.html#Search_002dbased-Fontification" title="Search-based Fontification">Search-based
Fontification</a>を参照)が含まれます。特に明記しないかぎり、名前つきフェイスの参照だけに用語<em class="firstterm">フェイス</em>を使用することとします。
</p><pre class="synopsis"><a id="idm81135568" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">facep</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>object</code></em>が名前つきフェイス(フェイス名の役目をもつLispシンボルまたは文字列)なら、非<code class="literal">nil</code>をリターンする。それ以外なら<code class="literal">nil</code>をリターンする。
</p></blockquote></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Face-Attributes"/>Face Attributes</h2></div></div></div><a id="idm81130320" class="indexterm"/><p><em class="firstterm">フェイス属性(Face
attributes)</em>は、フェイスの視覚的外観を決定します。以下はすべてのフェイス属性と、それらの可能な値と効果に関するテーブルです。
</p><p>以下の値とは別に、各フェイス属性は値<code class="literal">unspecified</code>をもつことができます。この特殊な値は、フェイスがその属性を直接指定しないことを意味します。<code class="literal">unspecified</code>属性は、Emacsにかわりに親フェイス(以下の<code class="literal">:inherit</code>属性の記述を参照)を参照すること、それに失敗した場合は基礎フェイス(<a class="link" href="ch38s12.html#Displaying-Faces" title="Displaying Faces">Displaying
Faces</a>を参照)を参照することを指示します。<code class="literal">default</code>フェイスはすべての属性を指定しなければなりません。
</p><p>これらの属性のいくつかは、特定の種類のディスプレイにおいてのみ意味があります。ディスプレイが特定の属性を処理できなければ、その属性は無視されます。
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">:family</code>
</span></dt><dd><p>フォントファミリーまたはフォントセット(文字列)。フォントファミリーに関する詳細は、See section “Fonts” in <em class="citetitle">The GNU
Emacs
Manual</em>を参照のこと。関数<code class="literal">font-family-list</code>(以下参照)は、利用可能なファミリー名のリストをリターンする。フォントセットに関する情報は、<a class="link" href="ch38s12.html#Fontsets" title="Fontsets">Fontsets</a>を参照されたい。
</p></dd><dt><span class="term"><code class="literal">:foundry</code>
</span></dt><dd><p><code class="literal">:family</code>属性により指定されるフォントファミリーにたいする<em class="firstterm">フォントfoundry(font
foundry)</em>(文字列)。section “Fonts” in <em class="citetitle">The GNU Emacs Manual</em>を参照のこと。
</p></dd><dt><span class="term"><code class="literal">:width</code>
</span></dt><dd><p>相対的な文字幅。これはシンボル<code class="literal">ultra-condensed</code>、<code class="literal">extra-condensed</code>、<code class="literal">condensed</code>、<code class="literal">semi-condensed</code>、<code class="literal">normal</code>、<code class="literal">semi-expanded</code>、<code class="literal">expanded</code>、<code class="literal">extra-expanded</code>、<code class="literal">ultra-expanded</code>のいずれかであること。
</p></dd><dt><span class="term"><code class="literal">:height</code>
</span></dt><dd><p>フォントの高さ。もっともシンプルなケースでは1/10ポイントを単位とする整数。
</p><p>値には<em class="firstterm">基礎フェイス(underlying
face)</em>にたいして相対的に高さを指定する浮動小数点数、または関数も指定できる(<a class="link" href="ch38s12.html#Displaying-Faces" title="Displaying Faces">Displaying
Faces</a>を参照)。浮動小数点数は基礎フェイスの高さをスケーリングする量を指定する。関数値は基礎フェイスの高さを単一の引数として呼び出され、新たなフェイスの高さをリターンする。関数が整数を引数として渡された場合には、整数をリターンしなければならない。
</p><p>デフォルトフェイスの高さは、整数を使用して指定しなければならない。浮動小数点数および関数は受け入れられない。
</p></dd><dt><span class="term"><code class="literal">:weight</code>
</span></dt><dd><p>フォントのweight。(太字から細字順に)シンボル<code class="literal">ultra-bold</code>、<code class="literal">extra-bold</code>、<code class="literal">bold</code>、<code class="literal">semi-bold</code>、<code class="literal">normal</code>、<code class="literal">semi-light</code>、<code class="literal">light</code>、<code class="literal">extra-light</code>、<code class="literal">ultra-light</code>のいずれか。可変輝度テキストをサポートするテキスト端末では、normalより大なweightはより高輝度、小なweightはより低輝度で表示される。
</p><a id="idm81093328" class="indexterm"/></dd><dt><span class="term"><code class="literal">:slant</code>
</span></dt><dd><p>フォントのslant。シンボル<code class="literal">italic</code>、<code class="literal">oblique</code>、<code class="literal">normal</code>、<code class="literal">reverse-italic</code>、<code class="literal">reverse-oblique</code>のいずれか。可変輝度テキストをサポートするテキスト端末では、slantされたテキストはhalf-brightで表示される。
</p></dd><dt><span class="term"><code class="literal">:foreground</code>
</span></dt><dd><p>フォアグラウンドカラー(文字列)。値にはシステム定義済みカラー、または16進カラー仕様を指定できる。<a class="link" href="ch29s20.html" title="Color Names">Color
Names</a>を参照のこと。白黒ディスプレイでは、特定のグレー色調が点描パターンで実装されている。
</p></dd><dt><span class="term"><code class="literal">:distant-foreground</code>
</span></dt><dd><p>代替えのフォアグラウンドカラー(文字列)。これは<code class="literal">:foreground</code>と似ているが、使用されるであろうフォアグラウンドカラーが、バックグラウンドカラーに近いときのみフォアグラウンドカラーとして使用される点が異なる。これはたとえばテキストをマーク時(リージョンフェイス)に有用である。そのテキストが、リージョンフェイスとして可視なフォアグラウンドをもつ場合は、そのフォアグラウンドが使用される。フォアグラウンドがリージョンフェイスのバックグラウンドに近ければ、テキストを可読にするために<code class="literal">:distant-foreground</code>が使用される。
</p></dd><dt><span class="term"><code class="literal">:background</code>
</span></dt><dd><p>バックグラウンドカラー(文字列)。値にはシステム定義済みカラー、または16進カラー仕様を指定できる。<a class="link" href="ch29s20.html" title="Color Names">Color Names</a>を参照のこと。
</p><a id="idm81082704" class="indexterm"/></dd><dt><span class="term"><code class="literal">:underline</code>
</span></dt><dd><p>文字にアンダーラインを引くべきか否かと、その方法。<code class="literal">:underline</code>属性として可能な値は以下のとおり:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nil</code>
</span></dt><dd><p>アンダーラインを引かない。
</p></dd><dt><span class="term"><code class="literal">t</code>
</span></dt><dd><p>そのフェイスのフォアグラウンドカラーでアンダーラインを引く。
</p></dd><dt><span class="term"><em class="replaceable"><code>color</code></em>
</span></dt><dd><p>文字列<em class="replaceable"><code>color</code></em>で指定されたカラーでアンダーラインを引く。
</p></dd><dt><span class="term"><code class="literal">(:color <em class="replaceable"><code>color</code></em> :style <em class="replaceable"><code>style</code></em>)</code>
</span></dt><dd><p><em class="replaceable"><code>color</code></em>は文字列、またはそのフェイスのフォアグラウンドカラーを意味するシンボル<code class="literal">foreground-color</code>。属性<code class="literal">:color</code>の省略は、そのフェイスのフォアグラウンドカラーの使用を意味する。<em class="replaceable"><code>style</code></em>には直線を意味する<code class="literal">line</code>、または波線を意味する<code class="literal">wave</code>いずれかのシンボルであること。属性<code class="literal">:style</code>の省略は直線を意味する。
</p></dd></dl></div><a id="idm81066576" class="indexterm"/></dd><dt><span class="term"><code class="literal">:overline</code>
</span></dt><dd><p>文字にオーバーラインを引くべきか否かと、そのカラー。値が<code class="literal">t</code>なら、そのフェイスのフォアグラウンドカラーを使用してオーバーラインを引く。値が文字列なら、そのカラーを使用してオーバーラインを引く。値<code class="literal">nil</code>はオーバーラインを引かないことを意味する。
</p><a id="idm81063504" class="indexterm"/></dd><dt><span class="term"><code class="literal">:strike-through</code>
</span></dt><dd><p>文字に取り消し線を引くべきか否かと、そのカラー。値は<code class="literal">:overline</code>で使用される値と同じ。
</p><a id="idm81060944" class="indexterm"/><a id="idm81060176" class="indexterm"/></dd><dt><span class="term"><code class="literal">:box</code>
</span></dt><dd><p>文字周囲に枠(box)を描画するか否か、そのカラー、枠線の幅、3D外観。以下は<code class="literal">:box</code>の可能な値と意味である:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">nil</code>
</span></dt><dd><p>枠を描画しない。
</p></dd><dt><span class="term"><code class="literal">t</code>
</span></dt><dd><p>幅1の枠線、フォアグラウンドカラーで枠を描画する。
</p></dd><dt><span class="term"><em class="replaceable"><code>color</code></em>
</span></dt><dd><p>幅1の枠線、カラー<em class="replaceable"><code>color</code></em>で枠を描画する。
</p></dd><dt><span class="term"><code class="literal">(:line-width <em class="replaceable"><code>width</code></em> :color <em class="replaceable"><code>color</code></em> :style <em class="replaceable"><code>style</code></em>)</code>
</span></dt><dd><p>この方法では、枠のすべての形相を明示的に指定できる。値<em class="replaceable"><code>width</code></em>は描画する線の幅を指定し、デフォルトは1。負の幅<em class="replaceable"><code>-n</code></em>は、基礎テキストのスペースを占有する線幅<em class="replaceable"><code>n</code></em>を意味し、文字の高さまたは幅を避けることができる。
</p><p>値<em class="replaceable"><code>color</code></em>は描画するカラーを指定する。シンプルな枠線ではフェイスのフォアグラウンドカラー、3D枠線ではフェイスのバックグラウンドカラーがデフォルト。
</p><p>値<em class="replaceable"><code>style</code></em>は3D枠線を描画するか否かを指定する。<code class="literal">released-button</code>なら、枠は押下された3Dボタンのような外観、<code class="literal">pressed-button</code>なら押下されていない3Dボタンのような外観、<code class="literal">nil</code>または省略された場合は2D枠線が使用される。
</p></dd></dl></div></dd><dt><span class="term"><code class="literal">:inverse-video</code>
</span></dt><dd><p>文字が反転表示されて表示されるべきか否か。値は<code class="literal">t</code>(反転表示する)、または<code class="literal">nil</code>(反転表示しない)であること。
</p></dd><dt><span class="term"><code class="literal">:stipple</code>
</span></dt><dd><p>バックグラウンドの点描(ビットマップ)。
</p><p>値には文字列を指定でき、それは外部形式Xビットマップデータを含むファイルの名前であること。ファイルは変数<code class="literal">x-bitmap-file-path</code>にリストされるディレクトリー内で検索される。
</p><p>かわりに<code class="literal">(<em class="replaceable"><code>width</code></em> <em class="replaceable"><code>height</code></em>
<em class="replaceable"><code>data</code></em>)</code>という形式のリストにより、ビットマップで直接値を指定できる。ここで<em class="replaceable"><code>width</code></em>と<em class="replaceable"><code>height</code></em>はピクセル単位によるサイズ、<em class="replaceable"><code>data</code></em>は行単位でビットマップのrawビットを含む文字列。各行は文字列内で連続する<span class="mathphrase">(<em class="replaceable"><code>width</code></em>
+ 7) / 8</span>バイトを占める(最善の結果を得るためにはユニバイト文字列であるべき)。これは各行が常に少なくとも、1バイト全体を占めることを意味する。
</p><p>値が<code class="literal">nil</code>なら、点描パターンを使用しないことを意味する。
</p><p>これは特定のグレー色調を処理するために自動的に使用されるので、通常はstipple属性のセットは必要ない。
</p></dd><dt><span class="term"><code class="literal">:font</code>
</span></dt><dd><p>そのフェイスの表示に使用されるフォント。値はフォントオブジェクトであること。フォントオブジェクト、フォントスペース、フォントエンティティーに関する情報は、<a class="link" href="ch38s12.html#Low_002dLevel-Font" title="Low-Level Font Representation">Low-Level
Font</a>を参照のこと。
</p><p><code class="literal">set-face-attribute</code>(<a class="link" href="ch38s12.html#Attribute-Functions" title="Face Attribute Functions">Attribute
Functions</a>を参照)を使用してこの属性を指定する際にはフォントspec、フォントエンティティー、または文字列を与えることもできる。Emacsはそのような値を適切なフォントオブジェクトに変換して、実際の属性値としてそのフォントオブジェクトを格納する。文字列を指定する場合、その文字列のコンテンツはフォント名であること(section “Fonts” in <em class="citetitle">The GNU Emacs
Manual</em>を参照)。フォント名がワイルドカードを含むXLFDなら、Emacsはそれらのワイルドカードに最初にマッチするフォントを選択する。この属性の指定により、<code class="literal">:family</code>、<code class="literal">:foundry</code>、<code class="literal">:width</code>、<code class="literal">:height</code>、<code class="literal">:weight</code>、<code class="literal">:slant</code>の属性値も変更される。
</p><a id="idm81026256" class="indexterm"/></dd><dt><span class="term"><code class="literal">:inherit</code>
</span></dt><dd><p>属性を継承するフェイス名、またはフェイス名のリスト。継承フェイス由来の属性は、基礎フェイスより高い優先度で、基礎フェイスの場合と同じような方法でマージされる(<a class="link" href="ch38s12.html#Displaying-Faces" title="Displaying Faces">Displaying
Faces</a>を参照)。フェイスのリストが使用された場合、リスト内先頭側フェイスの属性が末尾側フェイスの属性をオーバーライドする。
</p></dd></dl></div><pre class="synopsis"><a id="idm81023440" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-family-list</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、利用可能なフォントファミリー名のリストをリターンする。オプション引数<em class="replaceable"><code>frame</code></em>はそのテキストが表示されるフレームを指定する。これが<code class="literal">nil</code>なら選択されたフレームが使用される。
</p></blockquote></div><pre class="synopsis"><a id="idm81014736" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">underline-minimum-offset</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、アンダーラインが引かれたテキスト表示時に、ベースラインとアンダーライン間の最小距離を、ピクセル単位で指定する。
</p></blockquote></div><pre class="synopsis"><a id="idm81012048" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">x-bitmap-file-path</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は<code class="literal">:stipple</code>属性のビットマップファイルを検索する、ディレクトリーのリストを指定する。
</p></blockquote></div><pre class="synopsis"><a id="idm81008848" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">bitmap-spec-p</code> <em class="replaceable"><code>object</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>object</code></em>が、<code class="literal">:stipple</code>(上記参照)での使用に適す有効なビットマップ仕様なら<code class="literal">t</code>、それ以外なら<code class="literal">nil</code>をリターンする。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Defining-Faces"/>Defining Faces</h2></div></div></div><a id="idm81002960" class="indexterm"/><a id="idm81002192" class="indexterm"/><p>フェイスを定義する通常の方法は、<code class="literal">defface</code>マクロを通じて定義する方法です。このマクロはフェイス名(シンボル)を、デフォルトの<em class="firstterm">フェイスspec(face
spec)</em>と関連付けます。フェイスspecは、任意の与えられた端末上でフェイスがどの属性をもつべきかを指定する構成です。たとえばあるフェイスspecは、高カラー端末ではあるフォアグラウンドカラーを指定し、低カラー端末では異なるフォアグラウンドカラーを指定するかもしれません。
</p><p>値がフェイス名であるような変数を作りたがる人がいます。ほとんどの場合、これは必要ありません。通常手順は、<code class="literal">defface</code>でフェイスを定義して、その名前を直接使用することです。
</p><pre class="synopsis"><a id="idm80998864" class="indexterm"/><span class="category"><span class="bold"><strong>Macro</strong></span>:</span> <code class="function">defface</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>spec</code></em> <em class="replaceable"><code>doc</code></em> [<em class="replaceable"><code>keyword</code></em> <em class="replaceable"><code>value</code></em>]<em class="replaceable"><code>…</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このマクロは、<em class="replaceable"><code>spec</code></em>によりデフォルトフェイスspecが与えられるような、名前つきフェイスとして<em class="replaceable"><code>face</code></em>を宣言する。シンボル<em class="replaceable"><code>face</code></em>はクォートせず、‘<code class="literal">-face</code>’で終わらないこと(冗長であろう)。引数<em class="replaceable"><code>doc</code></em>は、そのフェイスにたいするドキュメント文字列。追加の<em class="replaceable"><code>keyword</code></em>引数は、<code class="literal">defgroup</code>および<code class="literal">defcustom</code>の場合と同じ意味をもつ(<a class="link" href="ch15.html#Common-Keywords" title="Common Item Keywords">Common
Keywords</a>を参照)。
</p><p>If <em class="replaceable"><code>face</code></em> already has a default face spec, this macro does nothing.
</p><p>デフォルトフェイスspecは、何もカスタマイゼーション(<a class="link" href="ch15.html" title="Chapter 14. Customization Settings">Customization</a>を参照)の効果がないときに、<em class="replaceable"><code>face</code></em>の外観を決定する。<em class="replaceable"><code>face</code></em>が、(Customテーマやinitファイルから読み込んだカスタマイズにより)すでにカスタマイズ済みなら、その外観はデフォルトフェイスspecの<em class="replaceable"><code>spec</code></em>をオーバーライドする、カスタムフェイスspecにより決定される。しかしその後カスタマイゼーションが削除されたなら、<em class="replaceable"><code>face</code></em>の外観は再びそのデフォルトフェイスspecにより決定されるだろう。
</p><p>例外として、Emacs
Lispモードで<strong class="userinput"><code>C-M-x</code></strong>(<code class="literal">eval-defun</code>)から<code class="literal">defface</code>を評価した場合は、<code class="literal">eval-defun</code>の特別な機能により、<code class="literal">defface</code>が何を指示するかをフェイスが正確に反映するように、そのフェイス上の任意のカスタムフェイスをオーバーライドする。
</p><p><em class="replaceable"><code>spec</code></em>引数は、異なる種別の端末上でそのフェイスがどのような外観で表示されるべきかを示す、<em class="firstterm">フェイスspec</em>である。これは各要素が以下の形式であるようなalistであること
</p><pre class="screen">(<em class="replaceable"><code>display</code></em> . <em class="replaceable"><code>plist</code></em>)
</pre><p><em class="replaceable"><code>display</code></em>は端末のクラス(以下参照)を指定する。<em class="replaceable"><code>plist</code></em>は、そのような端末上でフェイスがどのような外観かを指定する、フェイス属性とその値からなるプロパティリストであること。後方互換性のために、<code class="literal">(<em class="replaceable"><code>display</code></em>
<em class="replaceable"><code>plist</code></em>)</code>のように要素を記述することもできる。
</p><p><em class="replaceable"><code>spec</code></em>の要素の<em class="replaceable"><code>display</code></em>の部分は、その要素がマッチする端末を決定する。与えられた端末にたいして複数の要素がマッチした場合は、最初にマッチした要素がその端末にたいして使用される。<em class="replaceable"><code>display</code></em>には以下の3つが可能:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">default</code>
</span></dt><dd><p><em class="replaceable"><code>spec</code></em>のこの要素は、どの端末にもマッチしない。かわりにすべての端末に適用されるデフォルトを指定する。この要素が仕様された場合は、<em class="replaceable"><code>spec</code></em>の最初の要素でなければならない。この後の要素はこれらのデフォルトの一部、またはすべてをオーバーライドできる。
</p></dd><dt><span class="term"><code class="literal">t</code>
</span></dt><dd><p><em class="replaceable"><code>spec</code></em>のこの要素は、すべての端末にマッチする。したがって<em class="replaceable"><code>spec</code></em>の後続要素が使用されることはない。通常<code class="literal">t</code>は、<em class="replaceable"><code>spec</code></em>の最後(または唯一)の要素として使用される。
</p></dd><dt><span class="term">リスト
</span></dt><dd><p><em class="replaceable"><code>display</code></em>がリストなら、各要素は<code class="literal">(<em class="replaceable"><code>characteristic</code></em>
<em class="replaceable"><code>value</code></em>…)</code>という形式をもつこと。ここで<em class="replaceable"><code>characteristic</code></em>は端末をクラス分けする方法、<em class="replaceable"><code>value</code></em>は<em class="replaceable"><code>display</code></em>に適用されるべき可能なクラス分類である。<em class="replaceable"><code>characteristic</code></em>で利用可能な値は:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">type</code>
</span></dt><dd><p>その端末が使用するウィンドウシステムの種類で<code class="literal">graphic</code>(任意のグラフィック対応ディスプレイ)、<code class="literal">x</code>、<code class="literal">pc</code>(MS-DOSコンソール)、<code class="literal">w32</code>
(MS Windows 9X/NT/2K/XP)、または<code class="literal">tty</code>(グラフィック非対応ディスプレイ)のいずれか。<a class="link" href="ch38s23.html" title="Window Systems">window-system</a>を参照のこと。
</p></dd><dt><span class="term"><code class="literal">class</code>
</span></dt><dd><p>その端末がサポートするカラーの種類で、<code class="literal">color</code>、<code class="literal">grayscale</code>、または<code class="literal">mono</code>のいずれか。
</p></dd><dt><span class="term"><code class="literal">background</code>
</span></dt><dd><p>バックグラウンドの種類で<code class="literal">light</code>か<code class="literal">dark</code>のいずれか。
</p></dd><dt><span class="term"><code class="literal">min-colors</code>
</span></dt><dd><p>その端末がサポートするべき最小カラー数を表す整数。端末の<code class="literal">display-color-cells</code>の値が少なくとも指定された整数なら、その端末にマッチする。
</p></dd><dt><span class="term"><code class="literal">supports</code>
</span></dt><dd><p>その端末が<em class="replaceable"><code>value</code></em>…で与えられたフェイス属性を表示可能か否か(<a class="link" href="ch38s12.html#Face-Attributes" title="Face Attributes">Face
Attributes</a>を参照)。このテストがどのように行われるかについてのより正確な情報は、<a class="link" href="ch29s23.html#Display-Face-Attribute-Testing">Display Face Attribute
Testing</a>を参照のこと。
</p></dd></dl></div><p>与えられた<em class="replaceable"><code>characteristic</code></em>にたいして、<em class="replaceable"><code>display</code></em>の要素が複数の<em class="replaceable"><code>value</code></em>を指定する場合は、いずれの値も許容され得る。<em class="replaceable"><code>display</code></em>が複数の要素をもつ場合、各要素は異なる<em class="replaceable"><code>characteristic</code></em>を指定すること。その端末の<span class="emphasis"><em>それぞれ</em></span>のcharacteristicは、<em class="replaceable"><code>display</code></em>内で指定された値のいずれか1つとマッチしなければならない。
</p></dd></dl></div></blockquote></div><p>たとえば以下は、標準フェイス<code class="literal">highlight</code>の定義です:
</p><pre class="screen">(defface highlight
  '((((class color) (min-colors 88) (background light))
     :background "darkseagreen2")
    (((class color) (min-colors 88) (background dark))
     :background "darkolivegreen")
    (((class color) (min-colors 16) (background light))
     :background "darkseagreen2")
    (((class color) (min-colors 16) (background dark))
     :background "darkolivegreen")
    (((class color) (min-colors 8))
     :background "green" :foreground "black")
    (t :inverse-video t))
  "Basic face for highlighting."
  :group 'basic-faces)
</pre><p>内部的には、Emacsはフェイスのシンボルプロパティ<code class="literal">face-defface-spec</code>内にそれぞれのフェイスのデフォルトspecを格納します(<a class="link" href="ch09s04.html" title="Symbol Properties">Symbol
Properties</a>を参照)。<code class="literal">saved-face</code>プロパティは、カスタマイゼーションバッファーを使用してユーザーが保存した、任意のフェイスspecを格納します。<code class="literal">customized-face</code>プロパティは、カレントセッションにたいしてカスタマイズされた保存されていないフェイスspecを格納します。そして<code class="literal">theme-face</code>プロパティは、そのフェイスにたいするアクティブなカスタマイゼーションセッティングと、フェイスspecをもつCustomテーマを関連付けるalistです。そのフェイスのドキュメント文字列は、<code class="literal">face-documentation</code>プロパティ内に格納されます。
</p><p>通常フェイスは<code class="literal">defface</code>を使用して1回だけ宣言され、その外観にたいするそれ以上の変更はCustomizeフレームワーク(Customizeユーザーインターフェース、または<code class="literal">custom-set-faces</code>関数を通じて。<a class="link" href="ch15s05.html" title="Applying Customizations">Applying
Customizations</a>を参照されたい)、またはフェイスリマッピング(<a class="link" href="ch38s12.html#Face-Remapping" title="Face Remapping">Face
Remapping</a>を参照)により行われます。Lispから触接フェイスspec変更を要する稀な機会では、<code class="literal">face-spec-set</code>関数を使用できます。
</p><pre class="synopsis"><a id="idm80931152" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-spec-set</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>spec</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>spec-type</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<code class="literal">face</code>にたいするフェイスspecとして、<em class="replaceable"><code>spec</code></em>を適用する。<em class="replaceable"><code>spec</code></em>は、上述した<code class="literal">defface</code>にたいするフェイスspecであること。
</p><p>この関数は、もしそれが既存のものでなければ、有効なフェイス名として<em class="replaceable"><code>face</code></em>を定義して、既存フレームのその属性を(再)計算することも行う。
</p><a id="idm80924496" class="indexterm"/><p>引数<em class="replaceable"><code>spec-type</code></em>は、どのspecをセットするべきかを決定する。これが<code class="literal">nil</code>または<code class="literal">face-override-spec</code>なら、この関数は<em class="firstterm">オーバーライドspec(override
spec)</em>をセットする。これは<em class="replaceable"><code>face</code></em>上の他のすべてのフェイスspecをオーバーライドする。<code class="literal">customized-face</code>または<code class="literal">saved-face</code>なら、この関数はカスタマイズされたspec、または保存されたカスタムspecをセットする。<code class="literal">face-defface-spec</code>なら、この関数はデフォルトフェイスspec(<code class="literal">defface</code>によりセットされるものと同一)をセットする。<code class="literal">reset</code>なら、この関数は<em class="replaceable"><code>face</code></em>からすべてのカスタマイゼーションspecとオーバーライドspecをクリアーする(この場合、<em class="replaceable"><code>spec</code></em>の値は無視される)。<em class="replaceable"><code>spec-type</code></em>にたいする他のすべての値は、内部的な使用のために予約済みである。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Attribute-Functions"/>Face Attribute Functions</h2></div></div></div><a id="idm80916176" class="indexterm"/><p>このセクションでは、名前つきフェイスの属性に直接アクセスしたり、変更する関数を説明します。
</p><pre class="synopsis"><a id="idm80914768" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-attribute</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>attribute</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame</code></em>上の<em class="replaceable"><code>face</code></em>にたいする、属性<em class="replaceable"><code>attribute</code></em>の値をリターンする。
</p><p><em class="replaceable"><code>frame</code></em>が<code class="literal">nil</code>なら、それは選択されたフレームを意味する(<a class="link" href="ch29s09.html" title="Input Focus">Input
Focus</a>を参照)。<em class="replaceable"><code>frame</code></em>が<code class="literal">t</code>なら、この関数は新たに作成されるフレームにたいする、指定された属性の値をリターンする(これは下記の<code class="literal">set-face-attribute</code>を使用して何らかの値を指定していなければ、通常は<code class="literal">unspecified</code>である)。
</p><p><em class="replaceable"><code>inherit</code></em>が<code class="literal">nil</code>なら、<em class="replaceable"><code>face</code></em>により定義される属性だけが考慮されるので、リターンされる値は<code class="literal">unspecified</code>、または相対的な値かもしれない。<em class="replaceable"><code>inherit</code></em>が非<code class="literal">nil</code>なら、<em class="replaceable"><code>face</code></em>の<em class="replaceable"><code>attribute</code></em>の定義が、<code class="literal">:inherit</code>属性で指定されたフェイスとマージされる。しかしリターンされる値は依然として<code class="literal">unspecified</code>、または相対的な値かもしれない。<em class="replaceable"><code>inherit</code></em>がフェイス、またはフェイスのリストなら、指定された絶対的な値になるまで、結果はそのフェイス(1つ以上)と更にマージされる。
</p><p>リターン値が指定されていて、かつ絶対的であることを保証するためには、<em class="replaceable"><code>inherit</code></em>にたいして<code class="literal">default</code>の値を使用すること。(常に完全に指定される)<code class="literal">default</code>フェイスとマージすることにより、すべての未指定または相対的な値は解決されるだろう。
</p><p>たとえば
</p><pre class="screen">(face-attribute 'bold :weight)
     ⇒ bold
</pre></blockquote></div><pre class="synopsis"><a id="idm80897104" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-attribute-relative-p</code> <em class="replaceable"><code>attribute</code></em> <em class="replaceable"><code>value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>value</code></em>がフェイス属性<em class="replaceable"><code>attribute</code></em>の値として使用された際に相対的なら、非<code class="literal">nil</code>をリターンする。This
function returns non- if , when used as the value of the face attribute , is
relative.これはフェイスリスト内の後続のフェイス、または継承した他のフェイスが由来となる、任意の値で完全にオーバーライドするのではなく、変更されるであろうことを意味する。
</p><p>すべての属性にたいして、<code class="literal">unspecified</code>は相対的な値である。<code class="literal">:height</code>にたいしては、浮動小数点数と関数値も相対的である。
</p><p>たとえば:
</p><pre class="screen">(face-attribute-relative-p :height 2.0)
     ⇒ t
</pre></blockquote></div><pre class="synopsis"><a id="idm80889936" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-all-attributes</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>face</code></em>の属性のalistをリターンする。結果の要素は、<code class="literal">(<em class="replaceable"><code>attr-name</code></em>
.
<em class="replaceable"><code>attr-value</code></em>)</code>という形式の、名前/値ペアーである。オプション引数<em class="replaceable"><code>frame</code></em>は、リターンするべき<em class="replaceable"><code>face</code></em>の定義をもつフレームを指定する。省略または<code class="literal">nil</code>なら、リターン値には新たに作成されるフレームにたいする、<em class="replaceable"><code>face</code></em>のデフォルト属性が記述される。
</p></blockquote></div><pre class="synopsis"><a id="idm80882512" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">merge-face-attribute</code> <em class="replaceable"><code>attribute</code></em> <em class="replaceable"><code>value1</code></em> <em class="replaceable"><code>value2</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>value1</code></em>がフェイス属性<em class="replaceable"><code>attribute</code></em>にたいして相対的な値なら、基礎的な値<em class="replaceable"><code>value2</code></em>とマージしてリターンする。それ以外の場合、<em class="replaceable"><code>value1</code></em>がフェイス属性<em class="replaceable"><code>attribute</code></em>にたいして絶対的な値なら、<em class="replaceable"><code>value1</code></em>を変更せずにリターンする。
</p></blockquote></div><p>通常、Emacsは各フレームのフェイス属性を自動的に計算するために、各フェイスのフェイスspecを使用します(<a class="link" href="ch38s12.html#Defining-Faces" title="Defining Faces">Defining
Faces</a>を参照)。関数<code class="literal">set-face-attribute</code>は、特定またはすべてのフレームのフェイスに直接属性を割り当てることにより、この計算をオーバーライドできます。この関数は主として、内部的な使用を意図したものです。
</p><pre class="synopsis"><a id="idm77970896" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-face-attribute</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>arguments</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame</code></em>にたいする<em class="replaceable"><code>face</code></em>の1つ以上の属性をセットする。この方法で指定された属性は、<em class="replaceable"><code>face</code></em>に属するフェイスspec(1つ以上)をオーバーライドする。
</p><p>余分の引数<em class="replaceable"><code>arguments</code></em>は、セットするべき属性と、それらの値を指定する。これらは、(<code class="literal">:family</code>や<code class="literal">:underline</code>のような)属性名と、値が交互になるよう構成されていること。すなわち、
</p><pre class="screen">(set-face-attribute 'foo nil :weight 'bold :slant 'italic)
</pre><p>これは属性<code class="literal">:weight</code>を<code class="literal">bold</code>、.属性<code class="literal">:slant</code>を<code class="literal">italic</code>にセットする。
</p><p><em class="replaceable"><code>frame</code></em>が<code class="literal">t</code>なら、この関数は新たに作成されるフレームにたいする、デフォルト属性をセットする。<em class="replaceable"><code>frame</code></em>が<code class="literal">nil</code>なら、この関数はすべての既存フレーム、同様に新たに作成されるフレームにたいして、その属性をセットする。
</p></blockquote></div><p>以下のコマンドと関数は主として、古いバージョンのEmacsにたいする互換性のために提供されます。これらは<code class="literal">set-face-attribute</code>を呼び出すことにより機能します。これらの<em class="replaceable"><code>frame</code></em>引数にたいする値<code class="literal">t</code>と<code class="literal">nil</code>は、<code class="literal">set-face-attribute</code>および<code class="literal">face-attribute</code>の場合と同様に処理されます。コマンドがインタラクティブに呼び出された場合は、ミニバッファーを使用して引数を読み取ります。
</p><pre class="synopsis"><a id="idm80851024" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">set-face-foreground</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>color</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><pre class="synopsis"><a id="idm80847184" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">set-face-background</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>color</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これらはそれぞれ<em class="replaceable"><code>face</code></em>の<code class="literal">:foreground</code>属性、または<code class="literal">:background</code>属性に<em class="replaceable"><code>color</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80841040" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">set-face-stipple</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:stipple</code>属性に、<em class="replaceable"><code>pattern</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80831312" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">set-face-font</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>font</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:font</code>属性に、<em class="replaceable"><code>font</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80825680" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-face-bold</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>bold-p</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:weight</code>属性にたいして、<em class="replaceable"><code>bold-p</code></em>が<code class="literal">nil</code>なら<em class="replaceable"><code>normal</code></em>、それ以外なら<em class="replaceable"><code>bold</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80818768" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-face-italic</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>italic-p</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:slant</code>属性にたいして、<em class="replaceable"><code>italic-p</code></em>が<code class="literal">nil</code>なら<em class="replaceable"><code>normal</code></em>、それ以外なら<em class="replaceable"><code>italic</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80811856" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-face-underline</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>underline</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:underline</code>属性に、<em class="replaceable"><code>underline</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80806224" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-face-inverse-video</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>inverse-video-p</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは<em class="replaceable"><code>face</code></em>の<code class="literal">:inverse-video</code>属性に、<em class="replaceable"><code>inverse-video-p</code></em>をセットする。
</p></blockquote></div><pre class="synopsis"><a id="idm80800592" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">invert-face</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これはフェイス<em class="replaceable"><code>face</code></em>のフォアグラウンドカラーとバックグラウンドカラーを交換する。
</p></blockquote></div><p>以下は、フェイスの属性を調べる関数です。これらは主として、古いバージョンのEmacsとの互換性のために提供されます。これらにたいして<em class="replaceable"><code>frame</code></em>を指定しなければ選択されたフレームを、<code class="literal">t</code>なら新たなフレームにたいするデフォルトデータを参照します。フェイスがその属性にたいして何の値も定義していなければ、<code class="literal">unspecified</code>がリターンされます。<em class="replaceable"><code>inherit</code></em>が<code class="literal">nil</code>なら、そのフェイスにより直接定義された属性だけがリターンされます。<em class="replaceable"><code>inherit</code></em>が非<code class="literal">nil</code>なら、そのフェイスの<code class="literal">:inherit</code>属性により指定される任意のフェイスを、<em class="replaceable"><code>inherit</code></em>がフェイスまたはフェイスのリストなら、指定された属性が見つかるまで、それらも考慮されます。リターンされる値が常に指定された値であることを保証するためには、<em class="replaceable"><code>inherit</code></em>にたいして値<code class="literal">default</code>を使用してください。
</p><pre class="synopsis"><a id="idm80790864" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-font</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>のフォント名をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80786512" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-foreground</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><pre class="synopsis"><a id="idm80782672" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-background</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これらの関数はそれぞれ、フェイス<em class="replaceable"><code>face</code></em>のフォアグラウンドカラーまたはバックグラウンドカラーを、文字列としてリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80777808" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-stipple</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>のバックグラウンド点描パターンの名前、もしなければ<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80772560" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-bold-p</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は<em class="replaceable"><code>face</code></em>の<code class="literal">:weight</code>属性がnormalよりbold寄り(<code class="literal">semi-bold</code>、<code class="literal">bold</code>、
<code class="literal">extra-bold</code>、<code class="literal">ultra-bold</code>のいずれか)なら、非<code class="literal">nil</code>、それ以外なら<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80764240" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-italic-p</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>face</code></em>の<code class="literal">:slant</code>属性が<code class="literal">italic</code>か<code class="literal">oblique</code>なら非<code class="literal">nil</code>、それ以外なら<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm78041296" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-underline-p</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>が非<code class="literal">nil</code>の<code class="literal">:underline</code>属性を指定する場合は、非<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm78035024" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-inverse-video-p</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>inherit</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>が非<code class="literal">nil</code>の<code class="literal">:inverse-video</code>属性を指定する場合は、非<code class="literal">nil</code>をリターンする。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Displaying-Faces"/>Displaying Faces</h2></div></div></div><a id="idm80743632" class="indexterm"/><a id="idm80742864" class="indexterm"/><p>Emacsが与えられたテキスト断片を表示する際、そのテキストの視覚的外観は異なるソースから描画されるフェイスにより決定されるかもしれません。これら種々のソースが、特定の文字にいたいして複数のフェイスを指定する場合、Emacsはそれらのさまざまなフェイスの属性をマージします。以下に、Emacsがフェイスをマージする順序を優先度順に記します:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>そのテキストが特別なグリフで構成される場合、そのグリフは特定のフェイスを指定できる。<a class="link" href="ch38s21.html#Glyphs" title="Glyphs">Glyphs</a>を参照のこと。
</p></li><li class="listitem"><p>アクティブなリージョンにテキストがある場合、Emacsは<code class="literal">region</code>フェイスを使用してそれをハイライトする。section “Standard
Faces” in <em class="citetitle">The GNU Emacs Manual</em>を参照のこと。
</p></li><li class="listitem"><p>非<code class="literal">nil</code>の<code class="literal">face</code>属性をもつオーバーレイにテキストがある場合、Emacsはそのプロパティにより指定されるフェイス(1つ以上)を適用する。そのオーバーレイが<code class="literal">mouse-face</code>プロパティをもち、マウスがそのオーバーレイに“十分に近い”場合、Emacsはかわりに<code class="literal">mouse-face</code>で指定されるフェイスまたはフェイス属性を適用する。<a class="link" href="ch38s09.html#Overlay-Properties" title="Overlay Properties">Overlay
Properties</a>を参照のこと。
</p><p>1つの文字を複数のオーバーレイがカバーする場合は、高優先度のオーバーレイが低優先度のオーバーレイをオーバーライドする。<a class="link" href="ch38s09.html" title="Overlays">Overlays</a>を参照のこと。
</p></li><li class="listitem"><p>そのテキストが<code class="literal">face</code>または<code class="literal">mouse-face</code>プロパティを含む場合、Emacsは指定されたフェイスおよびフェイス属性を適用する。<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>を参照のこと(これはFont Lockモードのフェイス適用方法である。<a class="link" href="ch23s06.html" title="Font Lock Mode">Font Lock Mode</a>を参照されたい)。
</p></li><li class="listitem"><p>そのテキストが選択されたウィンドウのモードラインにある場合、Emacsは<code class="literal">mode-line</code>フェイスを適用する。選択されていないウィンドウのモードラインでは、Emacsは<code class="literal">mode-line-inactive</code>フェイスを使用する。ヘッダーラインにたいしては、Emacsは<code class="literal">header-line</code>フェイスを適用する。
</p></li><li class="listitem"><p>先行ステップの間に、与えられた属性が指定されなければ、Emacsは<code class="literal">default</code>フェイスの属性を適用する。
</p></li></ul></div><p>各ステージにおいて、フェイスが有効な<code class="literal">:inherit</code>属性をもつ場合、Emacsは値<code class="literal">unspecified</code>をもつすべての属性が、親フェイス(1つ以上)由来で描画される、対応する値をもつものとして扱います。<a class="link" href="ch38s12.html#Face-Attributes" title="Face Attributes">Face
Attributes</a>を参照してください。親フェイスでも、属性がunspecifiedのままかもしれないことに注意してください。その場合には、フェイスマージの次レベルでも、その属性はunspecifiedのままです。
</p></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Face-Remapping"/>Face Remapping</h2></div></div></div><a id="idm80722256" class="indexterm"/><p>変数<code class="literal">face-remapping-alist</code>は、あるフェイスの外観のバッファーローカル、またはグローバルな変更にたいして使用されます。たとえばこれは、<code class="literal">text-scale-adjust</code>コマンド(section “Text
Scale” in <em class="citetitle">The GNU Emacs Manual</em>を参照)の実装に使用されています。
</p><pre class="synopsis"><a id="idm80715344" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">face-remapping-alist</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、要素が<code class="literal">(<em class="replaceable"><code>face</code></em>
.
<em class="replaceable"><code>remapping</code></em>)</code>という形式をもつalistである。これによりEmacsは、フェイス<em class="replaceable"><code>face</code></em>をもつ任意のテキストを、通常の<em class="replaceable"><code>face</code></em>の定義ではなく、<em class="replaceable"><code>remapping</code></em>で表示する。
</p><p><em class="replaceable"><code>remapping</code></em>には、テキストプロパティ<code class="literal">face</code>にたいして適切な任意のフェイスspec、すなわちフェイス(フェイス名または属性/値ペアーのプロパティリスト)、またはフェイスのリストのいずれかを指定できる。詳細は、<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>の<code class="literal">face</code>テキストプロパティの記述を参照のこと。<em class="replaceable"><code>remapping</code></em>はリマップされるフェイスにたいる、完全な仕様としての役目をもつ。これは通常の<em class="replaceable"><code>face</code></em>を変更せずに置き換える。
</p><p><code class="literal">face-remapping-alist</code>がバッファーローカルなら、そのローカル値はそのバッファーでのみ効果をもつ。
</p><p>注意:
フェイスのリマッピングは再帰的ではない。<em class="replaceable"><code>remapping</code></em>が同じフェイス名<em class="replaceable"><code>face</code></em>を参照する場合、直接または<em class="replaceable"><code>remapping</code></em>内の他の何らかのフェイスの<code class="literal">:inherit</code>属性を通じて、その参照は<em class="replaceable"><code>face</code></em>の通常の定義を使用する。たとえば<code class="literal">mode-line</code>フェイスが、<code class="literal">face-remapping-alist</code>内の以下のエントリーでリマップされる場合:
</p><pre class="screen">(mode-line italic mode-line)
</pre><p><code class="literal">mode-line</code>フェイスの新たな定義は<code class="literal">italic</code>フェイス、および(リマップされていない)<span class="emphasis"><em>通常</em></span>の<code class="literal">mode-line</code>フェイスの定義から継承される。
</p></blockquote></div><a id="idm80700368" class="indexterm"/><a id="idm80699600" class="indexterm"/><p>以下の関数は、<code class="literal">face-remapping-alist</code>にたいする高レベルなインターフェースを実装します。ほとんどのLispコードは、リマッピングが他の場所に適用されてしまうのを避けるために、<code class="literal">face-remapping-alist</code>を直接セットするのではなく、これらの関数を使用するべきです。これらの関数はバッファーローカルなリマッピングを意図しており、すべてが副作用として<code class="literal">face-remapping-alist</code>をバッファーローカルにします。これらは、以下の形式の<code class="literal">face-remapping-alist</code>エントリーを管理します
</p><pre class="screen">  (<em class="replaceable"><code>face</code></em> <em class="replaceable"><code>relative-spec-1</code></em> <em class="replaceable"><code>relative-spec-2</code></em> <em class="replaceable"><code>...</code></em> <em class="replaceable"><code>base-spec</code></em>)
</pre><p>上述したように、<em class="replaceable"><code>relative-spec-N</code></em>と<em class="replaceable"><code>base-spec</code></em>はそれぞれ、フェイス名または属性/値ペアーのプロパティリストです。<em class="firstterm">相対的リマッピング(relative
remapping)</em>エントリー<em class="replaceable"><code>relative-spec-N</code></em>はそれぞれ、<code class="literal">face-remap-add-relative</code>および<code class="literal">face-remap-remove-relative</code>関数により管理されます。これらはテキストサイズ変更のような、単純な変更を意図しています。<em class="firstterm">ベースリマッピング(base
remapping)</em>エントリー<em class="replaceable"><code>base-spec</code></em>は最低の優先度をもち、<code class="literal">face-remap-set-base</code>および<code class="literal">face-remap-reset-base</code>関数により管理されます。これは、メジャーモードが制御下のバッファーでフェイスをリマップするために用いることを意図しています。
</p><pre class="synopsis"><a id="idm80688976" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-remap-add-relative</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>specs</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファー内のフェイス<em class="replaceable"><code>face</code></em>にたいして、相対的リマッピングとして、<em class="replaceable"><code>specs</code></em>内にフェイスspecを追加する。残りの引数<em class="replaceable"><code>specs</code></em>はフェイス名のリスト、または属性/値ペアーのプロパティリストという、いずれかの形式であること。
</p><p>リターン値は、“cookie”としての役目をもつLispオブジェクトである。後でそのリマッピングの削除を要する場合は、引数として<code class="literal">face-remap-remove-relative</code>にこのオブジェクトを渡すことができる。
</p><pre class="screen">;; `escape-glyph'フェイスを`highlight'と`italic'
;; の組み合わせにリマップ:
(face-remap-add-relative 'escape-glyph 'highlight 'italic)

;; `default'フェイスのサイズを50%増加:
(face-remap-add-relative 'default :height 1.5)
</pre></blockquote></div><pre class="synopsis"><a id="idm80682448" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-remap-remove-relative</code> <em class="replaceable"><code>cookie</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、以前<code class="literal">face-remap-add-relative</code>で追加された相対的リマッピングを削除する。<em class="replaceable"><code>cookie</code></em>は、そのリマッピングが追加されたときに、<code class="literal">face-remap-add-relative</code>がリターンしたLispオブジェクトであること。
</p></blockquote></div><pre class="synopsis"><a id="idm80677840" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-remap-set-base</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>specs</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントバッファー内の<em class="replaceable"><code>face</code></em>のベースリマッピングを、<em class="replaceable"><code>specs</code></em>にセットする。<em class="replaceable"><code>specs</code></em>が空なら、<code class="literal">face-remap-reset-base</code>(以下参照)を呼び出したように、デフォルトベースリマッピングがリストアされる。これは単一の値<code class="literal">nil</code>を含む<em class="replaceable"><code>specs</code></em>とは異なることに注意。これは逆の結果をもたらす(<em class="replaceable"><code>face</code></em>のグローバル定義は無視される)。
</p><p>これは、グローバルなフェイス定義を継承した、デフォルトの<em class="replaceable"><code>base-spec</code></em>を上書きするので、必要ならそのような継承を追加するのは呼び出し側の責任である。
</p></blockquote></div><pre class="synopsis"><a id="idm80670032" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-remap-reset-base</code> <em class="replaceable"><code>face</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>face</code></em>のベースリマッピングに、<em class="replaceable"><code>face</code></em>のグローバル定義から継承した、デフォルト値にセットする。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Face-Functions"/>Functions for Working with Faces</h2></div></div></div><p>以下はフェイスを作成および処理するための、追加の関数です。
</p><pre class="synopsis"><a id="idm80664656" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-list</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、すべての定義済みフェイス名のリストをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80645456" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-id</code> <em class="replaceable"><code>face</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>の<em class="firstterm">フェイス番号(face
number)</em>をリターンする。これはEmacs内の低レベルで、フェイスを一意に識別する番号である。フェイス番号によるフェイス参照を要するのは稀である。
</p></blockquote></div><pre class="synopsis"><a id="idm80629200" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-documentation</code> <em class="replaceable"><code>face</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フェイス<em class="replaceable"><code>face</code></em>のドキュメント文字列、それが指定されていなければ<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80625104" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-equal</code> <em class="replaceable"><code>face1</code></em> <em class="replaceable"><code>face2</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これは、フェイス<em class="replaceable"><code>face1</code></em>とフェイス<em class="replaceable"><code>face2</code></em>が、表示にたいして同じ属性をもつなら<code class="literal">t</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80619472" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">face-differs-from-default-p</code> <em class="replaceable"><code>face</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>これはフェイス<em class="replaceable"><code>face</code></em>の表示がデフォルトフェイスと異なるなら、非<code class="literal">nil</code>をリターンする。
</p></blockquote></div><a id="idm80614864" class="indexterm"/><a id="idm80610000" class="indexterm"/><p><em class="firstterm">フェイスエイリアス(face
alias)</em>は、あるフェイスにたいして等価な名前を提供します。エイリアスシンボルの<code class="literal">face-alias</code>プロパティに対象となるフェイス名を与えることにより、フェイスエイリアスを定義できます。以下の例では、<code class="literal">mode-line</code>フェイスにたいするエイリアスとして、<code class="literal">modeline</code>を作成します。
</p><pre class="screen">(put 'modeline 'face-alias 'mode-line)
</pre><pre class="synopsis"><a id="idm80606288" class="indexterm"/><span class="category"><span class="bold"><strong>Macro</strong></span>:</span> <code class="function">define-obsolete-face-alias</code> <em class="replaceable"><code>obsolete-face</code></em> <em class="replaceable"><code>current-face</code></em> <em class="replaceable"><code>when</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このマクロは、<em class="replaceable"><code>current-face</code></em>のエイリアスとして<code class="literal">obsolete-face</code>を定義するとともに、将来に削除されるかもしれないことを示すためにobsolete(時代遅れ)とマークする。<em class="replaceable"><code>when</code></em>は、<code class="literal">obsolete-face</code>がobsoleteになる時期を示す文字列(通常はバージョン番号文字列)であること。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Auto-Faces"/>Automatic Face Assignment</h2></div></div></div><a id="idm80599760" class="indexterm"/><a id="idm80598992" class="indexterm"/><p>以下のフックは、バッファー内のテキストに自動的にフェイスを割り当てるために使用されます。これはJit-Lockモードの実装の一部であり、Font-Lockにより使用されます。
</p><pre class="synopsis"><a id="idm80597584" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">fontification-functions</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、再表示を行う直前に、Emacsの再表示により呼び出される関数のリストを保持する。これらはFont
Lockが有効でないときでも呼び出される。Font
Lockモードが有効なら、この変数は通常は単一の関数<code class="literal">jit-lock-function</code>だけを保持する。
</p><p>関数は、バッファー位置<em class="replaceable"><code>pos</code></em>を単一の引数として、リストされた順に呼び出される。これらは、カレントバッファー内の<em class="replaceable"><code>pos</code></em>で開始されるテキストにたいして、集合的にフェイスの割り当てを試みるべきである。
</p><p>関数は<code class="literal">face</code>プロパティをセットするおとにより、割り当てるフェイスを記録すること。またフェイスを割り当てたすべてのテキストに、非<code class="literal">nil</code>の<code class="literal">fontified</code>プロパティも追加するべきである。このプロパティは再表示に、そのテキストにたいしてそのフェイスがすでに割り当て済みであることを告げる。
</p><p><em class="replaceable"><code>pos</code></em>の後の文字がすでに非<code class="literal">nil</code>の<code class="literal">fontified</code>プロパティをもつが、フォント表示化を要さない場合に、何も行わない関数を追加するのは、おそらくよいアイデアである。ある関数が、前の関数による割り当てをオーバーライドする場合には、実際に問題となるのは最後の関数終了後のプロパティである。
</p><p>効率化のために、通常は各呼び出しにおいて400から600前後の文字にフェイスを割り当てるように、これらの関数を記述することを推奨する。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Basic-Faces"/>Basic Faces</h2></div></div></div><a id="idm80588240" class="indexterm"/><p>テキストにたいしてEmacs
Lispプログラムが何らかのフェイス割り当てを要する場合は、完全に新たなフェイスを定義するより、特定の既存フェイス、またはそれらを継承したフェイスを使用するほうが、よいアイデアである場合がしばしばあります。Emacsに特定の外観を与えるために別のユーザーが基本フェイス(basic
face)をカスタマイズしていても、この方法なら追加のカスタマイズなしでプログラムは“適合”することでしょう。
</p><p>以下にEmacsが定義する基本フェイスのいくつかをリストしました。これらに加えて、ハイライトがFont
Lockモードによりまだ処理されていなかったり、いくつかのFont Lockフェイスが使用されていなければ、構文的ハイライトのために、Font
Lockフェイスを使うようにしたいと思うかもしれません。<a class="link" href="ch23s06.html#Faces-for-Font-Lock" title="Faces for Font Lock">Faces for Font Lock</a>を参照してください。
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">default</code>
</span></dt><dd><p>属性がすべて指定されたデフォルトフェイス。他のすべてのフェイスは、暗にこのフェイスを継承する。未指定(unspecified)な任意の属性は、このフェイスの属性をデフォルトとする(<a class="link" href="ch38s12.html#Face-Attributes" title="Face Attributes">Face
Attributes</a>を参照)。
</p></dd><dt><span class="term"><code class="literal">bold</code>
, </span><span class="term"><code class="literal">italic</code>
, </span><span class="term"><code class="literal">bold-italic</code>
, </span><span class="term"><code class="literal">underline</code>
, </span><span class="term"><code class="literal">fixed-pitch</code>
, </span><span class="term"><code class="literal">variable-pitch</code>
</span></dt><dd><p>これらは、名前に示されるような属性をもち(<code class="literal">bold</code>はboldの<code class="literal">:weight</code>属性をもつ)、それ以外のすべての属性は未指定である(そのため<code class="literal">default</code>により与えられる)。
</p></dd><dt><span class="term"><code class="literal">shadow</code>
</span></dt><dd><p>テキストの“淡色表示(dimmed
out)”用。たとえばこれは、ミニバッファー内で無視されるファイル名部分に使用される(section “Minibuffers for File Names” in <em class="citetitle">The GNU Emacs Manual</em>を参照)。
</p></dd><dt><span class="term"><code class="literal">link</code>
, </span><span class="term"><code class="literal">link-visited</code>
</span></dt><dd><p>ユーザーを別のバッファーや“位置”へと送る、クリック可能テキストボタン用。
</p></dd><dt><span class="term"><code class="literal">highlight</code>
</span></dt><dd><p>一時的に強調するべきテキスト範囲用。たとえば一般的に、カーソルのハイライトには<code class="literal">mouse-face</code>プロパティが割り当てられる(<a class="link" href="ch32s19.html#Special-Properties" title="Properties with Special Meanings">Special
Properties</a>を参照)。
</p></dd><dt><span class="term"><code class="literal">match</code>
</span></dt><dd><p>検索コマンドによりマッチしたテキスト用。
</p></dd><dt><span class="term"><code class="literal">error</code>
, </span><span class="term"><code class="literal">warning</code>
, </span><span class="term"><code class="literal">success</code>
</span></dt><dd><p>エラー、警告、成功に関するテキスト用。たとえば<code class="filename">*Compilation*</code>内のメッセージにたいして使用される。
</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Font-Selection"/>Font Selection</h2></div></div></div><a id="idm80566864" class="indexterm"/><a id="idm80566096" class="indexterm"/><p>Emacsがグラフィカルなディスプレイ上で文字を描画可能になる前に、まずその文字にたいする<em class="firstterm">フォント(font)</em>を選択しなければなりません<a href="#ftn.idm80564688" class="footnote" id="idm80564688"><sup class="footnote">[20]</sup></a>。section “Fonts” in <em class="citetitle">The GNU
Emacs
Manual</em>を参照してください。通常、Emacsはその文字に割り当てられたフェイス、特にフェイス属性<code class="literal">:family</code>、<code class="literal">:weight</code>、<code class="literal">:slant</code>、<code class="literal">:width</code>(<a class="link" href="ch38s12.html#Face-Attributes" title="Face Attributes">Face
Attributes</a>を参照)にもとづいて、自動的にフォントを選択します。フォントの選択は、表示される文字にも依存します。表示できるのは文字セットが限定されているフォントもいくつかあります。利用可能なフォントがこの要件を完全に満たさない場合、Emacsは<em class="firstterm">もっとも近いフォント(closest
matching font)</em>を探します。このセクション内の変数は、Emacsがこの選択を行う方法を制御します。
</p><pre class="synopsis"><a id="idm80559312" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">face-font-family-alternatives</code></pre><div class="blockquote"><blockquote class="blockquote"><p>あるfamilyが指定されたが存在しない場合、この変数は試みるべき代替えのフォントファミリーを指定する。各要素は以下の形式をもつ:
</p><pre class="screen">(<em class="replaceable"><code>family</code></em> <em class="replaceable"><code>alternate-families</code></em>…)
</pre><p><em class="replaceable"><code>family</code></em>が指定されたが利用できなければ、Emacsは<em class="replaceable"><code>alternate-families</code></em>で与えられるファミリーで存在するものが見つかるまで、1つずつファミリーを試みる。
</p></blockquote></div><pre class="synopsis"><a id="idm80554192" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">face-font-selection-order</code></pre><div class="blockquote"><blockquote class="blockquote"><p>希望するすべてのフェイス属性(<code class="literal">:width</code>、<code class="literal">:height</code>、<code class="literal">:weight</code>、<code class="literal">:slant</code>)に完全にマッチするフォントが存在しない場合、この変数はもっとも近いフォントの選択時に考慮すべき、これらの属性の順序を指定する。値はこれらの属性シンボルを重要度降順で含むリストであること。デフォルトは<code class="literal">(:width
:height :weight :slant)</code>。
</p><p>フォント選択はまず、このリスト内の最初の属性にたいして利用可能な最適マッチを探す。その後、この方法で最適なフォントの中から、2つ目の属性にたいして最適なマッチを検索、...のように選択を行う。
</p><p>属性<code class="literal">:weight</code>および<code class="literal">:width</code>は、<code class="literal">normal</code>を中心とする範囲のような、シンボリック値をもつ。より極端(<code class="literal">normal</code>から離れた)なマッチは、より極端ではない(<code class="literal">normal</code>に近い)マッチより、幾分優先される。これは、可能なかぎり非normalなフェイスが、normalなフェイスとは対照的になることを保証するようにデザインされている。
</p><p>この変数が違いを生むケースの例は、デフォルトフォントに等価なイタリックがない場合である。デフォルトの順では、<code class="literal">italic</code>フェイスは、デフォルトのフォントに類似した非イタリックのフォントを使用するだろう。しかし<code class="literal">:height</code>の前に<code class="literal">:slant</code>を置くと、<code class="literal">italic</code>フェイスはたとえheightが同じでなくとも、イタリックフォントを使用するだろう。
</p></blockquote></div><pre class="synopsis"><a id="idm80530768" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">face-font-registry-alternatives</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、registryが指定されたがそれが存在しない場合に試みるべき、代替えのフォントレジストリーを指定する。各要素は以下の形式をもつ:
</p><pre class="screen">(<em class="replaceable"><code>registry</code></em> <em class="replaceable"><code>alternate-registries</code></em>…)
</pre><p><em class="replaceable"><code>registry</code></em>が指定されたが利用できなければ、Emacsは<em class="replaceable"><code>alternate-registries</code></em>内で存在するレジストリーが見つかるまで、他のレジストリーを1つずつ試みる。
</p></blockquote></div><a id="idm80526032" class="indexterm"/><p>Emacsがスケーラブルフォントを使用するようにできますが、デフォルトではそれらを使用しないようになっています。
</p><pre class="synopsis"><a id="idm80524624" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">scalable-fonts-allowed</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、どのスケーラブルフォントを使用するかを制御する。値<code class="literal">nil</code>(デフォルト)は、スケーラブルフォントを使用しないことを意味する。<code class="literal">t</code>はそのテキストにたいして適切と思われる、任意のスケーラブルフォントを使用することを意味する。
</p><p>それ以外なら、値は正規表現のリストであること。その場合、名前がこのリスト内の正規表現にマッチする、任意のスケーラブルフォントの使用が有効になる。たとえば、
</p><pre class="screen">(setq scalable-fonts-allowed '("iso10646-1$"))
</pre><p>これは、レジストリーが<code class="literal">iso10646-1</code>のようなスケーラブルフォントの使用を可能にする。
</p></blockquote></div><pre class="synopsis"><a id="idm80506832" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">face-font-rescale-alist</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、特定のフォントにたいするスケーリングを指定する。値は、以下の形式の要素をもつリストであること
</p><pre class="screen">(<em class="replaceable"><code>fontname-regexp</code></em> . <em class="replaceable"><code>scale-factor</code></em>)
</pre><p>使用しようとするフォントの名前が<em class="replaceable"><code>fontname-regexp</code></em>にマッチする場合、これはファクター<em class="replaceable"><code>scale-factor</code></em>に対応した、同様な大きさのフォントの選択を指示する。特定のフォントが提示する通常のheightやwidthが大きい、または小さい場合に、フォントサイズを正規化するためにこの機能を使用できるだろう。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Font-Lookup"/>Looking Up Fonts</h2></div></div></div><a id="idm80500944" class="indexterm"/><a id="idm80500176" class="indexterm"/><pre class="synopsis"><a id="idm80499152" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">x-list-fonts</code> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>reference-face</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>maximum</code></em> <em class="replaceable"><code>width</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>name</code></em>にマッチする利用可能なフォント名のリストをリターンする。<em class="replaceable"><code>name</code></em>はFontconfig、GTK、またはXLFDのいずれかのフォーマットによるフォント名を含む文字列であること(section “Fonts” in <em class="citetitle">The GNU Emacs
Manual</em>を参照)。XLFD文字列では、ワイルドカード文字が使用できる。‘<code class="literal">*</code>’文字は任意の部分文字列、‘<code class="literal">?</code>’は任意の単一文字にマッチする。フォント名のマッチングでは、大文字小文字の違いは無視される。
</p><p>オプション引数<em class="replaceable"><code>reference-face</code></em>および<em class="replaceable"><code>frame</code></em>が指定された場合は、リターンされるリストにはその時点でフレーム<em class="replaceable"><code>frame</code></em>上での<em class="replaceable"><code>reference-face</code></em>(フェイス名)と同じサイズのフォントだけが含まれる。
</p><p>オプション引数<em class="replaceable"><code>maximum</code></em>は、リターンされるフォント数の制限をセットする。これが非<code class="literal">nil</code>なら、リターン値は最初にマッチした<em class="replaceable"><code>maximum</code></em>個のフォントの後が切り捨てられる。<em class="replaceable"><code>maximum</code></em>に小さい値を指定すれば、そのパターンに多くのフォントがマッチするような場合に、この関数をより高速にできる。
</p><p>オプション引数<em class="replaceable"><code>width</code></em>は、希望するフォントの幅を指定する。これが非<code class="literal">nil</code>なら、この関数は文字の幅(平均)が、<em class="replaceable"><code>reference-face</code></em>の<em class="replaceable"><code>width</code></em>倍の幅であるようなフォントだけをリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm80465360" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">x-family-fonts</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>family</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>frame</code></em>上のファミリー<em class="replaceable"><code>family</code></em>にたいして利用可能なフォントを記述するリストをリターンする。<em class="replaceable"><code>family</code></em>が省略または<code class="literal">nil</code>なら、このリストはすべてのファミリーに適用され、すなわち利用可能なすべてのフォントを含む。それ以外なら、<em class="replaceable"><code>family</code></em>は文字列であること。これにはワイルドカード‘<code class="literal">?</code>’と‘<code class="literal">*</code>’を含めることができる。
</p><p>このリストは、<em class="replaceable"><code>frame</code></em>のあるディスプレイを記述する。<em class="replaceable"><code>frame</code></em>が省略または<code class="literal">nil</code>なら、これは選択されたフレームのディスプレイに適用される(<a class="link" href="ch29s09.html" title="Input Focus">Input
Focus</a>を参照)。
</p><p>このリスト内の各要素は、以下の形式のベクターであること:
</p><pre class="screen">[<em class="replaceable"><code>family</code></em> <em class="replaceable"><code>width</code></em> <em class="replaceable"><code>point-size</code></em> <em class="replaceable"><code>weight</code></em> <em class="replaceable"><code>slant</code></em>
 <em class="replaceable"><code>fixed-p</code></em> <em class="replaceable"><code>full</code></em> <em class="replaceable"><code>registry-and-encoding</code></em>]
</pre><p>最初の5つの要素はフェイス属性に対応する。あるフェイスにたいしてこれらの属性を指定した場合は、このフォントが使用されるだろう。
</p><p>最後の3つの要素は、そのフォントに関する追加の情報を与える。そのフォントが固定ピッチ(fixed-pitch)でなければ、<em class="replaceable"><code>fixed-p</code></em>は非<code class="literal">nil</code>である。<em class="replaceable"><code>full</code></em>はそのフォントのフルネーム、<em class="replaceable"><code>registry-and-encoding</code></em>はそのフォントのレジストリーとエンコーディングを与える。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Fontsets"/>Fontsets</h2></div></div></div><a id="idm80448976" class="indexterm"/><p><em class="firstterm">フォントセット(fontset)</em>とは、それぞれが文字コードの範囲に割り当てられる、フォントのリストのことです。個々のフォントでは、Emacsがサポートする文字の全範囲を表示できませんが、フォントセットであれば表示することができます。フォントのようにフォントセットは名前をもつことができ、フレームやフェイスにたいして“フォント”を指定する際、フォント名としてフォントセット名を使用できます。以下は、Lispプログラム制御下でのフォントセット定義に関する情報です。
</p><pre class="synopsis"><a id="idm80447312" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">create-fontset-from-fontset-spec</code> <em class="replaceable"><code>fontset-spec</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>style-variant-p</code></em> <em class="replaceable"><code>noerror</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、仕様文字列<em class="replaceable"><code>fontset-spec</code></em>に応じて、新たなフォントセットを定義する。この文字列は以下のような形式であること:
</p><pre class="screen"><em class="replaceable"><code>fontpattern</code></em>, [<em class="replaceable"><code>charset</code></em>:<em class="replaceable"><code>font</code></em>]…
</pre><p>カンマの前後の空白文字は無視される。
</p><p>この文字列の最初の部分<em class="replaceable"><code>fontpattern</code></em>は、最後の2つのフィールドが‘<code class="literal">fontset-<em class="replaceable"><code>alias</code></em></code>’であることを除外して、標準Xフォント名形式をもつこと。
</p><p>新たなフォントセットはlong名とshort名という、2つの名前をもつ。long名は、それ全体が<em class="replaceable"><code>fontpattern</code></em>であり、short名は‘<code class="literal">fontset-<em class="replaceable"><code>alias</code></em></code>’である。いずれの名前でもこのフォントセットを参照できる。同じ名前がすでに存在するフォントセットでは、<em class="replaceable"><code>noerror</code></em>が<code class="literal">nil</code>ならエラーがシグナルされ、<em class="replaceable"><code>noerror</code></em>が非<code class="literal">nil</code>ならこの関数は何も行わない。
</p><p>オプション引数<em class="replaceable"><code>style-variant-p</code></em>が非<code class="literal">nil</code>なら、そのフォントセットのbold、italic、およびbold-italicも同様に作成するよう指示する。これらの変種フォントセットはshort名をもたず、bold、および/またはitalicを示すように<em class="replaceable"><code>fontpattern</code></em>を変更して作成したlong名だけをもつ。
</p><p>仕様文字列は、そのフォントセット内でどのフォントを使用するかも宣言する。詳細は以下を参照。
</p></blockquote></div><p>構成‘<code class="literal"><em class="replaceable"><code>charset</code></em>:<em class="replaceable"><code>font</code></em></code>’は、ある特定の文字セットにたいして、(このフォントセット内の)どのフォントを使用するかを指定します。ここで<em class="replaceable"><code>charset</code></em>は文字セットの名前、<em class="replaceable"><code>font</code></em>はその文字セットにたいして使用するフォントです。仕様文字列内で、この構成を任意の回数使用できます。
</p><p>明示的に指定しなかった残りの文字セットにたいして、Emacsは<em class="replaceable"><code>fontpattern</code></em>にもとづきフォントを選択します。これは‘<code class="literal">fontset-<em class="replaceable"><code>alias</code></em></code>’を、その文字セットを命名する値に置き換えます。文字セット<acronym class="acronym">ASCII</acronym>にたいしては、‘<code class="literal">fontset-<em class="replaceable"><code>alias</code></em></code>’は‘<code class="literal">ISO8859-1</code>’に置き換えられます。
</p><p>加えて、後続の複数フィールドがワイルドカードなら、Emacsはそれらを1つのワイルドカードにまとめます。これは自動スケールフォント(auto-scaled
fonts)の使用を防ぐためです。フォントを大きくスケーリングすることにより作成されたフォントは編集に使用できず、小さくスケーリングされたフォントは、それ自身のサイズがより小さいフォントを使用する(Emacsが行う方法)ほうがよいので、有用ではありません。
</p><p>つまり、以下のような<em class="replaceable"><code>fontpattern</code></em>なら
</p><pre class="screen">-*-fixed-medium-r-normal-*-24-*-*-*-*-*-fontset-24
</pre><p><acronym class="acronym">ASCII</acronym>にたいするフォントspecは、以下のようになるでしょう:
</p><pre class="screen">-*-fixed-medium-r-normal-*-24-*-ISO8859-1
</pre><p>また、Chinese GB2312文字にたいするフォントspecは、以下のようになるでしょう:
</p><pre class="screen">-*-fixed-medium-r-normal-*-24-*-gb2312*-*
</pre><p>上記のフォントspecにマッチするChineseフォントをもっていないかもしれません。ほとんどのXディストリビューションには、<em class="replaceable"><code>family</code></em>フィールドに‘<code class="literal">song
ti</code>’か‘<code class="literal">fangsong
ti</code>’をもつChineseフォントだけが含まれます。そのような場合には、以下のように‘<code class="literal">Fontset-<em class="replaceable"><code>n</code></em></code>’を指定できます:
</p><pre class="screen">Emacs.Fontset-0: -*-fixed-medium-r-normal-*-24-*-*-*-*-*-fontset-24,\
        chinese-gb2312:-*-*-medium-r-normal-*-24-*-gb2312*-*
</pre><p>この場合、Chinese
GB2312以外のすべての文にたいするフォントspecは<em class="replaceable"><code>family</code></em>フィールドに‘<code class="literal">fixed</code>’をもち、Chinese
GB2312にたいするフォントspecは<em class="replaceable"><code>family</code></em>フィールドにワイルドカード‘<code class="literal">*</code>’をもちます。
</p><pre class="synopsis"><a id="idm80418896" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">set-fontset-font</code> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>character</code></em> <em class="replaceable"><code>font-spec</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>add</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、文字<em class="replaceable"><code>character</code></em>にたいして、<em class="replaceable"><code>font-spec</code></em>のフォントマッチングを使用するよう、既存のフォントセット<em class="replaceable"><code>name</code></em>を変更する。
</p><p><em class="replaceable"><code>name</code></em>が<code class="literal">nil</code>なら、この関数は<em class="replaceable"><code>frame</code></em>のフォントセット、<em class="replaceable"><code>frame</code></em>が<code class="literal">nil</code>なら選択されたフレームのフォントセットを変更する。
</p><p><em class="replaceable"><code>name</code></em>が<code class="literal">t</code>なら、この関数はshort名が‘<code class="literal">fontset-default</code>’であるような、デフォルトフォントセットを変更する。
</p><p><em class="replaceable"><code>character</code></em>には<code class="literal">(<em class="replaceable"><code>from</code></em>
.
<em class="replaceable"><code>to</code></em>)</code>のようなコンスを指定できる。ここで<em class="replaceable"><code>from</code></em>と<em class="replaceable"><code>to</code></em>は文字コードポイントである。この場合、範囲<em class="replaceable"><code>from</code></em>から<em class="replaceable"><code>to</code></em>(両端を含む)までのすべての文字にたいして、<em class="replaceable"><code>font-spec</code></em>を使用する。
</p><p><em class="replaceable"><code>character</code></em>には文字セットも指定できる。この場合は、その文字セット内のすべての文字にたいして、<em class="replaceable"><code>font-spec</code></em>を使用する。
</p><p><em class="replaceable"><code>character</code></em>にはスクリプト名も指定できる。この場合は、その文字セット内のすべての文字にたいして、<em class="replaceable"><code>font-spec</code></em>を使用する。
</p><p><em class="replaceable"><code>font-spec</code></em>にはコンス<code class="literal">(<em class="replaceable"><code>family</code></em>
.
<em class="replaceable"><code>registry</code></em>)</code>を指定できる。ここで<em class="replaceable"><code>family</code></em>はフォントのファミリー名(先頭にfoundry名が含まれるかもしれない)、<em class="replaceable"><code>registry</code></em>はフォントのレジストリー名(末尾にエンコーディング名が含まれるかもしれない)である。
</p><p><em class="replaceable"><code>font-spec</code></em>には、フォント名文字列も指定できる。
</p><p>オプション引数<em class="replaceable"><code>add</code></em>が非<code class="literal">nil</code>なら、以前セットされたフォントspecに<em class="replaceable"><code>font-spec</code></em>を追加する方法を指定する。<code class="literal">prepend</code>なら<em class="replaceable"><code>font-spec</code></em>は先頭に、<code class="literal">append</code>なら<em class="replaceable"><code>font-spec</code></em>は末尾に追加される。デフォルトでは、<em class="replaceable"><code>font-spec</code></em>は以前のセッティングをオーバーライドする。
</p><p>たとえば、以下は文字セット<code class="literal">japanese-jisx0208</code>に属するすえての文字にたいして、ファミリー名が‘<code class="literal">Kochi
Gothic</code>’であるようなフォントを使用するように、デフォルトフォントセットを変更する。
</p><pre class="screen">(set-fontset-font t 'japanese-jisx0208
                  (font-spec :family "Kochi Gothic"))
</pre></blockquote></div><pre class="synopsis"><a id="idm80393040" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">char-displayable-p</code> <em class="replaceable"><code>char</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、Emacsが<em class="replaceable"><code>char</code></em>を表示できるべきなら、<code class="literal">t</code>をリターンする。より正確には、選択されたフレームのフォントセットが、<em class="replaceable"><code>char</code></em>が属する文字セットを表示するためのフォントをもつ場合は、<code class="literal">t</code>をリターンする。
</p><p>フォントセットは、文字単位でフォントを指定できる。フォントセットがこれを行う場合、この関数の値は正確ではないかもしれない。
</p></blockquote></div></div><div class="sect2"><div class="titlepage"><div><div><h2 class="title"><a id="Low_002dLevel-Font"/>Low-Level Font Representation</h2></div></div></div><a id="idm80386896" class="indexterm"/><p>通常は、フォントを直接扱う必要はありません。これを行う必要がある場合には、このセクションでその方法を説明します。
</p><p>Emacs Lispでは、フォントは<em class="firstterm">フォントオブジェクト(font objects)</em>、<em class="firstterm">フォントspec(font
specs)</em>、<em class="firstterm">フォントエンティティー(font entities)</em>という、3つの異なるLispオブジェクトを使用して表現されます。
</p><pre class="synopsis"><a id="idm80383952" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">fontp</code> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>type</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>object</code></em>がフォントオブジェクト、フォントspec、フォントエンティティーなら<code class="literal">t</code>、それ以外なら<code class="literal">nil</code>をリターンする。
</p><p>オプション引数<em class="replaceable"><code>type</code></em>が非<code class="literal">nil</code>なら、チェックするLispオブジェクトの正確なタイプを決定する。この場合、<em class="replaceable"><code>type</code></em>は<code class="literal">font-object</code>、<code class="literal">font-spec</code>、<code class="literal">font-entity</code>のいずれかであること。
</p></blockquote></div><a id="idm80363472" class="indexterm"/><p>フォントオブジェクトは、Emacsが<em class="firstterm">オープンした</em>フォントを表します。Lispでフォントオブジェクトは変更できませんが、調べることはできます。
</p><pre class="synopsis"><a id="idm80361680" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-at</code> <em class="replaceable"><code>position</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>window</code></em> <em class="replaceable"><code>string</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>ウィンドウ<em class="replaceable"><code>window</code></em>内の位置<em class="replaceable"><code>position</code></em>にある文字を表示するために使用されている、フォントオブジェクトをリターンする。<em class="replaceable"><code>window</code></em>が<code class="literal">nil</code>の場合のデフォルトは、選択されたウィンドウである。<em class="replaceable"><code>string</code></em>が<code class="literal">nil</code>なら、<em class="replaceable"><code>position</code></em>はカレントバッファー内の位置を指定する。それ以外なら、<em class="replaceable"><code>string</code></em>は文字列で、<em class="replaceable"><code>position</code></em>はその文字列内での位置を指定すること。
</p></blockquote></div><a id="idm80349648" class="indexterm"/><p>フォントspecは、フォントを探すために使用できる仕様セットを含むLispオブジェクトです。フォントspec内の仕様にたいして、1つ以上のフォントがマッチすることができます。
</p><pre class="synopsis"><a id="idm80348240" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-spec</code> <em class="replaceable"><code>&amp;rest</code></em> <em class="replaceable"><code>arguments</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p><em class="replaceable"><code>arguments</code></em>内の仕様を使用して、新たなフォントspecをリターンする。これは<code class="literal">property</code>-<code class="literal">value</code>のペアーであること。可能な仕様は以下のとおり:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">:name</code>
</span></dt><dd><p>XLFD、Fontconfig、GTKいずれかのフォーマットによるフォント名(文字列)。section “Fonts” in <em class="citetitle">The GNU
Emacs Manual</em>を参照のこと。
</p></dd><dt><span class="term"><code class="literal">:family</code>
, </span><span class="term"><code class="literal">:foundry</code>
, </span><span class="term"><code class="literal">:weight</code>
, </span><span class="term"><code class="literal">:slant</code>
, </span><span class="term"><code class="literal">:width</code>
</span></dt><dd><p>これらは、同名のフェイス属性と同じ意味をもつ。<a class="link" href="ch38s12.html#Face-Attributes" title="Face Attributes">Face Attributes</a>を参照のこと。
</p></dd><dt><span class="term"><code class="literal">:size</code>
</span></dt><dd><p>フォントサイズ。非負の整数はピクセル単位、浮動小数点数ならポイントサイズを指定する。
</p></dd><dt><span class="term"><code class="literal">:adstyle</code>
</span></dt><dd><p>‘<code class="literal">sans</code>’のように、そのフォントにたいするタイポグラフィックスタイル(typographic
style)の追加情報。値は文字列またはシンボルであること。
</p><a id="idm80334288" class="indexterm"/></dd><dt><span class="term"><code class="literal">:registry</code>
</span></dt><dd><p>‘<code class="literal">iso8859-1</code>’のような、フォントの文字セットレジストリーとエンコーディング。値は文字列またはシンボルであること。
</p></dd><dt><span class="term"><code class="literal">:script</code>
</span></dt><dd><p>そのフォントがサポートしなければならないスクリプト(シンボル)。
</p></dd><dt><span class="term"><code class="literal">:otf</code>
</span></dt><dd><a id="idm80329552" class="indexterm"/><p>Emacsが‘<code class="literal">libotf</code>’サポートつきでコンパイルされている場合、そのフォントはそれらのOpenType機能をサポートする、OpenTypeフォントでなければならない。値は以下の形式のリストでなければならない
</p><pre class="screen"><code class="literal">(<em class="replaceable"><code>script-tag</code></em> <em class="replaceable"><code>langsys-tag</code></em> <em class="replaceable"><code>gsub</code></em> <em class="replaceable"><code>gpos</code></em>)</code>
</pre><p>ここで<em class="replaceable"><code>script-tag</code></em>はOpenTypeスクリプトタグシンボル、<em class="replaceable"><code>langsys-tag</code></em>はOpenType言語システムタグシンボル(<code class="literal">nil</code>ならデフォルト言語システムを使用)、<code class="literal">gsub</code>はOpenType
GSUB機能タグシンボル(何も要求されない場合は<code class="literal">nil</code>)、<code class="literal">gpos</code>はOpenType
GPOS機能タグシンボルのリスト(何も要求されない場合は<code class="literal">nil</code>)である。<code class="literal">gsub</code>または<code class="literal">gpos</code>がリストなら、そのリスト内の<code class="literal">nil</code>要素は、そのフォントが残りすべてのタグシンボルにマッチしてはならないことを意味する。<code class="literal">gpos</code>は省略することができる。
</p></dd></dl></div></blockquote></div><pre class="synopsis"><a id="idm80319312" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-put</code> <em class="replaceable"><code>font-spec</code></em> <em class="replaceable"><code>property</code></em> <em class="replaceable"><code>value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>フォントspec <em class="replaceable"><code>font-spec</code></em>内のプロパティ<em class="replaceable"><code>property</code></em>に、<em class="replaceable"><code>value</code></em>をセットする。
</p></blockquote></div><a id="idm80314448" class="indexterm"/><p>フォントエンティティーは、オープンする必要がないフォントへの参照です。フォントオブジェクトとフォントspecの中間的な性質をもち、フォントspecとは異なり、フォントオブジェクトと同様、単一かつ特定のフォントを参照します。フォントオブジェクトとは異なり、フォントエンティティーの作成では、そのフォントのコンテンツはコンピューターへのメモリーにロードされません。Emacsは、スケーラブルフォントを参照するために単一のフォントエンティティーから、複数の異なるサイズのフォントオブジェクトをオープンするかもしれません。
</p><pre class="synopsis"><a id="idm80313040" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">find-font</code> <em class="replaceable"><code>font-spec</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フレーム<em class="replaceable"><code>frame</code></em>上のフォントspec
<em class="replaceable"><code>font-spec</code></em>にもっともマッチするフォントエンティティーをリターンする。<em class="replaceable"><code>frame</code></em>が<code class="literal">nil</code>の場合のデフォルトは、選択されたフレームである。
</p></blockquote></div><pre class="synopsis"><a id="idm80303312" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">list-fonts</code> <em class="replaceable"><code>font-spec</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em> <em class="replaceable"><code>num</code></em> <em class="replaceable"><code>prefer</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、フォントspec <em class="replaceable"><code>font-spec</code></em>にマッチする、すべてのフォントエンティティーのリストをリターンする。
</p><p>オプション引数<em class="replaceable"><code>frame</code></em>が非<code class="literal">nil</code>なら、そのフォントが表示されるフレームを指定する。オプション引数<em class="replaceable"><code>num</code></em>が非<code class="literal">nil</code>なら、それはリターンされるリストの最大長を指定する整数だること。オプション引数<em class="replaceable"><code>prefer</code></em>が非<code class="literal">nil</code>なら、それはリターンされるリスト順を制御するために使用する、別のフォントspecであること。リターンされるフォントspecはそのフォントspecに“もっとも近い”降順にソートされて格納される。
</p></blockquote></div><p><code class="literal">:font</code>属性の値としてフォントspec、フォントエンティティー、フォント名文字列を渡して<code class="literal">set-face-attribute</code>を呼び出すと、Emacsは表示に利用できるもっとも“マッチする”フォントをオープンします。そして。そのフェイスにたいする<code class="literal">:font</code>属性の実際の値として、対応するフォントオブジェクトを格納します。
</p><p>以下の関数は、フォントに関する情報を取得するために使用できます。これらの関数の<em class="replaceable"><code>font</code></em>引数にはフォントオブジェクト、フォントエンティティー、またはフォントspecを指定できます。
</p><pre class="synopsis"><a id="idm80292176" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-get</code> <em class="replaceable"><code>font</code></em> <em class="replaceable"><code>property</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>font</code></em>にたいするフォントプロパティ<em class="replaceable"><code>property</code></em>の値をリターンする。
</p><p><em class="replaceable"><code>font</code></em>がフォントspecで、そのフォントspecが<em class="replaceable"><code>property</code></em>を指定しなければ、リターン値は<code class="literal">nil</code>である。<em class="replaceable"><code>font</code></em>がフォントオブジェクト、またはフォントエンティティーなら、<em class="replaceable"><code>:script</code></em>プロパティにたいする値は、そのフォントがサポートするスクリプトのリストかもしれない。
</p></blockquote></div><pre class="synopsis"><a id="idm80281296" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-face-attributes</code> <em class="replaceable"><code>font</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>font</code></em>に対応するフェイス属性のリストをリターンする。オプション引数<em class="replaceable"><code>frame</code></em>は、そのフォントが表示されるフレームを指定する。これが<code class="literal">nil</code>なら、選択されたフレームが使用される。リターン値は以下の形式である
</p><pre class="screen">(:family <em class="replaceable"><code>family</code></em> :height <em class="replaceable"><code>height</code></em> :weight <em class="replaceable"><code>weight</code></em>
   :slant <em class="replaceable"><code>slant</code></em> :width <em class="replaceable"><code>width</code></em>)
</pre><p>ここで<em class="replaceable"><code>family</code></em>、<em class="replaceable"><code>height</code></em>、<em class="replaceable"><code>weight</code></em>、<em class="replaceable"><code>slant</code></em>、<em class="replaceable"><code>width</code></em>の値は、フェイス属性の値である。<em class="replaceable"><code>font</code></em>により指定されない場合いくつかのキー/属性ペアーは、このリストから省略されるかもしれない。
</p></blockquote></div><pre class="synopsis"><a id="idm80270928" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">font-xlfd-name</code> <em class="replaceable"><code>font</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>fold-wildcards</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、<em class="replaceable"><code>font</code></em>にマッチするXLFD((X Logical Font
Descriptor))を文字列としてリターンする。XLFDに関する情報は、section “Fonts” in <em class="citetitle">The GNU Emacs
Manual</em>を参照のこと。その名前がXLFD(最大255文字を含むことが可能)にたいして長すぎる場合、この関数は<code class="literal">nil</code>をリターンする。
</p><p>オプション引数<em class="replaceable"><code>fold-wildcards</code></em>が非<code class="literal">nil</code>なら、連続するワイルドカードは1つにまとめられる。
</p></blockquote></div></div><div class="footnotes"><br/><hr/><div id="ftn.idm81140432" class="footnote"><p><a href="#idm81140432" class="para"><sup class="para">[19] </sup></a>後方互換のため、フェイス名の指定に文字列も使用できます。これは同名のLispシンボルと等価です。</p></div><div id="ftn.idm80564688" class="footnote"><p><a href="#idm80564688" class="para"><sup class="para">[20] </sup></a>このコンテキストでは、用語<em class="firstterm">font</em>はFont
Lock(<a class="link" href="ch23s06.html" title="Font Lock Mode">Font Lock Mode</a>を参照)にたいして何も行いません。</p></div></div></div></body></html>