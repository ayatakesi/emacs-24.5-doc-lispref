<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Operating System Environment</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="System-Environment"/>Operating System Environment</h1></div></div></div><a id="idm82087248" class="indexterm"/><p>Emacsはさまざまな変数を通じて、オペレーティングシステム環境内の変数へのアクセスを提供します。これらの変数には、システムの名前、ユーザーの<acronym class="acronym">UID</acronym>などが含まれます。
</p><pre class="synopsis"><a id="idm82085456" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">system-configuration</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、ユーザーのシステムのハードウェアとソフトウェアにたいするGNUの標準コンフィグレーション名(standard GNU
configuration
name)を保持する。たとえば64ビットGNU/Linuxシステムにたいする典型的な値は‘<code class="literal">"x86_64-unknown-linux-gnu"</code>’である。
</p></blockquote></div><a id="idm82082512" class="indexterm"/><pre class="synopsis"><a id="idm82081488" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">system-type</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数の値は、Emacs実行中のオペレーティングシステムのタイプを示すシンボルである。可能な値は：
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">aix</code>
</span></dt><dd><p>IBMのAIX。
</p></dd><dt><span class="term"><code class="literal">berkeley-unix</code>
</span></dt><dd><p>Berkeley BSDとその変種。
</p></dd><dt><span class="term"><code class="literal">cygwin</code>
</span></dt><dd><p>MS-Windows上のPosixレイヤーであるCygwin。
</p></dd><dt><span class="term"><code class="literal">darwin</code>
</span></dt><dd><p>Darwin (Mac OS X)。
</p></dd><dt><span class="term"><code class="literal">gnu</code>
</span></dt><dd><p>(HURDとMachから構成される)GNUシステム。
</p></dd><dt><span class="term"><code class="literal">gnu/linux</code>
</span></dt><dd><p>GNU/Linuxシステム —
すなわちLinuxカーネルを使用するGNUシステムの変種。(これらのシステムは人がしばしば“Linux”と呼ぶシステムだが、実際にはLinuxは単なるカーネルであり、システム全体ではない。)
</p></dd><dt><span class="term"><code class="literal">gnu/kfreebsd</code>
</span></dt><dd><p>FreeBSDカーネルによる(glibcベースの)GNUシステム。
</p></dd><dt><span class="term"><code class="literal">hpux</code>
</span></dt><dd><p>ヒューレット・パッカードのHPUXオペレーティングシステム。
</p></dd><dt><span class="term"><code class="literal">irix</code>
</span></dt><dd><p>シリコングラフィックスのIrixシステム。
</p></dd><dt><span class="term"><code class="literal">ms-dos</code>
</span></dt><dd><p>MicrosoftのDOS。MS-DOSにたいするDJGPPでコンパイルされたEmacsは、たとえMS-Windows上で実行されていても<code class="literal">system-type</code>が<code class="literal">ms-dos</code>にバインドされる。
</p></dd><dt><span class="term"><code class="literal">usg-unix-v</code>
</span></dt><dd><p>AT&amp;TのUnix System V。
</p></dd><dt><span class="term"><code class="literal">windows-nt</code>
</span></dt><dd><p>MicrosoftのWindows NT、9X以降。たとえばWindows
7でも<code class="literal">system-type</code>の値は常に<code class="literal">windows-nt</code>である。
</p></dd></dl></div><p>わたしたちは絶対に必要になるまでは、より細分化するために新たなシンボルを追加したくありません。実際のところ、将来的にはこれらの候補のいくつかを取り除きたいと思っています。<code class="literal">system-type</code>で許されているより細分化する必要がある場合には、たとえば正規表現にたいして<code class="literal">system-configuration</code>をテストできます。
</p></blockquote></div><pre class="synopsis"><a id="idm82047312" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">system-name</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、実行中のマシン名を文字列としてリターンする。
</p></blockquote></div><p>シンボル<code class="literal">system-name</code>は変数であり、同時に関数である。実際のところ、その関数は変数<code class="literal">system-name</code>がカレントで保持する値が何であれ、それをリターンする。したがって、Emacsがシステム名について混乱する場合には、変数<code class="literal">system-name</code>をセットできる。この変数は、フレームタイトルを構築するのにも有用である(<a class="link" href="ch29s05.html" title="Frame Titles">Frame
Titles</a>を参照)。
</p><pre class="synopsis"><a id="idm82037712" class="indexterm"/><span class="category"><span class="bold"><strong>User Option</strong></span>:</span> <code class="varname">mail-host-address</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数が非<code class="literal">nil</code>の場合にはこの変数が、emailアドレスを生成するために<code class="literal">system-name</code>のかわりに使用される。たとえばこれは、<code class="literal">user-mail-address</code>のデフォルト値の構築時に使用される。<a class="link" href="ch39s04.html" title="User Identification">User
Identification</a>を参照のこと。(これはEmacsスタートアップ時に行われるので、実際に使用されるのはEmacsのdump時に保存されたものである。<a class="link" href="ape.html#Building-Emacs" title="Building Emacs">Building
Emacs</a>を参照されたい。)
</p></blockquote></div><pre class="synopsis"><a id="idm82031952" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">getenv</code> <em class="replaceable"><code>var</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>frame</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm82028624" class="indexterm"/><p>この関数は、環境変数<em class="replaceable"><code>var</code></em>の値を文字列としてリターンする。<em class="replaceable"><code>var</code></em>は文字列であること。その環境内で<em class="replaceable"><code>var</code></em>が未定義なら、<code class="literal">getenv</code>は<code class="literal">nil</code>をリターンする。<em class="replaceable"><code>var</code></em>がセットされているがnull(訳注:
空文字列)なら、‘<code class="literal">""</code>’をリターンする。Emacs内では、環境変数とそれらの値のリストは、変数<code class="literal">process-environment</code>内に保持されている。
</p><pre class="screen">(getenv "USER")
     ⇒ "lewis"
</pre><p>shellコマンド<code class="literal">printenv</code>は環境変数すべて、または一部をプリントする:
</p><pre class="screen">bash$ printenv
PATH=/usr/local/bin:/usr/bin:/bin
USER=lewis
</pre><pre class="screen">TERM=xterm
SHELL=/bin/bash
HOME=/home/lewis
</pre><pre class="screen">…
</pre></blockquote></div><pre class="synopsis"><a id="idm82020944" class="indexterm"/><span class="category"><span class="bold"><strong>Command</strong></span>:</span> <code class="function">setenv</code> <em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>value</code></em> <em class="replaceable"><code>substitute</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>このコマンドは、<em class="replaceable"><code>variable</code></em>という名前の環境変数の値に、<em class="replaceable"><code>value</code></em>をセットする。<em class="replaceable"><code>variable</code></em>は文字列であること。内部的には、Emacs
Lispは任意の文字列を扱える。しかし通常<em class="replaceable"><code>variable</code></em>はshell識別子として有効、すなわちアルファベットかアンダースコアで始まる、アルファベット、数字またはアンダースコアのシーケンスであること。それ以外の場合、Emacsのサブプロセスが<em class="replaceable"><code>variable</code></em>の値にアクセスを試みるとエラーが発生するかもしれない。<em class="replaceable"><code>value</code></em>が省略または<code class="literal">nil</code>の場合(またはプレフィクス引数とともにインタラクティブに呼び出された場合)、<code class="literal">setenv</code>はその環境から<em class="replaceable"><code>variable</code></em>を削除する。それ以外の場合、<em class="replaceable"><code>variable</code></em>は文字列であること。
</p><p>オプション引数<em class="replaceable"><code>substitute</code></em>が非<code class="literal">nil</code>なら、<em class="replaceable"><code>value</code></em>内のすべての環境変数を展開するために、Emacsは関数<code class="literal">substitute-env-vars</code>を呼び出す。
</p><p><code class="literal">setenv</code>は<code class="literal">process-environment</code>を変更することにより機能する。この変数を<code class="literal">let</code>でバインドするのも、合理的プラクティスである。
</p><p><code class="literal">setenv</code>は<em class="replaceable"><code>variable</code></em>の新たな値、または環境から<em class="replaceable"><code>variable</code></em>が削除されていれば<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm82006224" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">process-environment</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、それぞれが1つの環境変数を記す文字列リストである。関数<code class="literal">getenv</code>と<code class="literal">setenv</code>は、この変数により機能する。
</p><pre class="screen">process-environment
⇒ ("PATH=/usr/local/bin:/usr/bin:/bin"
    "USER=lewis"
</pre><pre class="screen">    "TERM=xterm"
    "SHELL=/bin/bash"
    "HOME=/home/lewis"
    …)
</pre><p><code class="literal">process-environment</code>に同じ環境変数を指定する“重複”した要素が含まれる場合、それらの最初の要素が変数を指定し、他の“重複”は無視される。
</p></blockquote></div><pre class="synopsis"><a id="idm82000848" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">initial-environment</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、Emacs開始時にその親プロセスからEmacsが継承した環境変数のリストを保持する。
</p></blockquote></div><pre class="synopsis"><a id="idm81998032" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">path-separator</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、(環境変数で見つけた)検索パス内でディレクトリーを区切る文字を示す文字列を保持する。値はUnixとGNUシステムでは<code class="literal">":"</code>、MSシステムでは<code class="literal">";"</code>である。
</p></blockquote></div><pre class="synopsis"><a id="idm81994320" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">parse-colon-path</code> <em class="replaceable"><code>path</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は環境変数<code class="envar">PATH</code>の値のような検索パス文字列を引数にとり、それをセパレーターで分割して、ディレクトリー名のリストをリターンする。このリスト内では、<code class="literal">nil</code>はカレントディレクトリーを意味する。この関数の名前からはセパレーターは“コロン”だが、実際に使用するのは<code class="literal">path-separator</code>の値である。
</p><pre class="screen">(parse-colon-path ":/foo:/bar")
     ⇒ (nil "/foo/" "/bar/")
</pre></blockquote></div><pre class="synopsis"><a id="idm86134352" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">invocation-name</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、Emacsが呼び出された時のプログラム名を保持する。値は文字列で、ディレクトリー名は含まれない。
</p></blockquote></div><pre class="synopsis"><a id="idm86131664" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">invocation-directory</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、Emacs実行可能形式が呼び出されたディレクトリー名、そのディレクトリーが判断できなければ<code class="literal">nil</code>をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm86128464" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">installation-directory</code></pre><div class="blockquote"><blockquote class="blockquote"><p>非<code class="literal">nil</code>なら、それはサブディレクトリー<code class="filename">lib-src</code>と<code class="filename">etc</code>を探すディレクトリーである。インストールされたEmacsなら、通常は<code class="literal">nil</code>。Emacsが標準のインストール位置にそれらのディレクトリーを見つけられないものの、Emacs実行可能形式を含むディレクトリー(たとえば<code class="literal">invocation-directory</code>)に何らかの関連があるディレクトリーで見つかることができたら非<code class="literal">nil</code>ならとなる。
</p></blockquote></div><pre class="synopsis"><a id="idm86122704" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">load-average</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>use-float</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は現在、1分、5分、15分のロードアベレージ(load averages:
平均負荷)をリストでリターンする。このロードアベレージは、そのシステム上で実行を試みているプロセス数を示す。
</p><p>デフォルトでは、この値はシステムロードアベレージを100倍にした整数だが、<em class="replaceable"><code>use-float</code></em>が非<code class="literal">nil</code>なら100を乗ずることなくこれらの値は浮動小数点数としてリターンされる。
</p><p>ロードアベレージ入手が不可能なら、この関数はエラーをシグナルする。いくつかのプラットフォームでは、ロードアベレージへのアクセスにカーネル情報を読み取れるよう、通常は推奨されないsetuidかsetgidしたEmacsのインストールを要する。
</p><p>1分のロードアベレージは利用できるが、5分と15分のアレージは利用できない場合、この関数は利用可能なアベレージを含んだ短縮されたリストをリターンする。
</p><pre class="screen">(load-average)
     ⇒ (169 48 36)
</pre><pre class="screen">(load-average t)
     ⇒ (1.69 0.48 0.36)
</pre><p>shellコマンドの<code class="literal">uptime</code>は、これと類似した情報をリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm86102736" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">emacs-pid</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、Emacsプロセスのプロセス<acronym class="acronym">ID</acronym>を整数としてリターンする。
</p></blockquote></div><pre class="synopsis"><a id="idm86099536" class="indexterm"/><span class="category"><span class="bold"><strong>Variable</strong></span>:</span> <code class="varname">tty-erase-char</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この変数は、Emacs開始前にそのシステムの端末ドライバーで選択されていた、erase文字を保持する。
</p></blockquote></div></div></body></html>