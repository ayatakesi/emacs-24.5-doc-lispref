<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Time of Day</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/></head><body><div class="sect1"><div class="titlepage"><div><div><h1 class="title"><a id="Time-of-Day"/>Time of Day</h1></div></div></div><a id="idm86025808" class="indexterm"/><p>このセクションでは、カレント時刻とタイムゾーンを決定する方法を説明します。
</p><a id="idm86024528" class="indexterm"/><p>これらの関数のほとんどは、整数4つのリスト<code class="literal">(<em class="replaceable"><code>sec-high</code></em> <em class="replaceable"><code>sec-low</code></em> <em class="replaceable"><code>microsec</code></em>
<em class="replaceable"><code>picosec</code></em>)</code>、整数3つのリスト<code class="literal">(<em class="replaceable"><code>sec-high</code></em> <em class="replaceable"><code>sec-low</code></em>
<em class="replaceable"><code>microsec</code></em>)</code>、または整数2つのリスト<code class="literal">(<em class="replaceable"><code>sec-high</code></em>
<em class="replaceable"><code>sec-low</code></em>)</code>のいずれかで時刻を表します。整数<em class="replaceable"><code>sec-high</code></em>と<em class="replaceable"><code>sec-low</code></em>は秒の整数値の高位ビットと低位ビットです。この整数
<em class="replaceable"><code>high</code></em> * 2**16 + <em class="replaceable"><code>low</code></em>,
は、<em class="firstterm">epoch</em>(0:00 January 1, 1970
UTC)から指定された時刻までの秒数です。3番目のリスト要素<em class="replaceable"><code>microsec</code></em>が与えられた場合、それはその秒数の開始から指定された時刻までのマイクロ秒数を与えます(訳注:
マイクロは百万分の一
)。同様に、4番目のリスト要素<em class="replaceable"><code>picosec</code></em>が与えられた場合は、そのマイクロ秒数の開始から指定された時刻までのピコ秒数を与えます(訳注:
ピコは一兆分の一 )。
</p><p><code class="literal">current-time</code>のリターン値は、<code class="literal">file-attributes</code>のリターン値のタイムスタンプのように、4つの整数を使用して時刻を表します(<a class="link" href="ch25s06.html#Definition-of-file_002dattributes">Definition
of
file-attributes</a>を参照)。<code class="literal">current-time-string</code>の引数<em class="replaceable"><code>time-value</code></em>のように、関数の引数では2整数、3整数、4整数のリストが指定できます。これらののリスト表現から、<code class="literal">current-time-string</code>を使用して標準的な可読形式の文字列へ、または以降のセクションで説明する<code class="literal">decode-time</code>と<code class="literal">format-time-string</code>を使用して他形式へ変換できます。
</p><pre class="synopsis"><a id="idm86011216" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">current-time-string</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>time-value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は、カレントの時刻と日付を可読形式の文字列でリターンする。この文字列の先頭部分には曜日、月、日付、時刻がこの順に含まれ、それらが可変長となることはない。これらのフィールドにたいして使用される文字数は常に同じなので、それらを切り出すために安心して<code class="literal">substring</code>を使用できる。年の部分は正確に4桁とは限らず、いつか追加情報が終端に不可されるかもしれないので、文字列終端からではなく先頭から文字を数えること。
</p><p>引数<em class="replaceable"><code>time-value</code></em>が与えられた場合、それはカレント時刻ではなく,フォーマットする(整数リスト表現の)時刻を指定する。
</p><pre class="screen">(current-time-string)
     ⇒ "Wed Oct 14 22:21:05 1987"
</pre></blockquote></div><pre class="synopsis"><a id="idm85989456" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">current-time</code></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数は4つの整数のリスト<code class="literal">(<em class="replaceable"><code>sec-high</code></em> <em class="replaceable"><code>sec-low</code></em> <em class="replaceable"><code>microsec</code></em>
<em class="replaceable"><code>picosec</code></em>)</code>で表されたカレント時刻をリターンする。これらの整数うち後部は、低精度の時刻をリターンするシステムでは0になる。現在のすべてのマシンでは、<em class="replaceable"><code>picosec</code></em>は1000の倍数だが、より高精度のクロックが利用可能になったら変更されるかもしれない。
</p></blockquote></div><pre class="synopsis"><a id="idm85984080" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">float-time</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>time-value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><p>この関数はエポックからの経過秒数を、浮動小数点数としてリターンする。オプション引数<em class="replaceable"><code>time-value</code></em>が与えられた場合には、カレント時刻ではなく(整数リスト表現の)時刻を変換するよう指定する。
</p><p><span class="emphasis"><em>警告</em></span>: 結果は浮動小数点数なので、正確ではないかもしれない。正確なタイムスタンプが必要なら、この関数を使用しないこと。
</p></blockquote></div><pre class="synopsis"><a id="idm85979344" class="indexterm"/><span class="category"><span class="bold"><strong>Function</strong></span>:</span> <code class="function">current-time-zone</code> <em class="replaceable"><code>&amp;optional</code></em> <em class="replaceable"><code>time-value</code></em></pre><div class="blockquote"><blockquote class="blockquote"><a id="idm85976400" class="indexterm"/><p>この関数は、そのユーザーが居るタイムゾーンを記すリストをリターンする。
</p><p>値は<code class="literal">(<em class="replaceable"><code>offset</code></em>
<em class="replaceable"><code>name</code></em>)</code>という形式をもつ。ここで<em class="replaceable"><code>offset</code></em>は、UTCより進んでいる秒数(グリニッジより東)を与える整数である。負の値はグリニッジより西を意味する。2つ目の要素<em class="replaceable"><code>name</code></em>は、そのタイムゾーンの名前を与える文字列。夏時間の開始と終了時に、いずれの要素も変化する。ユーザーが季節時間調整を用いていないタイムゾーンを指定した場合には、値は時期を通して定数となる。
</p><p>この値を計算するのに必要なすべての情報をオペレーティングシステムが提供しない場合、このリストの未知の要素は<code class="literal">nil</code>になる。
</p><p>引数<em class="replaceable"><code>time-value</code></em>が与えられた場合、それはカレント時刻ではなく、かわりに分析すべき時刻(整数リスト表現)を指定する。
</p></blockquote></div><p>カレントのタイムゾーンは、環境変数<code class="envar">TZ</code>により判断されます。<a class="link" href="ch39s03.html" title="Operating System Environment">System
Environment</a>を参照してください。たとえば<code class="literal">(setenv "TZ"
"UTC0")</code>とすれば、万国標準時の使用をEmacsに指示できます。その環境に<code class="envar">TZ</code>がなければ、Emacsはプラットフォーム依存のデフォルトタイムゾーンを使用します。
</p></div></body></html>